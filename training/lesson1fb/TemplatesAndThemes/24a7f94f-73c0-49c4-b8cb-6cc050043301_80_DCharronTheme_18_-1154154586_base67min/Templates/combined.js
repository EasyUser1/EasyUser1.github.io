function Sys$Enum$parse(n,t){var i,r,h,f,e,o,s,u,c;if(t){if(i=this.__lowerCaseValues,!i){this.__lowerCaseValues=i={};f=this.prototype;for(e in f)i[e.toLowerCase()]=f[e]}}else i=this.prototype;if(this.__flags){for(o=(t?n.toLowerCase():n).split(","),s=0,u=o.length-1;u>=0;u--){if(c=o[u].trim(),r=i[c],typeof r!="number")throw Error.argument("value",String.format(Sys.Res.enumInvalidValue,n.split(",")[u].trim(),this.__typeName));s|=r}return s}if(h=t?n.toLowerCase():n,r=i[h.trim()],typeof r!="number")throw Error.argument("value",String.format(Sys.Res.enumInvalidValue,n,this.__typeName));return r}function Sys$Enum$toString(n){var r,t,i,u,e,o,f;if(typeof n=="undefined"||n===null)return this.__string;if(r=this.prototype,this.__flags&&n!==0){if(i=this.__sortedValues,!i){i=[];for(t in r)i[i.length]={key:t,value:r[t]};i.sort(function(n,t){return n.value-t.value});this.__sortedValues=i}for(u=[],e=n,t=i.length-1;t>=0;t--)if((o=i[t],f=o.value,f!==0)&&(f&n)===f&&(u[u.length]=o.key,e-=f,e===0))break;if(u.length&&e===0)return u.reverse().join(", ")}else for(t in r)if(r[t]===n)return t;return""}function Sys$Component$_setProperties(n,t){var u,c=Object.getType(n),e=c===Object||c===Sys.UI.DomElement,l=Sys.Component.isInstanceOfType(n)&&!n.get_isUpdating(),r,i,f,o,s;l&&n.beginUpdate();for(r in t)if(i=t[r],f=e?null:n["get_"+r],e||typeof f!="function")o=n[r],i&&typeof i=="object"&&(!e||o)?Sys$Component$_setProperties(o,i):n[r]=i;else if(s=n["set_"+r],typeof s=="function")s.apply(n,[i]);else if(i instanceof Array){u=f.apply(n);for(var h=0,a=u.length,v=i.length;h<v;h++,a++)u[a]=i[h]}else typeof i=="object"&&Object.getType(i)===Object&&(u=f.apply(n),Sys$Component$_setProperties(u,i));l&&n.endUpdate()}function Sys$Component$_setReferences(n,t){var i,r,u;for(i in t)r=n["set_"+i],u=$find(t[i]),r.apply(n,[u])}function Scorm12API(){var n="^[\\u0000-\\uffff]{0,255}$",i="^[\\u0000-\\uffff]{0,4096}$",f="^([0-2]{1}[0-9]{1}):([0-5]{1}[0-9]{1}):([0-5]{1}[0-9]{1})(.[0-9]{1,2})?$",r="^([0-9]{2,4}):([0-9]{2}):([0-9]{2})(.[0-9]{1,2})?$",t="^-?([0-9]+)$",u="^-?([0-9]{0,2})(.[0-9]+)?$",e=n,o="^passed$|^completed$|^failed$|^incomplete$|^browsed$",s="^time-out$|^suspend$|^logout$|^$",h="^previous$|^continue$";this._errorCode=SCORM12_ErrorCode.NoError;this._isInitialized=function(){var n=this._getAPI();return n._state==CommunicationState.Running};this.LMSInitialize=function(n){if(_trackingManager.WriteDebugInformation("SCORM 1.2 [LMSInitialize] "+n),n==""){var t=this._initialize();if(t=="true")return this._errorCode=SCORM12_ErrorCode.NoError,"true";this._errorCode=SCORM12_ErrorCode.GeneralException}else this._errorCode=SCORM12_ErrorCode.ArgumentError;return"false"};this.LMSFinish=function(n){return _trackingManager.WriteDebugInformation("[LMSFinish] "+n),this._errorCode=SCORM12_ErrorCode.NoError,this._terminate()};this.LMSGetValue=function(n){var t=this._LMSGetValue(n);return _trackingManager.WriteDebugInformation("[LMSGetValue] "+n+" : "+t),t};this._LMSGetValue=function(n){var r,u,f,s,e;if(!this._isInitialized())return this._errorCode=SCORM12_ErrorCode.NotInitialized,"false";this._errorCode=SCORM12_ErrorCode.NoError;switch(n){case"cmi.core._children":return"student_id, student_name, lesson_location, credit, lesson_status, entry, score, total_time, lesson_mode, exit, session_time";case"cmi.core.student_id":return this._getValue("cmi.learner_id");case"cmi.core.student_name":return this._getValue("cmi.learner_name");case"cmi.core.lesson_location":return this._getValue("cmi.location");case"cmi.core.credit":return this._getValue("cmi.credit");case"cmi.core.lesson_status":u=this._getValue("cmi.completion_status");switch(u){case"not attempted":return"not attempted";case"unknown":case"incomplete":return"incomplete";case"completed":f=this._getValue("cmi.success_status");switch(f){case"passed":return"passed";case"failed":return"failed";case"unknown":return"completed";default:return this._errorCode=SCORM12_ErrorCode.IncorrectDataType,!1}default:return this._errorCode=SCORM12_ErrorCode.IncorrectDataType,!1}case"cmi.core.entry":return this._getValue("cmi.entry");case"cmi.core.score._children":return"raw, min, max";case"cmi.core.score.raw":return this._getValue("cmi.score.raw");case"cmi.core.score.max":return this._getValue("cmi.score.max");case"cmi.core.score.min":return this._getValue("cmi.score.min");case"cmi.core.total_time":return this._convertTimestampFromScorm2004(this._getValue("cmi.total_time"));case"cmi.core.lesson_mode":return this._getValue("cmi.mode");case"cmi.core.exit":return this._getValue("cmi.exit");case"cmi.core.session_time":return this._convertTimestampFromScorm2004(this._getValue("cmi.session_time"));case"cmi.comments":return this._getValue("cmi.comments_from_learner.0.comment");case"cmi.comments_from_lms":return this._getValue("cmi.comments_from_lms.0.comment");case"cmi.objectives._children":return"id, score, status";case"cmi.suspend_data":case"cmi.launch_data":case"cmi.objectives._count":case"cmi.interactions._count":return this._getValue(n);case"cmi.student_data._children":return"mastery_score, max_time_allowed, time_limit_action";case"cmi.student_data.mastery_score":return this._getValue("cmi.scaled_passing_score");case"cmi.student_data.max_time_allowed":return this._getValue("cmi.max_time_allowed");case"cmi.student_data.time_limit_action":return this._getValue("cmi.time_limit_action");case"cmi.student_preference._children":return"audio, language, speed, text";case"cmi.student_preference.audio":return this._getValue("cmi.learner_preference.audio_level");case"cmi.student_preference.language":return this._getValue("cmi.learner_preference.language");case"cmi.student_preference.speed":return this._getValue("cmi.learner_preference.delivery_speed");case"cmi.student_preference.text":return this._getValue("cmi.learner_preference.audio_captioning");case"cmi.interactions._children":return"id, objectives, time, type, correct_responses, weighting, student_response, result, latency"}if(r=n.split(/[._](\d+)./),r.length>=3){var t=r[0].replace("cmi.","").replace("adl.",""),i=r[1],o=r[2];switch(t){case"objectives":if(o=="status"){u=this._getValue(t+"."+i+".completion_status");switch(u){case"not attempted":return"not attempted";case"unknown":case"incomplete":return"incomplete";case"completed":f=this._getValue(t+"."+i+".success_status");switch(f){case"passed":return"passed";case"failed":return"failed";case"unknown":return"completed"}}return this._errorCode=SCORM12_ErrorCode.IncorrectDataType,!1}break;case"interactions":switch(o){case"student_response":return this._getValue(t+"."+i+".learner_response").replace(/\[([.,])\]/g,"$1");case"correct_responses":return s=r[3],this._getValue(t+"."+i+".correct_responses."+s+".pattern").replace(/\[([.,])\]/g,"$1");case"time":return this._convertTimeFromScorm2004(this._getValue(t+"."+i+".timestamp"));case"latency":return this._convertTimestampFromScorm2004(this._getValue(t+"."+i+".latency"));case"result":return e=this._getValue(t+"."+i+".result"),e==="incorrect"&&(e="wrong"),e}}return this._getValue(n)}};this._convertTimeFromScorm2004=function(n){return n.split("T")[1]};this._convertTimestampFromScorm2004=function(n){return n.replace(/PT(\d+)S/,"00:00:$1").replace(/PT(\d+)M(\d+)S/,"00:$1:$2").replace(/PT(\d+)H(\d+)M(\d+)S/,"$1:$2:$3")};this.LMSSetValue=function(c,l){var y,w,a,p,b,v,k;if(_trackingManager.WriteDebugInformation("[LMSSetValue] set "+c+" to: "+l),!this._isInitialized())return this._errorCode=SCORM12_ErrorCode.NotInitialized,"false";this._errorCode=SCORM12_ErrorCode.NoError;y=!1;switch(c){case"cmi.core.lesson_location":this._EnsureTypeIsCorrect(l,n)&&this._setValue("cmi.location",l);break;case"cmi.core.lesson_status":if(this._EnsureTypeIsCorrect(l,o))switch(l){case"passed":this._setValue("cmi.completion_status","completed");this._setValue("cmi.success_status","passed");break;case"completed":this._setValue("cmi.completion_status","completed");this._setValue("cmi.success_status","unknown");break;case"failed":this._setValue("cmi.completion_status","completed");this._setValue("cmi.success_status","failed");break;case"incomplete":this._setValue("cmi.completion_status","incomplete");this._setValue("cmi.success_status","unknown");break;case"not attempted":this._setValue("cmi.completion_status","not attempted");this._setValue("cmi.success_status","unknown")}break;case"cmi.core.score.raw":this._EnsureTypeIsCorrect(l,u)&&(this._setValue("cmi.score.raw",l),this._setValue("cmi.score.scaled",l/100));break;case"cmi.core.score.min":this._EnsureTypeIsCorrect(l,u)&&this._setValue("cmi.score.min",l);break;case"cmi.core.score.max":this._EnsureTypeIsCorrect(l,n)&&this._setValue("cmi.score.max",l);break;case"cmi.core.exit":this._EnsureTypeIsCorrect(l,s)&&this._setValue("cmi.exit",l);break;case"cmi.core.session_time":this._EnsureTypeIsCorrect(l,r)&&(w=this._convertTimestampToScorm2004(l),this._setValue("cmi.session_time",w));break;case"cmi.suspend_data":this._EnsureTypeIsCorrect(l,i)&&this._setValue(c,l);break;case"cmi.comments":this._EnsureTypeIsCorrect(l,i)&&this._setValue("cmi.comments_from_learner.0.comment",l);break;case"cmi.student_preference.audio":this._EnsureTypeIsCorrect(l,t)&&this._setValue("cmi.learner_preference.audio_level",l);break;case"cmi.student_preference.language":this._EnsureTypeIsCorrect(l,n)&&this._setValue("cmi.learner_preference.language",l);break;case"cmi.student_preference.speed":this._EnsureTypeIsCorrect(l,t)&&this._setValue("cmi.learner_preference.delivery_speed",l);break;case"cmi.student_preference.text":this._EnsureTypeIsCorrect(l,t)&&this._setValue("cmi.learner_preference.audio_captioning",l);break;case"nav.event":this._EnsureTypeIsCorrect(l,h);break;default:y=!0}if(!y)return(this._errorCode=this._get12ErrorCodeFrom2004(this._getLastError()),this._errorCode!=SCORM12_ErrorCode.NoError)?"false":"true";if(a=c.split(/[._](\d+)./),a.length>=3){if(p=a[0].replace("cmi.","").replace("adl.",""),b=a[2].split("."),b.length==1&&this.LMSGetValue("cmi."+p+"._children").indexOf(a[2])==-1)return this._errorCode=SCORM12_ErrorCode.NotImplementedError,"false";switch(p){case"objectives":if(a[2]=="status"){a[2]="success_status";v=a[1];switch(l){case"passed":this._setValue("cmi.objectives."+v+".completion_status","completed");l="passed";break;case"completed":this._setValue("cmi.objectives."+v+".completion_status","completed");l="unknown";break;case"failed":this._setValue("cmi.objectives."+v+".completion_status","completed");l="failed";break;case"incomplete":this._setValue("cmi.objectives."+v+".completion_status","incomplete");l="unknown";break;case"not attempted":this._setValue("cmi.objectives."+v+".completion_status","not attempted");l="unknown";break;default:return this._errorCode=SCORM12_ErrorCode.IncorrectDataType,"false"}}break;case"interactions":switch(a[2]){case"student_response":if(!this._EnsureTypeIsCorrect(l,e))return"false";a[2]="learner_response";l=l.replace(/[.,]/g,"[$&]");break;case"correct_responses":a[4]=="pattern"&&(l=l.replace(/[.,]/g,"[$&]"));break;case"time":if(!this._EnsureTypeIsCorrect(l,f))return"false";a[2]="timestamp";l=this._convertTimeToScorm2004(l);break;case"latency":if(!this._EnsureTypeIsCorrect(l,r))return"false";l=this._convertTimestampToScorm2004(l);break;case"result":l==="wrong"&&(l="incorrect")}}return k=this._setValue(a.join("."),l),this._errorCode=this._get12ErrorCodeFrom2004(this._getLastError()),k}return this._errorCode=Error.ElementIsReadOnly,"false"};this._convertTimeToScorm2004=function(n){var r=new Date,u=r.getFullYear(),t=r.getMonth(),i=r.getDay();return t<=9&&(t="0"+t),i<=9&&(i="0"+i),u+"-"+t+"-"+i+"T"+n};this._convertTimestampToScorm2004=function(n){var t=n.split(":"),i=t[0],r=t[1],u=t[2];return"PT"+i+"H"+r+"M"+u+"S"};this._EnsureTypeIsCorrect=function(n,t){return new RegExp(t).test(n)?!0:(this._errorCode=SCORM12_ErrorCode.IncorrectDataType,!1)};this.LMSCommit=function(n){return _trackingManager.WriteDebugInformation("[LMSCommit] "+n),this._commit()};this.LMSGetLastError=function(){return this._errorCode};this.LMSGetErrorString=function(n){if(n!=""){var t=[];return t["0"]="No error",t["101"]="General exception",t["201"]="Invalid argument error",t["202"]="Element cannot have children",t["203"]="Element not an array - cannot have count",t["301"]="Not initialized",t["401"]="Not implemented error",t["402"]="Invalid set value, element is a keyword",t["403"]="Element is read only",t["404"]="Element is write only",t["405"]="Incorrect data type",t[n]}return""};this.LMSGetDiagnostic=function(n){return n==""&&(n=this._errorCode),n};this._apiHandle=null;this._SCORM2004API=null;this._initialize=function(){var n=this._getAPI().Initialize("");return n.toString()!="true"&&this._errorHandler(),n.toString()};this._terminate=function(){var n=this._getAPI().Terminate("");return n.toString()!="true"&&this._errorHandler(),n.toString()};this._getValue=function(n){var i=this._getAPI().GetValue(n),t=this._getAPI().GetLastError().toString();return t!=ErrorCode.NoError?t=="403"?(this._errorCode=SCORM12_ErrorCode.NoError,""):(this._errorCode=this._get12ErrorCodeFrom2004(t),""):i.toString()};this._setValue=function(n,t){var i=this._getAPI().SetValue(n,t);return i.toString()!="true"&&this._errorHandler(),i};this._commit=function(){var n=this._getAPI().Commit("");return n!="true"&&this._errorHandler(),n.toString()};this._getAPI=function(){return this._SCORM2004API==null&&(this._SCORM2004API=window.API_1484_11,this._SCORM2004API==null)?(alert("Unable to locate the LMS's API Implementation.\n Initialize was not successful."),"false"):this._SCORM2004API};this._getLastError=function(){return this._getAPI().GetLastError().toString()};this._getErrorString=function(){return this._getAPI().GetErrorString(this._getLastError()).toString()};this._getDiagnostic=function(n){return this._getAPI().GetDiagnostic(n).toString()};this._errorHandler=function(){var n=this._getLastError().toString(),t;return n!=SCORM12_ErrorCode.NoError.toString()&&(t=this._getErrorString(),alert(t)),n};this._get12ErrorCodeFrom2004=function(n){switch(n){case"0":return SCORM12_ErrorCode.NoError;case"201":return SCORM12_ErrorCode.ArgumentError;case"401":case"402":return SCORM12_ErrorCode.NotImplementedError;case"403":return SCORM12_ErrorCode.NotInitialized;case"404":return SCORM12_ErrorCode.ElementIsReadOnly;case"405":return SCORM12_ErrorCode.ReadOnlyDataModelElement;case"406":case"407":case"408":return SCORM12_ErrorCode.IncorrectDataType;default:return SCORM12_ErrorCode.GeneralException}}}function doLMSInitialize(){var t=getAPIHandle(),n;return t==null?(alert("Unable to locate the LMS's API Implementation.\nLMSInitialize was not successful."),"false"):(n=t.Initialize(""),n.toString()!="true"&&ErrorHandler(),n.toString())}function doLMSFinish(){var t=getAPIHandle(),n;return t==null?(alert("Unable to locate the LMS's API Implementation.\nLMSFinish was not successful."),"false"):(n=t.Terminate(""),n.toString()!="true"&&ErrorHandler(),n.toString())}function doLMSGetValue(n){var t=getAPIHandle(),r,i,u;return t==null?(alert("Unable to locate the LMS's API Implementation.\nLMSGetValue was not successful."),""):(r=t.GetValue(n),i=t.GetLastError().toString(),i!=_NoError?n=="cmi.scaled_passing_score"?"0":(u=t.GetErrorString(i),console.log("GetValue("+n+") failed. \n"+u),""):r.toString())}function doLMSSetValue(n,t){var r=getAPIHandle(),i;if(r==null){alert("Unable to locate the LMS's API Implementation.\nLMSSetValue was not successful.");return}return i=r.SetValue(n,t),i.toString()!="true"&&ErrorHandler(),i}function doLMSCommit(){var t=getAPIHandle(),n;return t==null?(alert("Unable to locate the LMS's API Implementation.\nLMSCommit was not successful."),"false"):(n=t.Commit(""),n!="true"&&ErrorHandler(),n.toString())}function doLMSGetLastError(){var n=getAPIHandle();return n==null?(alert("Unable to locate the LMS's API Implementation.\nLMSGetLastError was not successful."),_GeneralError):n.GetLastError().toString()}function doLMSGetErrorString(n){var t=getAPIHandle();return t==null&&alert("Unable to locate the LMS's API Implementation.\nLMSGetErrorString was not successful."),t.GetErrorString(n).toString()}function doLMSGetDiagnostic(n){var t=getAPIHandle();return t==null&&alert("Unable to locate the LMS's API Implementation.\nLMSGetDiagnostic was not successful."),t.GetDiagnostic(n).toString()}function LMSIsInitialized(){var n=getAPIHandle(),t;return n==null?(alert("Unable to locate the LMS's API Implementation.\nLMSIsInitialized() failed."),!1):(n.GetValue("cmi.learner_name"),t=n.GetLastError().toString(),t!=_NotInitialized)}function ErrorHandler(){var n=getAPIHandle(),t,i;if(n==null){alert("Unable to locate the LMS's API Implementation.\nCannot determine LMS error code.");return}return t=n.GetLastError().toString(),t!=_NoError&&(i=n.GetErrorString(t),_Debug==!0&&(i+="\n",i+=n.GetDiagnostic(null)),console.log(i)),t}function getAPIHandle(){return apiHandle==null&&(apiHandle=getAPI()),apiHandle}function ScanParentsForAPI(n){for(var t=0;n.API_1484_11==null&&n.parent!=null&&n.parent!=n&&t<=MAX_PARENTS_TO_SEARCH;)t++,n=n.parent;return n.API_1484_11}function getAPI(){var n=null;return window.parent!=null&&window.parent!=window&&(n=ScanParentsForAPI(window.parent)),n==null&&window.top.opener!=null&&(n=ScanParentsForAPI(window.top.opener)),n}function SequencingRuntime(){function n(){this.Reachable=!1;this.Exception=Exception.None}this._suspendData=[];this._restorePreviousState=!1;this.RestorePreviousState=function(n){this._restorePreviousState=n};this._AppendSuspendData=function(n){this._restorePreviousState&&typeof n!="string"&&n.ComesFromPreviousSession();this._suspendData[this._suspendData.length]=n};this.GetCourseSessionTime=function(){for(var t,i=0,n=0;n<this._suspendData.length;n++)typeof this._suspendData[n]!="string"&&(t=SessionTimeHelper.ConvertSessionTimeToSeconds(this._suspendData[n].st),t!=null&&(i+=t));return SessionTimeHelper.ConvertSecondsToSessionTime(i)};this.GetSuspendData=function(){return Sys.Serialization.JavaScriptSerializer.serialize(this._suspendData)};this.IsCurrentActivityARoot=function(){return this.CurrentActivity.Identifier==this.Root.Identifier};this.SetResult=function(n){if(this.CurrentActivity!=null){this.CurrentActivity.Result=n;var t=new Course.ActivitySuspendData;t.Init(this.CurrentActivity);this._AppendSuspendData(t)}};this.CurrentActivity=null;this.SuspendedActivity=null;this.Root=null;this.Activities=null;this.Init=function(n){var f,r,e,o,s,h,i,u,t;for(this.CurrentActivity=null,this.Root=n,this.Activities=this.GenerateFlatList(this.Root),f=0;f<this.Activities.length;f++){for(r=this.Activities[f],this.RunSelectChildrenProcess(r),this.RunRandomizeChildrenProcess(r),e=0;e<r.Sequencing.PrimaryObjective.MapInfos.length;e++)i=r.Sequencing.PrimaryObjective.MapInfos[e],u=i.TargetObjective,u!=null&&(t=new MapInfo,t.WriteSatisfiedStatus=i.ReadSatisfiedStatus,t.WriteNormalizedMeasure=i.ReadNormalizedMeasure,t.WriteRawScore=i.ReadRawScore,t.WriteMinScore=i.ReadMinScore,t.WriteMaxScore=i.ReadMaxScore,t.WriteCompletionStatus=i.ReadCompletionStatus,t.WriteProgressMeasure=i.ReadProgressMeasure,t.ReadSatisfiedStatus=!1,t.ReadNormalizedMeasure=!1,t.ReadRawScore=!1,t.ReadMinScore=!1,t.ReadMaxScore=!1,t.ReadCompletionStatus=!1,t.ReadProgressMeasure=!1,t.TargetObjective=r.Sequencing.PrimaryObjective,u.MapInfos[u.MapInfos.length]=t);for(o=0;o<r.Sequencing.SecondaryObjectives.length;o++)for(s=r.Sequencing.SecondaryObjectives[o],h=0;h<s.MapInfos.length;h++)i=s.MapInfos[h],u=i.TargetObjective,u!=null&&(t=new MapInfo,t.WriteSatisfiedStatus=i.ReadSatisfiedStatus,t.WriteNormalizedMeasure=i.ReadNormalizedMeasure,t.WriteRawScore=i.ReadRawScore,t.WriteMinScore=i.ReadMinScore,t.WriteMaxScore=i.ReadMaxScore,t.WriteCompletionStatus=i.ReadCompletionStatus,t.WriteProgressMeasure=i.ReadProgressMeasure,t.ReadSatisfiedStatus=!1,t.ReadNormalizedMeasure=!1,t.ReadRawScore=!1,t.ReadMinScore=!1,t.ReadMaxScore=!1,t.ReadCompletionStatus=!1,t.ReadProgressMeasure=!1,t.TargetObjective=s,u.MapInfos[u.MapInfos.length]=t)}};this.GenerateFlatList=function(n){var t=[];return t[0]=n,t.concat(this.ConvertToList(n))};this.ConvertToList=function(n){for(var t=[],i=0;i<n.Activities.length;i++)t[t.length]=n.Activities[i],n.Activities.length>0&&(t=t.concat(this.ConvertToList(n.Activities[i])));return t};this._currentRequestBeingProcessed=null;this.RunOverallSequencingProcess=function(n){var r,u,i,f,t;if(this._currentRequestBeingProcessed=n,r=this.RunNavigationRequestProcess(n),r.Exception!=Exception.None){alert(r.Exception);return}if(r.TerminationRequest!=NavRequest.None){if(u=new Request,u.NavRequest=r.TerminationRequest,t=this.RunTerminationRequestProcess(u),t.Exception!=Exception.None){alert(t.Exception);return}t.SequencingRequest!=NavRequest.None&&(n.NavRequest=t.SequencingRequest)}if(r.SequencingRequest!=NavRequest.None){if(i=this.RunSequencingRequestProcess(n),i.Exception!=Exception.None){alert(i.Exception);return}if(i.EndSequencingSession){setTimeout(function(){Course.EndSession()},1);return}if(i.TargetActivity==null)return;if(f=this.RunDeliveryRequestProcess(i),!f.IsValid)return f.Exception;if(t=this.RunContentDeliveryEnvironmentProcess(i),t!=Exception.None){alert(t);return}}};this.RunNavigationRequestProcess=function(n){var t=new ValidatedRequest(n),u,i,r;t.SequencingRequest=n.NavRequest;switch(n.NavRequest){case NavRequest.Start:this.CurrentActivity==null?t.IsValid=!0:t=t.GetInvalidRequest(Exception.NB_2_1_1);break;case NavRequest.ResumeAll:this.CurrentActivity==null?this.SuspendedActivity!=null?t.IsValid=!0:t=t.GetInvalidRequest(Exception.NB_2_1_3):t=t.GetInvalidRequest(Exception.NB_2_1_1);break;case NavRequest.Continue:if(this.CurrentActivity==null){t=t.GetInvalidRequest(Exception.NB_2_1_2);break}!this.IsCurrentActivityARoot()&&this.CurrentActivity.AreFlowSequencingRequestsPermitted()?(t.IsValid=!0,this.CurrentActivity.IsActive&&(t.TerminationRequest=NavRequest.Exit)):t=t.GetInvalidRequest(Exception.NB_2_1_4);break;case NavRequest.Previous:if(this.CurrentActivity==null){t=t.GetInvalidRequest(Exception.NB_2_1_2);break}if(this.IsCurrentActivityARoot())t=t.GetInvalidRequest(Exception.NB_2_1_6);else if(this.CurrentActivity.AreFlowSequencingRequestsPermitted()&&!this.CurrentActivity.Parent.Sequencing.ControlMode.ForwardOnly){if(t.IsValid=!0,this.CurrentActivity.IsActive){t.TerminationRequest=NavRequest.Exit;break}}else t=t.GetInvalidRequest(Exception.NB_2_1_5);break;case NavRequest.Forward:case NavRequest.Backward:t=t.GetInvalidRequest(Exception.NB_2_1_7);break;case NavRequest.Choice:if(n.TargetActivity!=null)if(n.TargetActivity.IsEqualTo(this.Root)||n.TargetActivity.AreChoiceSequencingRequestsPermitted()){if(this.CurrentActivity==null){t.IsValid=!0;t.TargetActivity=n.TargetActivity;break}if(!this.AreSiblings(n.TargetActivity,this.CurrentActivity))if(u=this.FindCommonAncestor(n.TargetActivity,this.CurrentActivity),i=this.CreateActivityPath(this.CurrentActivity,u),i.length>0){for(r=0;r<i.length;r++)if(i[r].IsActive&&!i[r].Sequencing.ControlMode.ChoiceExit)return t.GetInvalidRequest(Exception.NB_2_1_8)}else return t.GetInvalidRequest(Exception.NB_2_1_9);if(this.CurrentActivity.IsActive&&!this.CurrentActivity.Sequencing.ControlMode.ChoiceExit)return t.GetInvalidRequest(Exception.NB_2_1_8);t.IsValid=!0;t.TargetActivity=n.TargetActivity;this.CurrentActivity.IsActive&&(t.TerminationRequest=NavRequest.Exit)}else return t.GetInvalidRequest(Exception.NB_2_1_10);else t=t.GetInvalidRequest(Exception.NB_2_1_11);break;case NavRequest.Exit:this.CurrentActivity!=null?this.CurrentActivity.IsActive?(t.IsValid=!0,t.TerminationRequest=NavRequest.Exit):t=t.GetInvalidRequest(Exception.NB_2_1_12):t=t.GetInvalidRequest(Exception.NB_2_1_2);break;case NavRequest.ExitAll:this.CurrentActivity!=null?(t.IsValid=!0,t.TerminationRequest=NavRequest.ExitAll):t=t.GetInvalidRequest(Exception.NB_2_1_2);break;case NavRequest.Abandon:this.CurrentActivity!=null?this.CurrentActivity.IsActive?(t.IsValid=!0,t.TerminationRequest=NavRequest.Abandon,t.SequencingRequest=NavRequest.Exit):t=t.GetInvalidRequest(Exception.NB_2_1_12):t=t.GetInvalidRequest(Exception.NB_2_1_2);break;case NavRequest.AbandonAll:this.CurrentActivity!=null?(t.IsValid=!0,t.TerminationRequest=NavRequest.AbandonAll,t.SequencingRequest=NavRequest.Exit):t=t.GetInvalidRequest(Exception.NB_2_1_2);break;case NavRequest.SuspendAll:this.CurrentActivity!=null?(t.IsValid=!0,t.TerminationRequest=NavRequest.SuspendAll,t.SequencingRequest=NavRequest.Exit):t=t.GetInvalidRequest(Exception.NB_2_1_2);break;case NavRequest.Jump:if(n.TargetActivity!=null&&n.TargetActivity.IsAvailable())return t.IsValid=!0,t.TerminationRequest=NavRequest.Exit,t.TargetActivity=n.TargetActivity,t;t=t.GetInvalidRequest(Exception.NB_2_1_11);break;default:t=t.GetInvalidRequest(Exception.NB_2_1_13)}return t};this.RunSequencingExitActionRulesSubprocess=function(){for(var t,i=this.CreateActivityPath(this.CurrentActivity.Parent,this.Root).reverse(),n=0;n<i.length;n++)this.RunSequencingRulesCheckProcess(i[n],RuleAction.Exit)!=null&&(t=i[n],this.RunTerminateDescendentAttemptsProcess(t),this.RunEndAttemptProcess(t),this.CurrentActivity=t)};this.AreSiblings=function(n,t){return n.Parent==t.Parent?!0:!1};this.RunSequencingPostConditionRulesSubprocess=function(){var n,t,i;if(this.CurrentActivity.IsSuspended)return null;for(n=new ValidatedRequest,t=0;t<this.CurrentActivity.Sequencing.SequencingRules.length;t++)if(this.CurrentActivity.Sequencing.SequencingRules[t].Type==ConditionRuleType.Post){i=this.RunSequencingRulesCheckProcess(this.CurrentActivity,this.CurrentActivity.Sequencing.SequencingRules[t].RuleAction);switch(i){case RuleAction.Continue:return n.SequencingRequest=NavRequest.Continue,n;case RuleAction.Retry:return n.SequencingRequest=NavRequest.Retry,n;case RuleAction.Previous:return n.SequencingRequest=NavRequest.Previous,n;case RuleAction.ExitParent:return n.TerminationRequest=NavRequest.ExitParent,n;case RuleAction.ExitAll:return n.TerminationRequest=NavRequest.ExitAll,n;case RuleAction.RetryAll:return n.TerminationRequest=NavRequest.ExitAll,n.SequencingRequest=NavRequest.Retry,n}}return n};this.FindCommonAncestor=function(n,t){return n!=null&&t!=null?n.IsEqualTo(t)?null:n.Parent==null?n:t.Parent==null?t:this._FindCommonAncestorRecursive(n,t):null};this._FindCommonAncestorRecursive=function(n,t){if(n==null)return null;for(var i=t;i!=null;){if(n.IsEqualTo(i))return n;i=i.Parent}return this._FindCommonAncestorRecursive(n.Parent,t)};this.GetPathToRoot=function(n){var t=[],i;for(t[t.length]=n,i=n;i.Parent!=null;)i=i.Parent,t[t.length]=i;return t};this.GetPathToAncestor=function(n,t){var i=[],r;if(n!=null&&t==null)for(i[i.length]=n,r=n;r.Parent!=null;)if(r=r.Parent,i[i.length]=r,r.IsEqualTo(t))return i;return i};this.CreateActivityPath=function(n,t){for(var u=!1,r=[],i=0;i<this.Activities.length;i++)if(u&&(r[r.length]=this.Activities[i]),this.Activities[i].IsEqualTo(n)||this.Activities[i].IsEqualTo(t))if(u)break;else r[r.length]=this.Activities[i],u=!0;return r};this.RunTerminationRequestProcess=function(n){var t=new ValidatedRequest(n),e,u,r,f,i;if(this.CurrentActivity==null)return t.GetInvalidRequest(Exception.TB_2_3_1);if((n.NavRequest==NavRequest.Exit||n.NavRequest==NavRequest.Abandon)&&!this.CurrentActivity.IsActive)return t.GetInvalidRequest(Exception.TB_2_3_2);switch(n.NavRequest){case NavRequest.Exit:for(this.RunEndAttemptProcess(this.CurrentActivity),this.RunSequencingExitActionRulesSubprocess(),e=!0,u=null;e;)if(e=!1,u=this.RunSequencingPostConditionRulesSubprocess(),u!=null){if(u.TerminationRequest==NavRequest.ExitAll)return t.TerminationRequest=NavRequest.ExitAll,this.CurrentActivity.IsActive&&this.RunEndAttemptProcess(this.CurrentActivity),this.RunTerminateDescendentAttemptsProcess(this.Root),this.RunEndAttemptProcess(this.Root),this.CurrentActivity=this.Root,t.IsValid=!0,t.SequencingRequest=NavRequest.Exit,t;if(u.TerminationRequest==NavRequest.ExitParent){if(this.IsCurrentActivityARoot())return t.GetInvalidRequest(Exception.TB_2_3_4);this.CurrentActivity=this.CurrentActivity.Parent;this.RunEndAttemptProcess(this.CurrentActivity);e=!0}else if(this.IsCurrentActivityARoot()&&u.SequencingRequest!=NavRequest.Retry)return t.IsValid=!0,t.SequencingRequest=NavRequest.Exit,t}t.IsValid=!0;t.SequencingRequest=u.SequencingRequest;break;case NavRequest.ExitAll:this.CurrentActivity.IsActive&&this.RunEndAttemptProcess(this.CurrentActivity);this.RunTerminateDescendentAttemptsProcess(this.Root);this.RunEndAttemptProcess(this.Root);this.CurrentActivity=this.Root;t.IsValid=!0;t.SequencingRequest=NavRequest.Exit;break;case NavRequest.SuspendAll:if(this.CurrentActivity.IsActive||this.CurrentActivity.IsSuspended)this.RunOverallRollupProcess(this.CurrentActivity),this.SuspendedActivity=this.CurrentActivity;else{if(this.IsCurrentActivityARoot())return t.GetInvalidRequest(Exception.TB_2_3_3);this.SuspendedActivity=this.CurrentActivity.Parent}if(r=this.CreateActivityPath(this.SuspendedActivity,this.Root),r.length==0)return t.GetInvalidRequest(Exception.TB_2_3_5);for(i=0;i<r.length;i++)r[i].IsActive=!1,r[i].IsSuspended=!0;this.CurrentActivity=this.Root;t.IsValid=!0;t.SequencingRequest=NavRequest.Exit;break;case NavRequest.Abandon:this.CurrentActivity.IsActive=!1;t.IsValid=!0;break;case NavRequest.AbandonAll:for(f=this.CurrentActivity,i=0;f!=null;)r[i]=f,f=f.Parent,i++;if(r.length==0)return t.GetInvalidRequest(Exception.TB_2_3_6);for(i=0;i<r.length;i++)r[i].IsActive=!1;this.CurrentActivity=this.Root;t.IsValid=!0;t.SequencingRequest=NavRequest.Exit;break;default:t=t.GetInvalidRequest(Exception.TB_2_3_7)}return t};this.RunMeasureRollupProcess=function(n){var r=n.Sequencing.PrimaryObjective,t,e,i;if(r.MapInfos.length>0)for(t=0;t<r.MapInfos.length;t++)if(r.MapInfos[t].ReadNormalizedMeasure)return;var o=0,s=!1,u=0,f;for(t=0;t<n.Activities.length;t++)if(e=n.Activities[t],e.Tracked&&(i=e.Sequencing,i.RollupRules.RollupObjectiveSatisfied))if(i.PrimaryObjective!=null)f=i.PrimaryObjective,u+=i.RollupRules.ObjectiveMeasureWeight,f.Progress.ObjectiveMeasureStatus&&(o+=f.GetNormalizedMeasure()*i.RollupRules.ObjectiveMeasureWeight,s=!0);else return;s?u>0&&r.SetNormalizedMeasure(o/u):r.Progress.ObjectiveMeasureStatus=!1};this.RunCompletionMeasureRollupProcess=function(n){for(var t,e,u=0,f=!1,i=0,r=0;r<n.AvailableChildren.length;r++)t=n.AvailableChildren[r],t.Tracked&&(i+=t.CompletionThreshold.ProgressWeight,t.AttemptProgress.AttemptCompletionAmountStatus&&(u+=t.AttemptProgress.AttemptCompletionAmount*t.CompletionThreshold.ProgressWeight,f=!0));f?(e=n.Sequencing.PrimaryObjective,i>0?(n.AttemptProgress.AttemptCompletionAmountStatus=!0,n.AttemptProgress.AttemptCompletionAmount=u/i,e.SetProgressMeasure(n.AttemptProgress.AttemptCompletionAmount)):n.AttemptProgress.AttemptCompletionAmountStatus=!1):n.AttemptProgress.AttemptCompletionAmountStatus=!1};this.RunObjectiveRollupUsingMeasureProcess=function(n){var t,i;return n.Sequencing.PrimaryObjective!=null&&(t=n.Sequencing.PrimaryObjective,t.SatisfiedByMeasure)?(i=t.Progress,i.ObjectiveMeasureStatus?!n.IsActive||n.IsActive&&n.Sequencing.RollupConsiderations.MeasureSatisfactionIfActive?t.SetSatisfied(t.GetNormalizedMeasure()>=t.MinNormalizedMeasure):i.ObjectiveProgressStatus=!1:i.ObjectiveProgressStatus=!1,!0):!1};this.RunObjectiveRollupUsingRuleProcess=function(n){for(var e,t,i,r,u,o=!1,f=0;f<n.Sequencing.RollupRules.RollupRulesList.length;f++)if(e=n.Sequencing.RollupRules.RollupRulesList[f],e.RollupAction==RollupAction.NotSatisfied||e.RollupAction==RollupAction.Satisfied){o=!0;break}o||(t=new RollupRule,t.ChildActivitySet=RollupRuleToken.All,t.RollupConditions=new RollupConditions,i=new RollupCondition,i.Condition=Condition.Satisfied,t.RollupAction=RollupAction.Satisfied,t.RollupConditions.RollupConditionsList[0]=i,n.Sequencing.RollupRules.RollupRulesList[n.Sequencing.RollupRules.RollupRulesList.length]=t,t=new RollupRule,t.ChildActivitySet=RollupRuleToken.All,t.RollupConditions=new RollupConditions,i=new RollupCondition,i.Condition=Condition.ObjectiveStatusKnown,t.RollupAction=RollupAction.NotSatisfied,t.RollupConditions.RollupConditionsList[0]=i,n.Sequencing.RollupRules.RollupRulesList[n.Sequencing.RollupRules.RollupRulesList.length]=t);r=n.Sequencing.PrimaryObjective;r!=null&&(u=this.RunRollupRuleCheckSubprocess(n,RollupAction.NotSatisfied),u&&r.SetSatisfied(!1),u=this.RunRollupRuleCheckSubprocess(n,RollupAction.Satisfied),u&&r.SetSatisfied(!0))};this.RunActivityProgressRollupUsingMeasureProcess=function(n){return n.CompletionThreshold.CompletedByMeasure&&(n.AttemptProgress.AttemptProgressStatus=!1,n.AttemptProgress.AttemptCompletionStatus=!1,n.AttemptProgress.AttemptCompletionAmountStatus&&(n.AttemptProgress.AttemptProgressStatus=!0,n.AttemptProgress.AttemptCompletionStatus=n.AttemptProgress.AttemptCompletionAmount>=n.CompletionThreshold.MinProgressMeasure?!0:!1)),!1};this.RunActivityProgressRollupUsingRulesProcess=function(n){for(var f,t,i,e,r,o=!1,u=0;u<n.Sequencing.RollupRules.RollupRulesList.length;u++)if(f=n.Sequencing.RollupRules.RollupRulesList[u],f.RollupAction==RollupAction.Completed||f.RollupAction==RollupAction.Incomplete){o=!0;break}o||(t=new RollupRule,t.ChildActivitySet=RollupRuleToken.All,t.RollupConditions=new RollupConditions,i=new RollupCondition,i.Condition=Condition.Completed,t.RollupAction=RollupAction.Completed,t.RollupConditions.RollupConditionsList[0]=i,n.Sequencing.RollupRules.RollupRulesList[n.Sequencing.RollupRules.RollupRulesList.length]=t,t=new RollupRule,t.ChildActivitySet=RollupRuleToken.All,t.RollupConditions=new RollupConditions,i=new RollupCondition,i.Condition=Condition.ActivityProgressKnown,t.RollupAction=RollupAction.Incomplete,t.RollupConditions.RollupConditionsList[0]=i,n.Sequencing.RollupRules.RollupRulesList[n.Sequencing.RollupRules.RollupRulesList.length]=t);e=n.Sequencing.PrimaryObjective;r=this.RunRollupRuleCheckSubprocess(n,RollupAction.Incomplete);r&&(n.AttemptProgress.AttemptProgressStatus=!0,n.AttemptProgress.AttemptCompletionStatus=!1,e.SetCompletion(!1));r=this.RunRollupRuleCheckSubprocess(n,RollupAction.Completed);r&&(n.AttemptProgress.AttemptProgressStatus=!0,n.AttemptProgress.AttemptCompletionStatus=!0,e.SetCompletion(!0))};this.RunRollupRuleCheckSubprocess=function(n,t){for(var u,i,e,o,s,r,f=0;f<n.Sequencing.RollupRules.RollupRulesList.length;f++)if(n.Sequencing.RollupRules.RollupRulesList[f].RollupAction==t){for(u=n.Sequencing.RollupRules.RollupRulesList[f],i=[],e=0;e<n.AvailableChildren.length;e++)o=n.AvailableChildren[e],o.Tracked&&(s=this.RunCheckChildForRollupSubprocess(o,t),s&&(i[i.length]=this.RunEvaluateRollupConditionsSubprocess(o,u.RollupConditions.Combination,u.RollupConditions)));if(i.length>0){r=!1;switch(u.ChildActivitySet){case RollupRuleToken.All:this._containsValue(i,Result.Unknown)||this._containsValue(i,Result.False)||(r=!0);break;case RollupRuleToken.Any:this._containsValue(i,Result.True)&&(r=!0);break;case RollupRuleToken.None:this._containsValue(i,Result.True)||this._containsValue(i,Result.Unknown)||(r=!0);break;case RollupRuleToken.AtLeastCount:this._countValues(i,Result.True)>=u.MinimumCount&&(r=!0);break;case RollupRuleToken.AtLeastPercent:this._countValues(i,Result.True)/i.length>u.MinimumPercent&&(r=!0)}if(r)return!0}}return!1};this.RunEvaluateRollupConditionsSubprocess=function(n,t,i){for(var e,r,u=[],f=0;f<i.RollupConditionsList.length;f++){e=i.RollupConditionsList[f];r=Result.False;switch(e.Condition){case Condition.ActivityProgressKnown:n.AttemptProgress.AttemptProgressStatus&&(r=Result.True);break;case Condition.Attempted:n.AttemptProgress.ActivityAttemptCount>0&&(r=Result.True);break;case Condition.Completed:n.AttemptProgress.AttemptProgressStatus&&n.AttemptProgress.AttemptCompletionStatus&&(r=Result.True);break;case Condition.ObjectiveMeasureKnown:n.Sequencing.PrimaryObjective.HasMeasureStatus()&&(r=Result.True);break;case Condition.ObjectiveStatusKnown:n.Sequencing.PrimaryObjective.IsProgressKnown()&&(r=Result.True);break;case Condition.Never:r=Result.False;break;case Condition.Satisfied:n.Sequencing.PrimaryObjective.IsSatisfied()&&(r=Result.True);break;case Condition.AttemptLimitExceeded:n.Progress.ActivityProgressStatus&&n.Sequencing.LimitConditions.AttemptLimit>0&&n.Progress.ActivityAttemptCount>=n.Sequencing.LimitConditions.AttemptLimit&&(r=Result.True)}if(e.Operator==Operator.Not)switch(r){case Result.Unknown:r=Result.Unknown;break;case Result.True:r=Result.False;break;case Result.False:r=Result.True}u[u.length]=r}return u.length==0?Result.Unknown:t==ConditionCombination.All?this._containsValue(u,Result.False)||this._containsValue(u,Result.Unknown)?Result.False:Result.True:this._containsValue(u,Result.True)?Result.True:Result.False};this.RunCheckChildForRollupSubprocess=function(n,t){var i=!1,r;return(t==RollupAction.Satisfied||t==RollupAction.NotSatisfied)&&n.Sequencing.RollupRules.RollupObjectiveSatisfied&&(i=!0,(t==RollupAction.Satisfied&&n.Sequencing.RollupConsiderations.RequiredForSatisfied==RollupConsiderationsToken.IfNotSuspended||t==RollupAction.NotSatisfied&&n.Sequencing.RollupConsiderations.RequiredForNotSatisfied==RollupConsiderationsToken.IfNotSuspended)&&((!n.Progress.ActivityProgressStatus||n.Progress.ActivityAttemptCount>0&&n.IsSuspended)&&(i=!1),t==RollupAction.Satisfied&&n.Sequencing.RollupConsiderations.RequiredForSatisfied==RollupConsiderationsToken.IfAttempted||t==RollupAction.NotSatisfied&&n.Sequencing.RollupConsiderations.RequiredForNotSatisfied==RollupConsiderationsToken.IfAttempted?n.Progress.ActivityProgressStatus&&n.Progress.ActivityAttemptCount!=0||(i=!1):(t==RollupAction.Satisfied&&n.Sequencing.RollupConsiderations.RequiredForSatisfied==RollupConsiderationsToken.IfNotSkipped||t==RollupAction.NotSatisfied&&n.Sequencing.RollupConsiderations.RequiredForNotSatisfied==RollupConsiderationsToken.IfNotSkipped)&&(r=this.RunSequencingRulesCheckProcess(n,RuleAction.Skip),r!=null&&(i=!1)))),(t==RollupAction.Completed||t==RollupAction.Incomplete)&&n.Sequencing.RollupRules.RollupProgressCompletion&&(i=!0,(t==RollupAction.Completed&&n.Sequencing.RollupConsiderations.RequiredForCompleted==RollupConsiderationsToken.IfNotSuspended||t==RollupAction.Incomplete&&n.Sequencing.RollupConsiderations.RequiredForIncomplete==RollupConsiderationsToken.IfNotSuspended)&&((!n.Progress.ActivityProgressStatus||n.Progress.ActivityAttemptCount>0&&n.IsSuspended)&&(i=!1),t==RollupAction.Completed&&n.Sequencing.RollupConsiderations.RequiredForCompleted==RollupConsiderationsToken.IfAttempted||t==RollupAction.Incomplete&&n.Sequencing.RollupConsiderations.RequiredForIncomplete==RollupConsiderationsToken.IfAttempted?n.Progress.ActivityProgressStatus&&n.Progress.ActivityAttemptCount!=0||(i=!1):(t==RollupAction.Completed&&n.Sequencing.RollupConsiderations.RequiredForCompleted==RollupConsiderationsToken.IfNotSkipped||t==RollupAction.Incomplete&&n.Sequencing.RollupConsiderations.RequiredForIncomplete==RollupConsiderationsToken.IfNotSkipped)&&(r=this.RunSequencingRulesCheckProcess(n,RuleAction.Skip),r!=null&&(i=!1)))),i};this.RunOverallRollupProcess=function(n){var i=this.GetPathToRoot(n),t;if(i.length!=0)for(t=0;t<i.length;t++)i[t].IsLeaf()||(this.RunMeasureRollupProcess(i[t]),this.RunCompletionMeasureRollupProcess(i[t])),this.RunObjectiveRollupProcess(i[t]),this.RunActivityProgressRollupProcess(i[t])};this.RunObjectiveRollupProcess=function(n){if(n.Tracked){var t=this.RunObjectiveRollupUsingMeasureProcess(n);t||this.RunObjectiveRollupUsingRuleProcess(n)}};this.RunActivityProgressRollupProcess=function(n){if(n.Tracked){var t=this.RunActivityProgressRollupUsingMeasureProcess(n);t||this.RunActivityProgressRollupUsingRulesProcess(n)}};this.RunSelectChildrenProcess=function(n){if(n.Activities.length!=0&&!n.IsSuspended&&!n.IsActive)switch(n.Sequencing.RandomizationControls.SelectionTiming){case Timing.Once:n.Progress.ActivityProgressStatus||n.Sequencing.RandomizationControls.SelectCount!=null&&(n.AvailableChildren=this.SelectActivitiesRandomly(n.Activities,n.Sequencing.RandomizationControls.SelectCount))}};this.RunRandomizeChildrenProcess=function(n){if(n.Activities.length!=0&&!n.IsSuspended&&!n.IsActive)switch(n.Sequencing.RandomizationControls.RandomizationTiming){case Timing.Once:n.Progress.ActivityProgressStatus||n.Sequencing.RandomizationControls.ReorderChildren&&this.ShuffleActivities(n.AvailableChildren);break;case Timing.OnEachNewAttempt:n.Sequencing.RandomizationControls.ReorderChildren&&this.ShuffleActivities(n.AvailableChildren)}};this.SelectActivitiesRandomly=function(n,t){for(var f=Math.min(n.length,t),i=[],u=[],r;i.length<f;)r=Math.floor(Math.random()*n.length),this._containsValue(u,r)||(u[u.length]=r,i[i.length]=n[r]);return i};this.ShuffleActivities=function(n){n.sort(function(){return.5-Math.random()})};this.RunFlowTreeTraversalSubprocess=function(n,t,i,r){var u=new FlowTreeTraversalSubprocessResult,e=!1,f;if(i==TraversalDirection.Backward&&n.Parent.AvailableChildren[n.Parent.AvailableChildren.length-1].IsEqualTo(n)&&(t=TravelDirection.Backward,n=n.Parent.AvailableChildren[0],e=!0),t==TraversalDirection.Forward){if(this.Activities[this.Activities.length-1].IsEqualTo(n)&&n.Parent.AvailableChildren[n.Parent.AvailableChildren.length-1].IsEqualTo(n)||this.Root.IsEqualTo(n)&&!r)return this.RunTerminateDescendentAttemptsProcess(this.Root),u.EndSequencingSession=!0,u;if(n.Activities.length!=0&&r)return n.AvailableChildren.length>0?(this.RunSelectChildrenProcess(n),this.RunRandomizeChildrenProcess(n),u.NextActivity=n.AvailableChildren[0],u.TraversalDirection=t,u):(u.Exception=Exception.SB_2_1_2,u);if(n.Parent.AvailableChildren[n.Parent.AvailableChildren.length-1].IsEqualTo(n))return this.RunFlowTreeTraversalSubprocess(n.Parent,TraversalDirection.Forward,TraversalDirection.None,!1);for(f=0;f<n.Parent.AvailableChildren.length;f++)if(n.Parent.AvailableChildren[f].IsEqualTo(n))return u.NextActivity=n.Parent.AvailableChildren[f+1],u.TraversalDirection=t,u}if(t==TraversalDirection.Backward){if(this.Root.IsEqualTo(n))return u.Exception=Exception.SB_2_1_3,u;if(n.Activities.length!=0&&r)return n.AvailableChildren.length>0?n.Sequencing.ControlMode.ForwardOnly?(u.NextActivity=n.AvailableChildren[0],u.TraversalDirection=TraversalDirection.Forward,u):(u.NextActivity=n.AvailableChildren[n.AvailableChildren.length-1],u.TraversalDirection=TraversalDirection.Backward,u):(u.Exception=Exception.SB_2_1_2,u);if(!e&&n.Sequencing.ControlMode.ForwardOnly)return u.Exception=Exception.SB_2_1_4,u;if(n.Parent.AvailableChildren[0].IsEqualTo(n))return this.RunFlowTreeTraversalSubprocess(n.Parent,TraversalDirection.Backward,TraversalDirection.None,!1);for(f=1;f<n.Parent.AvailableChildren.length;f++)if(n.Parent.AvailableChildren[f].IsEqualTo(n))return u.NextActivity=n.Parent.AvailableChildren[f-1],u.TraversalDirection=t,u}return u};this.RunFlowActivityTraversalSubprocess=function(n,t,i){var r=new FlowTraversalSubprocessResult,e,u,f;return n.AreFlowSequencingRequestsPermitted()?(e=this.RunSequencingRulesCheckProcess(n,RuleAction.Skip),e!=null)?(u=this.RunFlowTreeTraversalSubprocess(n,t,i,!1),u.NextActivity==null?(r.Deliverable=!1,r.EndSequencingSession=u.EndSequencingSession,r.Exception=u.Exception,r.NextActivity=n,r):i==TraversalDirection.Backward&&u.TraversalDirection==TraversalDirection.Backward?this.RunFlowActivityTraversalSubprocess(u.NextActivity,t,TraversalDirection.None):this.RunFlowActivityTraversalSubprocess(u.NextActivity,t,i)):this.RunCheckActivityProcess(n)?(r.Deliverable=!1,r.Exception=Exception.SB_2_2_2,r.NextActivity=n,r):n.IsLeaf()?(r.Deliverable=!0,r.NextActivity=n,r):(f=this.RunFlowTreeTraversalSubprocess(n,t,TraversalDirection.None,!0),f.NextActivity==null?(r.Deliverable=!1,r.EndSequencingSession=f.EndSequencingSession,r.Exception=f.Exception,r.NextActivity=n,r):t==TraversalDirection.Backward&&f.TraversalDirection==TraversalDirection.Forward?this.RunFlowActivityTraversalSubprocess(f.NextActivity,TraversalDirection.Forward,TraversalDirection.Backward):this.RunFlowActivityTraversalSubprocess(f.NextActivity,t,TraversalDirection.None)):(r.Deliverable=!1,r.Exception=Exception.SB_2_2_1,r.NextActivity=n,r)};this.RunFlowSubprocess=function(n,t,i){var f=n,u=this.RunFlowTreeTraversalSubprocess(f,t,TraversalDirection.None,i),r;return u.NextActivity==null?(r=new FlowSubprocessResult,r.IdentifiedActivity=f,r.Deliverable=!1,r.EndSequencingSession=u.EndSequencingSession,r.Exception=u.Exception,r):(f=u.NextActivity,u=this.RunFlowActivityTraversalSubprocess(f,t,TraversalDirection.None),r=new FlowSubprocessResult,r.IdentifiedActivity=u.NextActivity,r.EndSequencingSession=u.EndSequencingSession,r.Exception=u.Exception,r.Deliverable=r.Exception==Exception.None?!0:!1,r)};this.RunChoiceActivityTraversalSubprocess=function(t,i){var r=new n;if(i==TraversalDirection.Forward)return this.RunSequencingRulesCheckProcess(t,RuleAction.StopForwardTraversal)!=null?(r.Reachable=!1,r.Exception=Exception.SB_2_4_1):r.Reachable=!0,r;if(i==TraversalDirection.Backward)if(t.Parent!=null){if(t.Parent.Sequencing.ControlMode.ForwardOnly)return r.Reachable=!1,r.Exception=Exception.SB_2_4_2,r}else return r.Reachable=!1,r.Exception=Exception.SB_2_4_3,r;return r.Reachable=!0,r};this.RunStartSequencingRequestProcess=function(){var n=new DeliveryRequest,t;return this.CurrentActivity!=null?(n.Exception=Exception.SB_2_5_1,n):(this.Root.Activities.length==0?n.TargetActivity=this.Root:(t=this.RunFlowSubprocess(this.Root,TraversalDirection.Forward,!0),t.Deliverable?n.TargetActivity=t.IdentifiedActivity:(n.EndSequencingSession=t.EndSequencingSession,n.Exception=t.Exception)),n)};this.RunResumeAllSequencingRequestProcess=function(){var n=new DeliveryRequest;return this.CurrentActivity!=null?(n.Exception=Exception.SB_2_6_1,n):this.SuspendedActivity==null?(n.Exception=Exception.SB_2_6_2,n):(n.TargetActivity=this.SuspendedActivity,n)};this.RunContinueSequencingRequestProcess=function(){var n=new DeliveryRequest,t;return this.CurrentActivity==null?(n.Exception=Exception.SB_2_7_1,n):!this.IsCurrentActivityARoot()&&!this.CurrentActivity.AreFlowSequencingRequestsPermitted()?(n.Exception=Exception.SB_2_7_2,n):(t=this.RunFlowSubprocess(this.CurrentActivity,TraversalDirection.Forward,!1),t.Deliverable?n.TargetActivity=t.IdentifiedActivity:(n.EndSequencingSession=t.EndSequencingSession,n.Exception=t.Exception),n)};this.RunPreviousSequencingRequestProcess=function(){var n=new DeliveryRequest,t;return this.CurrentActivity==null?(n.Exception=Exception.SB_2_8_1,n):!this.IsCurrentActivityARoot()&&!this.CurrentActivity.AreFlowSequencingRequestsPermitted()?(n.Exception=Exception.SB_2_8_2,n):(t=this.RunFlowSubprocess(this.CurrentActivity,TraversalDirection.Backward,!1),t.Deliverable?n.TargetActivity=t.IdentifiedActivity:(n.EndSequencingSession=t.EndSequencingSession,n.Exception=t.Exception),n)};this.RunChoiceSequencingRequestProcess=function(n){var t=new DeliveryRequest,l,f,c,s,h,u,i,r,e;if(n==null)return t.Exception=Exception.SB_2_9_1,t;for(i=this.GetPathToRoot(n).reverse(),u=0;u<i.length;u++){if(l=i[u],u!=0&&!l.IsAvailable())return t.Exception=Exception.SB_2_9_2,t;if(this.RunSequencingRulesCheckProcess(l,RuleAction.HiddenFromChoice)!=null)return t.Exception=Exception.SB_2_9_3,t}if(!n.IsEqualTo(this.Root)&&!n.Parent.Sequencing.ControlMode.Choice)return t.Exception=Exception.SB_2_9_4,t;if(f=null,this.CurrentActivity!=null){if(f=this.FindCommonAncestor(this.CurrentActivity,n),!this.CurrentActivity.IsEqualTo(n))if(this.AreSiblings(this.CurrentActivity,n)){var o=[],y=!1,p=!1,a=!1,w=!1;for(u=0;u<this.CurrentActivity.Parent.Activities.length;u++){if(this.CurrentActivity.Parent.Activities[u].IsEqualTo(this.CurrentActivity))if(y=!0,a=!0,p){o[o.length]=this.CurrentActivity.Parent.Activities[u];break}else w=!0;if(a&&(o[o.length]=this.CurrentActivity.Parent.Activities[u]),this.CurrentActivity.Parent.Activities[u].IsEqualTo(n)&&(p=!0,a=!0,y))break}if(o.length==0)return t.Exception=Exception.SB_2_9_5,t;for(h=TraversalDirection.Backward,w&&(h=TraversalDirection.Forward),c=0;c<o.length;c++)if(e=this.RunChoiceActivityTraversalSubprocess(o[c],h),!e.Reachable)return t.TargetActivity=null,t.Exception=e.Exception,t}else if(this.CurrentActivity.IsEqualTo(f)||this.CurrentActivity==null){if(i=this.CreateActivityPath(n,f),i.length<=1)return t.Exception=Exception.SB_2_9_5,t;for(r=0;r<i.length-1;r++){if(e=this.RunChoiceActivityTraversalSubprocess(i[r],TraversalDirection.Forward),!e.Reachable)return t.TargetActivity=null,t.Exception=e.Exception,t;if(!i[r].IsActive&&!i[r].IsEqualTo(f)&&i[r].Sequencing.ConstrainedChoiceConsiderations.PreventActivation)return t.TargetActivity=null,t.Exception=Exception.SB_2_9_6,t}}else if(n.IsEqualTo(f)){if(i=this.CreateActivityPath(this.CurrentActivity,f),i.length==0)return t.Exception=Exception.SB_2_9_5,t;for(r=0;r<i.length-1;r++)if(!i[r].Sequencing.ControlMode.ChoiceExit)return t.Exception=Exception.SB_2_9_7,t}else{if(i=this.CreateActivityPath(this.CurrentActivity,f).reverse(),i.splice(i.length-1,1),i.length==0)return t.Exception=Exception.SB_2_9_5,t;for(s=null,r=0;r<i.length;r++){if(!i[r].Sequencing.ControlMode.ChoiceExit)return t.Exception=Exception.SB_2_9_7,t;s==null&&i[r].Sequencing.ConstrainedChoiceConsiderations.ConstrainChoice&&(s=i[r])}if(s!=null){h=TraversalDirection.Backward;this.IsActivity1Forward(n,s)&&(h=TraversalDirection.Forward);var e=this.RunChoiceFlowSubprocess(s,h),v=e.IdentifiedActivity,b=!1;for(u=0;u<v.AvailableChildren.length;u++)if(v.AvailableChildren[u].IsEqualTo(n)){b=!0;break}if(!b&&!n.IsEqualTo(v)&&!n.IsEqualTo(s))return t.Exception=Exception.SB_2_9_8,t}if(i=this.CreateActivityPath(n,f),i.length<=1)return t.Exception=Exception.SB_2_9_5,t;if(this.IsActivity1Forward(n,this.CurrentActivity))for(r=0;r<i.length-1;r++){if(e=this.RunChoiceActivityTraversalSubprocess(i[r],TraversalDirection.Forward),!e.Reachable)return t.Exception=e.Exception,t;if(!i[r].IsActive&&!i[r].IsEqualTo(f)&&i[r].Sequencing.ConstrainedChoiceConsiderations.PreventActivation)return t.Exception=Exception.SB_2_9_6,t}else for(r=0;r<i.length-1;r++)if(!i[r].IsActive&&!i[r].IsEqualTo(f)&&i[r].Sequencing.ConstrainedChoiceConsiderations.PreventActivation)return t.Exception=Exception.SB_2_9_6,t}}else f=this.Root;return n.Activities.length==0?(t.TargetActivity=n,t):(e=this.RunFlowSubprocess(n,TraversalDirection.Forward,!0),e.Deliverable?t.TargetActivity=e.IdentifiedActivity:(this.RunTerminateDescendentAttemptsProcess(f),this.RunEndAttemptProcess(f),this.CurrentActivity=n,t.Exception=Exception.SB_2_9_9),t)};this.RunChoiceFlowSubprocess=function(n,t){var i=new FlowSubprocessResult,r=this.RunChoiceFlowTreeTraversalSubprocess(n,t);return i.IdentifiedActivity=r.IdentifiedActivity==null?n:r.IdentifiedActivity,i};this.RunChoiceFlowTreeTraversalSubprocess=function(n,t){var i=new FlowTraversalSubprocessResult,u,r;if(t==TraversalDirection.Forward){if(this.Activities[Activities.length-1].IsEqualTo(n)||this.Root.IsEqualTo(n))return i;if(n.Parent.AvailableChildren[n.Parent.AvailableChildren.length-1].IsEqualTo(n))return u=this.RunChoiceFlowTreeTraversalSubprocess(n.Parent,TraversalDirection.Forward),i.NextActivity=u.NextActivity,i;for(r=0;r<n.Parent.AvailableChildren.length;r++)if(n.Parent.AvailableChildren[r].IsEqualTo(n))return i.NextActivity=n.Parent.AvailableChildren[r+1],i}if(t==TraversalDirection.Backward){if(this.Root.IsEqualTo(n))return i;if(n.Parent.AvailableChildren[0].IsEqualTo(n))return u=this.RunChoiceFlowTreeTraversalSubprocess(n.Parent,TraversalDirection.Backward),i.NextActivity=u.NextActivity,i;for(r=0;r<n.Parent.AvailableChildren.length;r++)if(n.Parent.AvailableChildren[r].IsEqualTo(n))return i.NextActivity=n.Parent.AvailableChildren[r-1],i}};this.IsActivity1Forward=function(n,t){for(var i=0;i<this.Activities.length;i++)if(this.Activities[i].IsEqualTo(n)||this.Activities[i].IsEqualTo(t))return!1;throw"IsActivity1Forward: Cannot find any of the activities";};this.RunRetrySequencingRequestProcess=function(){var n=new DeliveryRequest,t;return this.CurrentActivity==null?(n.Exception=Exception.SB_2_10_1,n):this.CurrentActivity.IsActive||this.CurrentActivity.IsSuspended?(n.Exception=Exception.SB_2_10_2,n):(this.CurrentActivity.IsLeaf()?n.TargetActivity=this.CurrentActivity:(t=this.RunFlowSubprocess(this.CurrentActivity,TraversalDirection.Forward,!0),t.Deliverable?n.TargetActivity=t.IdentifiedActivity:n.Exception=Exception.SB_2_10_3),n)};this.RunExitSequencingRequestProcess=function(){var n=new DeliveryRequest;return this.CurrentActivity==null?(n.EndSequencingSession=!1,n.Exception=Exception.SB_2_11_1,n):this.CurrentActivity.IsActive?(n.EndSequencingSession=!1,n.Exception=Exception.SB_2_11_2,n):(n.EndSequencingSession=this.IsCurrentActivityARoot()?!0:!1,n)};this.RunSequencingRequestProcess=function(n){var t;switch(n.NavRequest){case NavRequest.Start:t=this.RunStartSequencingRequestProcess();break;case NavRequest.ResumeAll:t=this.RunResumeAllSequencingRequestProcess();break;case NavRequest.Exit:t=this.RunExitSequencingRequestProcess();t.TargetActivity=null;break;case NavRequest.Retry:t=this.RunRetrySequencingRequestProcess();break;case NavRequest.Continue:t=this.RunContinueSequencingRequestProcess();break;case NavRequest.Previous:t=this.RunPreviousSequencingRequestProcess();break;case NavRequest.Choice:t=this.RunChoiceSequencingRequestProcess(n.TargetActivity);break;case NavRequest.Jump:t=this.RunJumpSequencingRequestProcess(n.TargetActivity);break;default:t=new DeliveryRequest;t.Exception=Exception.SB_2_12_1}return t.Exception==Exception.None&&(t.IsValid=!0),t};this.RunJumpSequencingRequestProcess=function(n){var t=new DeliveryRequest;return this.CurrentActivity==null?t.Exception=Exception.SB_2_13_1:t.TargetActivity=n,t};this.RunDeliveryRequestProcess=function(n){var t=new DeliveryRequest,i,r;if(t.TargetActivity=n.TargetActivity,n.TargetActivity.Activities.length>0)return t.Exception=Exception.DB_1_1_1,t;if(i=this.GetPathToRoot(n.TargetActivity),i.length==0)return t.Exception=Exception.DB_1_1_2,t;for(r=0;r<i.length;r++)if(this.RunCheckActivityProcess(i[r]))return t.IsValid=!1,t.Exception=Exception.DB_1_1_3,t;return t.IsValid=!0,t};this.RunContentDeliveryEnvironmentProcessActivityCount=function(){};this.RunContentDeliveryEnvironmentProcess=function(n){var i,t;if(this.CurrentActivity!=null&&this.CurrentActivity.IsActive)return Exception.DB_2_1;for(n.TargetActivity.IsEqualTo(this.SuspendedActivity)||this.RunClearSuspendedActivitySubprocess(n.TargetActivity),this.RunTerminateDescendentAttemptsProcess(n.TargetActivity),i=this.GetPathToRoot(n.TargetActivity),t=0;t<i.length;t++)i[t].IsActive||(i[t].Tracked&&(i[t].IsSuspended?i[t].IsSuspended=!1:(i[t].Progress.ActivityAttemptCount++,i[t].Progress.ActivityAttemptCount==1&&(i[t].Progress.ActivityProgressStatus=!0))),i[t].IsActive=!0);return this.CurrentActivity=n.TargetActivity,this.SuspendedActivity=null,this._AppendSuspendData(this._currentRequestBeingProcessed.ToString()),Course.DeliverContent(n),!n.TargetActivity.Tracked,Exception.None};this.RunClearSuspendedActivitySubprocess=function(n){var r,t,i;if(this.SuspendedActivity!=null){if(r=this.FindCommonAncestor(n,this.SuspendedActivity),t=this.CreateActivityPath(this.SuspendedActivity,r),t.length>0)for(i=0;i<t.length;i++)t[i].ContainsSuspendedActivity()||(t[i].IsSuspended=!1);this.SuspendedActivity=null}};this.RunLimitConditionsCheckProcess=function(n){return n.Tracked?n.IsActive||n.IsSuspended?Result.False:n.Sequencing.LimitConditions.AttemptLimit>0&&n.Progress.ActivityProgressStatus&&n.Progress.ActivityAttemptCount>=n.Sequencing.LimitConditions.AttemptLimit?Result.True:Result.False:Result.False};this.RunSequencingRulesCheckProcess=function(n,t){for(var i=0;i<n.Sequencing.SequencingRules.length;i++)if(n.Sequencing.SequencingRules[i].RuleAction==t&&this.RunSequencingRuleCheckSubprocess(n,n.Sequencing.SequencingRules[i])==Result.True)return t;return null};this.RunSequencingRuleCheckSubprocess=function(n,t){for(var r,i,e,u,f=[],o=t,s=0;s<o.RuleConditionsList.length;s++){r=o.RuleConditionsList[s];i=Result.False;r.ReferencedObjective==null&&(r.ReferencedObjective=n.Sequencing.PrimaryObjective);switch(r.Condition){case Condition.ActivityProgressKnown:n.AttemptProgress.AttemptProgressStatus&&(i=Result.True);break;case Condition.Attempted:n.AttemptProgress.ActivityAttemptCount>0&&(i=Result.True);break;case Condition.Completed:r.ReferencedObjective.IsCompleted()&&(i=Result.True);break;case Condition.ObjectiveMeasureKnown:r.ReferencedObjective.HasMeasureStatus()&&(i=Result.True);break;case Condition.ObjectiveMeasureLessThan:r.ReferencedObjective.HasMeasureStatus()&&(e=r.ReferencedObjective.GetNormalizedMeasure(),i=e<r.MeasureThreshold?Result.True:Result.False);break;case Condition.ObjectiveMeasureGreaterThan:r.ReferencedObjective.HasMeasureStatus()&&(e=r.ReferencedObjective.GetNormalizedMeasure(),i=e>=r.MeasureThreshold?Result.True:Result.False);break;case Condition.ObjectiveStatusKnown:r.ReferencedObjective.IsProgressKnown()&&(i=Result.True);break;case Condition.Always:i=Result.True;break;case Condition.Satisfied:r.ReferencedObjective.IsSatisfied()&&(i=Result.True);break;case Condition.AttemptLimitExceeded:n.Progress.ActivityProgressStatus&&n.Sequencing.LimitConditions.AttemptLimit>0&&n.Progress.ActivityAttemptCount>=n.Sequencing.LimitConditions.AttemptLimit&&(i=Result.True)}if(r.Operator==Operator.Not)switch(i){case Result.Unknown:i=Result.Unknown;break;case Result.True:i=Result.False;break;case Result.False:i=Result.True}f[f.length]=i}if(f.length==0)return Result.Unknown;if(o.ConditionCombination==ConditionCombination.All){for(u=0;u<f.length;u++)if(f[u]!=Result.True)return Result.False;return Result.True}for(u=0;u<f.length;u++)if(f[u]==Result.True)return Result.True;return Result.False};this.RunTerminateDescendentAttemptsProcess=function(n){for(var r=this.FindCommonAncestor(this.CurrentActivity,n),i=this.GetPathToAncestor(this.CurrentActivity,r),t=1;t<i.length-1;t++)this.RunEndAttemptProcess(i[t])};this.RunEndAttemptProcess=function(n){var t;if(n.IsLeaf()){if(n.Tracked&&!n.IsSuspended){var i=n.Sequencing.PrimaryObjective,u=i.Progress.ObjectiveProgressStatus,r=!1;n.ObjectiveSetByContent||u||(r=!0);n.CompletionSetByContent||n.AttemptProgress.AttemptProgressStatus||(n.AttemptProgress.AttemptProgressStatus=!0,n.AttemptProgress.AttemptCompletionStatus=!0,i.SetCompletion(!0),n.AttemptProgress.AttemptCompletionAmountStatus=!0,n.AttemptProgress.AttemptCompletionAmount=1,i.SetProgressMeasure(1),t=new Course.ActivitySuspendData,t.activityId=this.CurrentActivity.Identifier,t.cs="completed",t.SetSessionTime(),r&&(t.ss="passed"),this._AppendSuspendData(t));r&&i.SetSatisfied(!0)}}else n.ContainsSuspendedActivity()&&(n.IsSuspended=!0);n.IsActive=!1;this.RunOverallRollupProcess(n)};this.RunCheckActivityProcess=function(n){var t=this.RunSequencingRulesCheckProcess(n,RuleAction.Disabled);return t!=null?!0:(t=this.RunLimitConditionsCheckProcess(n),t==Result.True)?!0:!1};this._containsValue=function(n,t){for(var i=0;i<n.length;i++)if(n[i]==t)return!0;return!1};this._countValues=function(n,t){for(var r=0,i=0;i<n.length;i++)n[i]==t&&r++;return r}}function ObjectiveProgressInformation(){this.ObjectiveProgressStatus=!1;this.ObjectiveSatisfiedStatus=!1;this.ObjectiveCompletionStatus=!1;this.ObjectiveMeasureStatus=!1;this.ObjectiveNormalizedMeasure=0;this.ObjectiveCompletionAmountStatus=!1;this.ObjectiveCompletionAmount=0;this.RawScore=0;this.MinScore=0;this.MaxScore=0;this.CompletionStatus="unknown";this.SuccessStatus="unknown";this.Clone=function(){var n=new ObjectiveProgressInformation;for(var t in this)n[t]=this[t];return n}}function ActivityProgressInformation(){this.ActivityProgressStatus=!1;this.ActivityAbsoluteDuration=0;this.ActivityExperiencedDuration=0;this.ActivityAttemptCount=0;this.Clone=function(){var n=new ActivityProgressInformation;for(var t in this)n[t]=this[t];return n}}function AttemptProgressInformation(){this.AttemptProgressStatus=!1;this.AttemptCompletionStatus=!1;this.AttemptAbsoluteDuration=0;this.AttemptExperiencedDuration=0;this.AttemptCompletionAmountStatus=!1;this.AttemptCompletionAmount=0;this.Clone=function(){var n=new AttemptProgressInformation;for(var t in this)n[t]=this[t];return n}}function CompletionThreshold(){this.CompletedByMeasure=!1;this.MinProgressMeasure=1;this.ProgressWeight=1}function Activity(n,t){this.Clone=function(i){var r=new Activity(n,t),f,u;for(f in this)r[f]=this[f];for(r.Sequencing=this.Sequencing.Clone(i),r.AttemptProgress=this.AttemptProgress.Clone(),r.Progress=this.Progress.Clone(),r.Activities=[],r.AvailableChildren=[],u=0;u<this.Activities.length;u++)r.Activities[u]=this.Activities[u].Clone(i),r.AvailableChildren[u]=r.Activities[u],r.Activities[u].Parent=r;return r};this.Identifier=n;this.IsVisible=!0;this.Result;this.Activities=[];this.AvailableChildren=[];this.Parent=null;this.Path="";this.Tracked=!0;this.CompletionSetByContent=!1;this.ObjectiveSetByContent=!1;this.Sequencing=new Sequencing;this.Title=t;this.Description="";this.CompletionThreshold=new CompletionThreshold;this.AttemptProgress=new AttemptProgressInformation;this.Progress=new ActivityProgressInformation;this.IsActive=!1;this.IsSuspended=!1;this.Add=function(n){this.Activities[this.Activities.length]=n;this.AvailableChildren[this.AvailableChildren.length]=n;n.Parent=this};this.IsLeaf=function(){return this.Activities.length==0};this.ContainsSuspendedActivity=function(){for(var n=0;n<this.Activities.length;n++)if(this.Activities[n].IsSuspended)return!0;return!1};this.GetObjective=function(n){if(this.Sequencing.PrimaryObjective!=null){if(this.Sequencing.PrimaryObjective.Identifier==n)return this.Sequencing.PrimaryObjective;for(var t=0;t<this.Sequencing.SecondaryObjectives.length;t++)if(this.Sequencing.SecondaryObjectives[t].Identifier==n)return this.Sequencing.SecondaryObjectives[t]}return null};this.IsEqualTo=function(n){return n==null?!1:this.Identifier==n.Identifier};this.IsIdentifierEqualTo=function(n){return n==null?!1:this.Identifier==n};this.AreFlowSequencingRequestsPermitted=function(){return this.Parent.Sequencing.ControlMode.Flow};this.AreChoiceSequencingRequestsPermitted=function(){return this.Parent.Sequencing.ControlMode.Choice};this.IsAvailable=function(){for(var n=0;n<this.Parent.AvailableChildren.length;n++)if(this.Parent.AvailableChildren[n].IsEqualTo(this))return!0;return!1};this.UpdateProgress=function(n){var t,i,r;switch(n.completion_status){case"not attempted":case"incomplete":case"unknown":if(this.AttemptProgress.AttemptProgressStatus&&this.AttemptProgress.AttemptCompletionAmount==1)return;this.AttemptProgress.AttemptProgressStatus=!1;this.AttemptProgress.AttemptCompletionStatus=!1;break;case"completed":this.AttemptProgress.AttemptProgressStatus=!0;this.AttemptProgress.AttemptCompletionStatus=!0;n.progress_measure=1}for(n.progress_measure==null||n.progress_measure<0||n.progress_measure>1?this.AttemptProgress.AttemptCompletionAmountStatus=!1:(this.AttemptProgress.AttemptCompletionAmountStatus=!0,this.AttemptProgress.AttemptCompletionAmount=n.progress_measure),this.Sequencing.PrimaryObjective.UpdateProgress(n),t=0;t<n.objectives.length;t++)i=n.objectives[t],r=this.GetObjective(i.id),r!=null&&r.UpdateProgress(i)}}function TrackingModelObjective(n,t){this.Activity=t;this.Clone=function(i,r){var u=new TrackingModelObjective(n,t),e,f;for(e in this)u[e]=this[e];if(u.Progress=this.Progress.Clone(),u.MapInfos=[],!r&&this.MapInfos.length>0)for(f=0;f<this.MapInfos.length;f++)u.MapInfos[f]=this.MapInfos[f].Clone(i);return u};this.SatisfiedByMeasure=!1;this.Identifier=n;this.MinNormalizedMeasure;this.MapInfos=[];this.Progress=new ObjectiveProgressInformation;this.UpdateProgress=function(n){var t=this.Progress;if(this.Progress.ObjectiveProgressStatus){if(n.completion_status=="unknown")return;if(n.completion_status=="incomplete"&&t.CompletionStatus=="completed")return}switch(n.success_status){case"unknown":t.ObjectiveProgressStatus=!1;break;case"failed":this.SetSatisfied(!1);break;case"passed":this.SetSatisfied(!0)}n.score.max!=null&&n.score.raw!=null&&n.score.min!=null&&(n.score.scaled=(n.score.raw-n.score.min)/(n.score.max-n.score.min));n.score.scaled==null||n.score.scaled<-1||n.score.scaled>1?(t.ObjectiveMeasureStatus=!1,t.ObjectiveNormalizedMeasure=0):this.SetNormalizedMeasure(n.score.scaled);switch(n.completion_status){case"not attempted":case"unknown":case"incomplete":t.ObjectiveProgressStatus=!1;break;case"completed":this.SetCompletion(!0)}n.progress_measure==null||n.progress_measure<0||n.progress_measure>1?t.ObjectiveCompletionAmountStatus=!1:this.SetProgressMeasure(n.progress_measure);this.SetScore("MaxScore",n.score.max);this.SetScore("MinScore",n.score.min);this.SetScore("RawScore",n.score.raw)};this.IsProgressKnown=function(){return this.Progress.ObjectiveProgressStatus};this.HasMeasureStatus=function(){return this.Progress.ObjectiveMeasureStatus};this.IsCompleted=function(){return this.Progress.ObjectiveProgressStatus?this.Progress.ObjectiveCompletionStatus:!1};this.IsSatisfied=function(){return this.Progress.ObjectiveProgressStatus?this.Progress.ObjectiveSatisfiedStatus:!1};this.GetProgressMeasure=function(){return this.Progress.ObjectiveCompletionAmountStatus?this.Progress.ObjectiveCompletionAmount:!1};this.GetNormalizedMeasure=function(){return this.Progress.ObjectiveMeasureStatus?this.Progress.ObjectiveNormalizedMeasure:!1};this._GetMappedObjectives=function(n){for(var t,i=[],r=0;r<this.MapInfos.length;r++)t=this.MapInfos[r],t.TargetObjective!=null&&t[n]&&(i[i.length]=t.TargetObjective);return i};this.SetCompletion=function(n){var f=n?"completed":"incomplete",u,r,i,t;for(this.Progress.ObjectiveProgressStatus=!0,this.Progress.ObjectiveCompletionStatus=n,this.Progress.CompletionStatus=f,u=this._GetMappedObjectives("WriteCompletionStatus"),r=0;r<u.length;r++)for(u[r].Progress.ObjectiveProgressStatus=!0,u[r].Progress.ObjectiveCompletionStatus=n,u[r].Progress.CompletionStatus=f,i=u[r]._GetMappedObjectives("WriteCompletionStatus"),t=0;t<i.length;t++)i[t].Progress.ObjectiveProgressStatus=!0,i[t].Progress.ObjectiveCompletionStatus=n,i[t].Progress.CompletionStatus=f,i[t].Activity!=null&&(i[t].Activity.AttemptProgress.AttemptProgressStatus=!0,i[t].Activity.AttemptProgress.AttemptCompletionStatus=n)};this.SetSatisfied=function(n){var f=n?"passed":"failed",i,t,u,r;for(this.Progress.ObjectiveProgressStatus=!0,this.Progress.ObjectiveSatisfiedStatus=n,this.Progress.SuccessStatus=f,i=this._GetMappedObjectives("WriteSatisfiedStatus"),t=0;t<i.length;t++)for(i[t].Progress.ObjectiveProgressStatus=!0,i[t].Progress.ObjectiveSatisfiedStatus=n,i[t].Progress.SuccessStatus=f,u=i[t]._GetMappedObjectives("WriteSatisfiedStatus"),r=0;r<u.length;r++)u[r].Progress.ObjectiveProgressStatus=!0,u[r].Progress.ObjectiveSatisfiedStatus=n,u[r].Progress.SuccessStatus=f};this.SetNormalizedMeasure=function(n){var i,t,u,r;for(this.Progress.ObjectiveMeasureStatus=!0,this.Progress.ObjectiveNormalizedMeasure=n,i=this._GetMappedObjectives("WriteNormalizedMeasure"),t=0;t<i.length;t++)for(i[t].Progress.ObjectiveMeasureStatus=!0,i[t].Progress.ObjectiveNormalizedMeasure=n,u=i[t]._GetMappedObjectives("WriteNormalizedMeasure"),r=0;r<u.length;r++)u[r].Progress.ObjectiveMeasureStatus=!0,u[r].Progress.ObjectiveNormalizedMeasure=n};this.SetProgressMeasure=function(n){var i,t,u,r;for(this.Progress.ObjectiveCompletionAmountStatus=!0,this.Progress.ObjectiveCompletionAmount=n,i=this._GetMappedObjectives("WriteProgressMeasure"),t=0;t<i.length;t++)for(i[t].Progress.ObjectiveCompletionAmountStatus=!0,i[t].Progress.ObjectiveCompletionAmount=n,u=i[t]._GetMappedObjectives("WriteProgressMeasure"),r=0;r<u.length;r++)u[r].Progress.ObjectiveCompletionAmountStatus=!0,u[r].Progress.ObjectiveCompletionAmount=n};this.SetScore=function(n,t){var r,i,f,u;for(this.Progress[n]=t,r=this._GetMappedObjectives("Write"+n),i=0;i<r.length;i++)for(r[i].Progress[n]=t,f=r[i]._GetMappedObjectives("Write"+n),u=0;u<f.length;u++)f[u].Progress[n]=t}}function Sequencing(){this.ID;this.Reference;this.ControlMode=new ControlMode;this.SequencingRules=[];this.LimitConditions=new LimitConditions;this.RollupRules=new RollupRules;this.PrimaryObjective;this.SecondaryObjectives=[];this.RandomizationControls=new RandomizationControls;this.ConstrainedChoiceConsiderations=new ConstrainedChoiceConsiderations;this.RollupConsiderations=new RollupConsiderations;this.Clone=function(n){var i=new Sequencing,u,r,t;for(u in this)i[u]=this[u];for(i.SecondaryObjectives=[],i.PrimaryObjective=this.PrimaryObjective.Clone(n,!1),r=[],r[0]=i.PrimaryObjective,t=0;t<this.SecondaryObjectives.length;t++)i.SecondaryObjectives[t]=this.SecondaryObjectives[t].Clone(n,!1),r[1+t]=i.SecondaryObjectives[t];for(i.SequencingRules=[],t=0;t<this.SequencingRules.length;t++)i.SequencingRules[t]=this.SequencingRules[t].Clone(r);return i}}function ConditionRule(n){this.RuleAction=RuleAction.Undefined;this.Type=n;this.ConditionCombination=ConditionCombination.All;this.RuleConditionsList=[];this.Clone=function(t){var r=new ConditionRule(n),u,i;for(u in this)r[u]=this[u];for(r.RuleConditionsList=[],i=0;i<this.RuleConditionsList.length;i++)r.RuleConditionsList[i]=this.RuleConditionsList[i].Clone(t);return r}}function RuleCondition(){this.ReferencedObjective;this.MeasureThreshold;this.Operator=Operator.NoOp;this.Condition;this.Clone=function(n){var t=new RuleCondition,r,i;for(r in this)t[r]=this[r];if(t.ReferencedObjective!=null)for(i=0;i<n.length;i++)if(t.ReferencedObjective.Identifier==n[i].Identifier){t.ReferencedObjective=n[i];break}return t}}function MapInfo(){this.TargetObjective;this.ReadSatisfiedStatus=!0;this.ReadNormalizedMeasure=!0;this.WriteSatisfiedStatus=!1;this.WriteNormalizedMeasure=!1;this.ReadRawScore=!0;this.ReadMinScore=!0;this.ReadMaxScore=!0;this.ReadCompletionStatus=!0;this.ReadProgressMeasure=!0;this.WriteRawScore=!1;this.WriteMinScore=!1;this.WriteMaxScore=!1;this.WriteCompletionStatus=!1;this.WriteProgressMeasure=!1;this.Clone=function(n){var t=new MapInfo,i,r;for(i in this)t[i]=this[i];for(r in n)if(t.TargetObjective.Identifier==n[r].Identifier){t.TargetObjective=n[r];break}return t}}function ConstrainedChoiceConsiderations(){this.PreventActivation=!1;this.ConstrainChoice=!1}function ControlMode(){this.Choice=!0;this.ChoiceExit=!0;this.Flow=!1;this.ForwardOnly=!1;this.UseCurrentAttemptObjectiveInfo=!0;this.UseCurrentAttemptProgressInfo=!0}function Map(){this.TargetIdentifier;this.ReadSharedData=!0;this.WriteSharedData=!0}function RandomizationControls(){this.RandomizationTiming=Timing.Never;this.SelectCount;this.ReorderChildren=!1;this.SelectionTiming=Timing.Never}function RollupRules(){this.RollupObjectiveSatisfied=!0;this.RollupProgressCompletion=!0;this.ObjectiveMeasureWeight=1;this.RollupRulesList=[]}function RollupRule(){this.ChildActivitySet=RollupRuleToken.All;this.MinimumCount=0;this.MinimumPercent=0;this.RollupConditions=new RollupConditions;this.RollupAction=RollupAction.Completed}function RollupConditions(){this.Combination=ConditionCombination.All;this.RollupConditionsList=[]}function RollupCondition(){this.Operator=Operator.NoOp;this.Condition=Condition.Always}function RollupConsiderations(){this.RequiredForSatisfied=RollupConsiderationsToken.Always;this.RequiredForNotSatisfied=RollupConsiderationsToken.Always;this.RequiredForCompleted=RollupConsiderationsToken.Always;this.RequiredForIncomplete=RollupConsiderationsToken.Always;this.MeasureSatisfactionIfActive=!0}function LimitConditions(){this.AttemptLimit=0;this.AttemptAbsoluteDurationLimit}function ValidatedRequest(n){this.RequestToValidate=n;this.IsValid=!1;this.TerminationRequest=NavRequest.None;this.SequencingRequest=NavRequest.None;this.TargetActivity;this.Exception=Exception.None;this.GetInvalidRequest=function(n){return this.Exception=n,this.IsValid=!1,this.SequencingRequest=NavRequest.None,this}}function Request(){this.TargetActivity=null;this._targetActivityIdentifier=null;this.NavRequest=NavRequest.None;this.SetTargetActivityIdentifier=function(n){var i,t;for(this._targetActivityIdentifier=n,i=Course._sequencingRuntime.Activities,t=0;t<i.length;t++)if(i[t].IsIdentifierEqualTo(this._targetActivityIdentifier)){this.TargetActivity=i[t];break}};this.ToString=function(){var n="";switch(this.NavRequest){case NavRequest.Start:n="start";break;case NavRequest.Continue:n="continue";break;case NavRequest.Previous:n="previous";break;case NavRequest.Exit:n="exit";break;case NavRequest.ExitAll:n="exitAll";break;case NavRequest.Abandon:n="abandon";break;case NavRequest.AbandonAll:n="abandonAll";break;case NavRequest.SuspendAll:n="suspendAll";break;case NavRequest.None:n="_none_";break;case NavRequest.Jump:n="{target="+this._targetActivityIdentifier+"}jump";break;case NavRequest.Choice:n="{target="+this._targetActivityIdentifier+"}choice"}return n};this.CreateFromString=function(n){switch(n){case"start":this.NavRequest=NavRequest.Start;break;case"continue":this.NavRequest=NavRequest.Continue;break;case"previous":this.NavRequest=NavRequest.Previous;break;case"exit":this.NavRequest=NavRequest.Exit;break;case"exitAll":this.NavRequest=NavRequest.ExitAll;break;case"abandon":this.NavRequest=NavRequest.Abandon;break;case"abandonAll":this.NavRequest=NavRequest.AbandonAll;break;case"suspendAll":this.NavRequest=NavRequest.SuspendAll;break;case"_none_":return;default:new RegExp("^{target=.+}jump$").test(n)?(this.NavRequest=NavRequest.Jump,this.SetTargetActivityIdentifier(n.replace(/^{target=/gi,"").replace(/}jump$/gi,""))):new RegExp("^{target=.+}choice$").test(n)?(this.NavRequest=NavRequest.Choice,this.SetTargetActivityIdentifier(n.replace(/^{target=/gi,"").replace(/}choice$/gi,""))):alert("adl_nav_request "+n+" is invalid")}return this}}function DeliveryRequest(){this.IsValid=!1;this.TargetActivity=null;this.Exception=Exception.None;this.EndSequencingSession=!1}function FlowSubprocessResult(){this.IdentifiedActivity=null;this.EndSequencingSession=!1;this.Exception=Exception.None;this.Deliverable=!0}function FlowTreeTraversalSubprocessResult(){this.NextActivity=null;this.EndSequencingSession=!1;this.Exception=Exception.None;this.TraversalDirection=TraversalDirection.None}function FlowTraversalSubprocessResult(){this.NextActivity=null;this.EndSequencingSession=!1;this.Exception=Exception.None;this.Deliverable=!0}function Assima$Controls$Splitter(n){Assima$Controls$Splitter.initializeBase(this,[n]);this._touchStartHandler=Function.createDelegate(this,this._onTouchStart);this._touchMoveHandler=Function.createDelegate(this,this._onTouchMove);this._touchEndHandler=Function.createDelegate(this,this._onTouchEnd);this._dragStartHandler=Function.createDelegate(this,this._onDragStart);this._selectStartHandler=Function.createDelegate(this,this._onSelectStart)}function SendScoresToLms(){var s,f,n,e,r,u,o,t,i;if(Course._sendScoresToLms){if(Course._sendScoresToLms=!1,s=getAPI(),s!=null){for(f=!1,n=Course._sequencingRuntime.Root.Sequencing.PrimaryObjective.Progress,n.ObjectiveProgressStatus?(n.CompletionStatus=="unknown"?doLMSSetValue("cmi.completion_status","incomplete"):(doLMSSetValue("cmi.completion_status",n.CompletionStatus),f=n.CompletionStatus=="completed"),doLMSSetValue("cmi.success_status",n.SuccessStatus)):(doLMSSetValue("cmi.completion_status","incomplete"),doLMSSetValue("cmi.success_status","unknown")),n.ObjectiveMeasureStatus&&(doLMSSetValue("cmi.score.scaled",n.ObjectiveNormalizedMeasure),n.RawScore==""?(doLMSSetValue("cmi.score.min",0),doLMSSetValue("cmi.score.max",100),doLMSSetValue("cmi.score.raw",n.ObjectiveNormalizedMeasure*100)):(doLMSSetValue("cmi.score.min",n.MinScore),doLMSSetValue("cmi.score.max",n.MaxScore),doLMSSetValue("cmi.score.raw",n.RawScore))),n.ObjectiveCompletionAmountStatus&&doLMSSetValue("cmi.progress_measure",n.ObjectiveCompletionAmount),e={},t=doLMSGetValue("cmi.objectives._count"),r=0;r<t;r++)e[doLMSGetValue("cmi.objectives."+r+".id")]=r;for(r=1;r<Course._sequencingRuntime.Activities.length;r++)u=Course._sequencingRuntime.Activities[r],u.IsVisible&&(o=u.Identifier+"_completed",t=e[o],t==null&&(t=doLMSGetValue("cmi.objectives._count"),doLMSSetValue("cmi.objectives."+t+".id",o),doLMSSetValue("cmi.objectives."+t+".description",u.Title)),i=u.Sequencing.PrimaryObjective.Progress,doLMSSetValue("cmi.objectives."+t+".success_status",i.SuccessStatus),doLMSSetValue("cmi.objectives."+t+".completion_status",i.CompletionStatus),i.ObjectiveCompletionAmountStatus&&doLMSSetValue("cmi.objectives."+t+".progress_measure",i.ObjectiveCompletionAmount),i.ObjectiveMeasureStatus&&(doLMSSetValue("cmi.objectives."+t+".score.scaled",i.ObjectiveNormalizedMeasure),i.MinScore!=null&&doLMSSetValue("cmi.objectives."+t+".score.min",i.MinScore),i.MaxScore!=null&&doLMSSetValue("cmi.objectives."+t+".score.max",i.MaxScore),i.RawScore!=null&&doLMSSetValue("cmi.objectives."+t+".score.raw",i.RawScore)));doLMSSetValue(ScormVariable.Duration,Course._sequencingRuntime.GetCourseSessionTime());Course._setInteractions();doLMSSetValue(ScormVariable.SuspendData,f?"":Course._sequencingRuntime.GetSuspendData());doLMSSetValue(ScormVariable.Exit,f?"normal":"suspend");doLMSFinish()}Course._setView(Course.Views.Finished)}}var $create,$get,$find,__cultureInfo,MAX_PARENTS_TO_SEARCH,NavRequest,TraversalDirection,Result,Exception,Assima$Controls$SplitterEventArgs,Course,ScormVariable,SessionTimeHelper;Function.__typeName="Function";Function.__class=!0;Function.createCallback=function(n,t){return function(){var u=arguments.length,r,i;if(u>0){for(r=[],i=0;i<u;i++)r[i]=arguments[i];return r[u]=t,n.apply(this,r)}return n.call(this,t)}};Function.createDelegate=function(n,t){return function(){return t.apply(n,arguments)}};Function.emptyFunction=Function.emptyMethod=function(){};Function._validateParams=function(n,t){var i,r,u,f;if(i=Function._validateParameterCount(n,t),i)return i.popStackFrame(),i;for(r=0;r<n.length;r++)if(u=t[Math.min(r,t.length-1)],f=u.name,u.parameterArray&&(f+="["+(r-t.length+1)+"]"),i=Function._validateParameter(n[r],u,f),i)return i.popStackFrame(),i;return null};Function._validateParameterCount=function(n,t){for(var r,u=t.length,f=0,i=0;i<t.length;i++)t[i].parameterArray?u=Number.MAX_VALUE:t[i].optional||f++;return n.length<f||n.length>u?(r=Error.parameterCount(),r.popStackFrame(),r):null};Function._validateParameter=function(n,t,i){var r,o=t.type,l=!!t.integer,a=!!t.domElement,v=!!t.mayBeNull,f,e,s,h,u,c;if(r=Function._validateParameterType(n,o,l,a,v,i),r)return r.popStackFrame(),r;if(f=t.elementType,e=!!t.elementMayBeNull,o===Array&&typeof n!="undefined"&&n!==null&&(f||!e))for(s=!!t.elementInteger,h=!!t.elementDomElement,u=0;u<n.length;u++)if(c=n[u],r=Function._validateParameterType(c,f,s,h,e,i+"["+u+"]"),r)return r.popStackFrame(),r;return null};Function._validateParameterType=function(n,t,i,r,u,f){var e,o,v,c,s,l,h,a;if(typeof n=="undefined")return u?null:(e=Error.argumentUndefined(f),e.popStackFrame(),e);if(n===null)return u?null:(e=Error.argumentNull(f),e.popStackFrame(),e);if(t&&t.__enum){if(typeof n!="number")return e=Error.argumentType(f,Object.getType(n),t),e.popStackFrame(),e;if(n%1==0)if(o=t.prototype,t.__flags&&n!==0){v=n;for(c in o)if((s=o[c],s!==0)&&((s&n)===s&&(v-=s),v===0))return null}else for(c in o)if(o[c]===n)return null;return e=Error.argumentOutOfRange(f,n,String.format(Sys.Res.enumInvalidValue,n,t.getName())),e.popStackFrame(),e}return r&&(typeof n.nodeType!="number"?(h=n.ownerDocument||n.document||n,h!=n?(a=h.defaultView||h.parentWindow,l=a!=n&&!(a.document&&n.document&&a.document===n.document)):l=typeof h.body=="undefined"):l=n.nodeType===3,l)?(e=Error.argument(f,Sys.Res.argumentDomElement),e.popStackFrame(),e):t&&!t.isInstanceOfType(n)?(e=Error.argumentType(f,Object.getType(n),t),e.popStackFrame(),e):t===Number&&i&&n%1!=0?(e=Error.argumentOutOfRange(f,n,Sys.Res.argumentInteger),e.popStackFrame(),e):null};Error.__typeName="Error";Error.__class=!0;Error.create=function(n,t){var i=new Error(n),r;if(i.message=n,t)for(r in t)i[r]=t[r];return i.popStackFrame(),i};Error.argument=function(n,t){var r="Sys.ArgumentException: "+(t?t:Sys.Res.argument),i;return n&&(r+="\n"+String.format(Sys.Res.paramName,n)),i=Error.create(r,{name:"Sys.ArgumentException",paramName:n}),i.popStackFrame(),i};Error.argumentNull=function(n,t){var r="Sys.ArgumentNullException: "+(t?t:Sys.Res.argumentNull),i;return n&&(r+="\n"+String.format(Sys.Res.paramName,n)),i=Error.create(r,{name:"Sys.ArgumentNullException",paramName:n}),i.popStackFrame(),i};Error.argumentOutOfRange=function(n,t,i){var r="Sys.ArgumentOutOfRangeException: "+(i?i:Sys.Res.argumentOutOfRange),u;return n&&(r+="\n"+String.format(Sys.Res.paramName,n)),typeof t!="undefined"&&t!==null&&(r+="\n"+String.format(Sys.Res.actualValue,t)),u=Error.create(r,{name:"Sys.ArgumentOutOfRangeException",paramName:n,actualValue:t}),u.popStackFrame(),u};Error.argumentType=function(n,t,i,r){var u="Sys.ArgumentTypeException: ",f;return u+=r?r:t&&i?String.format(Sys.Res.argumentTypeWithTypes,t.getName(),i.getName()):Sys.Res.argumentType,n&&(u+="\n"+String.format(Sys.Res.paramName,n)),f=Error.create(u,{name:"Sys.ArgumentTypeException",paramName:n,actualType:t,expectedType:i}),f.popStackFrame(),f};Error.argumentUndefined=function(n,t){var r="Sys.ArgumentUndefinedException: "+(t?t:Sys.Res.argumentUndefined),i;return n&&(r+="\n"+String.format(Sys.Res.paramName,n)),i=Error.create(r,{name:"Sys.ArgumentUndefinedException",paramName:n}),i.popStackFrame(),i};Error.format=function(n){var i="Sys.FormatException: "+(n?n:Sys.Res.format),t=Error.create(i,{name:"Sys.FormatException"});return t.popStackFrame(),t};Error.invalidOperation=function(n){var i="Sys.InvalidOperationException: "+(n?n:Sys.Res.invalidOperation),t=Error.create(i,{name:"Sys.InvalidOperationException"});return t.popStackFrame(),t};Error.notImplemented=function(n){var i="Sys.NotImplementedException: "+(n?n:Sys.Res.notImplemented),t=Error.create(i,{name:"Sys.NotImplementedException"});return t.popStackFrame(),t};Error.parameterCount=function(n){var i="Sys.ParameterCountException: "+(n?n:Sys.Res.parameterCount),t=Error.create(i,{name:"Sys.ParameterCountException"});return t.popStackFrame(),t};Error.prototype.popStackFrame=function(){var r,t;if(typeof this.stack!="undefined"&&this.stack!==null&&typeof this.fileName!="undefined"&&this.fileName!==null&&typeof this.lineNumber!="undefined"&&this.lineNumber!==null){for(var n=this.stack.split("\n"),i=n[0],u=this.fileName+":"+this.lineNumber;typeof i!="undefined"&&i!==null&&i.indexOf(u)===-1;)n.shift(),i=n[0];(r=n[1],typeof r!="undefined"&&r!==null)&&(t=r.match(/@(.*):(\d+)$/),typeof t!="undefined"&&t!==null)&&(this.fileName=t[1],this.lineNumber=parseInt(t[2]),n.shift(),this.stack=n.join("\n"))}};Object.__typeName="Object";Object.__class=!0;Object.getType=function(n){var t=n.constructor;return!t||typeof t!="function"||!t.__typeName||t.__typeName==="Object"?Object:t};Object.getTypeName=function(n){return Object.getType(n).getName()};String.__typeName="String";String.__class=!0;String.prototype.endsWith=function(n){return this.substr(this.length-n.length)===n};String.prototype.startsWith=function(n){return this.substr(0,n.length)===n};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.trimEnd=function(){return this.replace(/\s+$/,"")};String.prototype.trimStart=function(){return this.replace(/^\s+/,"")};String.format=function(){return String._toFormattedString(!1,arguments)};String.localeFormat=function(){return String._toFormattedString(!0,arguments)};String._toFormattedString=function(n,t){for(var o,u,e="",f=t[0],i=0;;){if(o=f.indexOf("{",i),u=f.indexOf("}",i),o<0&&u<0){e+=f.slice(i);break}if(u>0&&(u<o||o<0)){e+=f.slice(i,u+1);i=u+2;continue}if(e+=f.slice(i,o),i=o+1,f.charAt(i)==="{"){e+="{";i++;continue}if(u<0)break;var s=f.substring(i,u),h=s.indexOf(":"),l=parseInt(h<0?s:s.substring(0,h),10)+1,c=h<0?"":s.substring(h+1),r=t[l];(typeof r=="undefined"||r===null)&&(r="");e+=r.toFormattedString?r.toFormattedString(c):n&&r.localeFormat?r.localeFormat(c):r.format?r.format(c):r.toString();i=u+1}return e};Boolean.__typeName="Boolean";Boolean.__class=!0;Boolean.parse=function(n){var t=n.trim().toLowerCase();return t==="false"?!1:t==="true"?!0:void 0};Date.__typeName="Date";Date.__class=!0;Date._appendPreOrPostMatch=function(n,t){for(var u,f=0,i=!1,r=0,e=n.length;r<e;r++){u=n.charAt(r);switch(u){case"'":i?t.append("'"):f++;i=!1;break;case"\\":i&&t.append("\\");i=!i;break;default:t.append(u);i=!1}}return f};Date._expandFormat=function(n,t){if(t||(t="F"),t.length===1)switch(t){case"d":return n.ShortDatePattern;case"D":return n.LongDatePattern;case"t":return n.ShortTimePattern;case"T":return n.LongTimePattern;case"F":return n.FullDateTimePattern;case"M":case"m":return n.MonthDayPattern;case"s":return n.SortableDateTimePattern;case"Y":case"y":return n.YearMonthPattern;default:throw Error.format(Sys.Res.formatInvalidString);}return t};Date._expandYear=function(n,t){if(t<100){var i=(new Date).getFullYear();if(t+=i-i%100,t>n.Calendar.TwoDigitYearMax)return t-100}return t};Date._getParseRegExp=function(n,t){var r,c,l,e;if(n._parseRegExp){if(n._parseRegExp[t])return n._parseRegExp[t]}else n._parseRegExp={};r=Date._expandFormat(n,t);r=r.replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");for(var i=new Sys.StringBuilder("^"),o=[],f=0,s=0,h=Date._getTokenRegExp(),u;(u=h.exec(r))!==null;){if(c=r.slice(f,u.index),f=h.lastIndex,s+=Date._appendPreOrPostMatch(c,i),s%2==1){i.append(u[0]);continue}switch(u[0]){case"dddd":case"ddd":case"MMMM":case"MMM":i.append("(\\D+)");break;case"tt":case"t":i.append("(\\D*)");break;case"yyyy":i.append("(\\d{4})");break;case"fff":i.append("(\\d{3})");break;case"ff":i.append("(\\d{2})");break;case"f":i.append("(\\d)");break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":i.append("(\\d\\d?)");break;case"zzz":i.append("([+-]?\\d\\d?:\\d{2})");break;case"zz":case"z":i.append("([+-]?\\d\\d?)")}Array.add(o,u[0])}return Date._appendPreOrPostMatch(r.slice(f),i),i.append("$"),l=i.toString().replace(/\s+/g,"\\s+"),e={regExp:l,groups:o},n._parseRegExp[t]=e,e};Date._getTokenRegExp=function(){return/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z/g};Date.parseLocale=function(n){return Date._parse(n,Sys.CultureInfo.CurrentCulture,arguments)};Date.parseInvariant=function(n){return Date._parse(n,Sys.CultureInfo.InvariantCulture,arguments)};Date._parse=function(n,t,i){for(var e,o,u,s=!1,r=1,f=i.length;r<f;r++)if(e=i[r],e&&(s=!0,u=Date._parseExact(n,e,t),u))return u;if(!s)for(o=t._getDateTimeFormats(),r=0,f=o.length;r<f;r++)if(u=Date._parseExact(n,o[r],t),u)return u;return null};Date._parseExact=function(n,t,i){var a,ut,r,f,g,k,v,c,u,nt;n=n.trim();var y=i.dateTimeFormat,tt=Date._getParseRegExp(y,t),it=new RegExp(tt.regExp).exec(n);if(it===null)return null;var rt=tt.groups,s=null,f=null,l=null,h=null,e=0,p=0,w=0,o=0,b=null,d=!1;for(a=0,ut=rt.length;a<ut;a++)if(r=it[a+1],r)switch(rt[a]){case"dd":case"d":if(l=parseInt(r,10),l<1||l>31)return null;break;case"MMMM":if(f=i._getMonthIndex(r),f<0||f>11)return null;break;case"MMM":if(f=i._getAbbrMonthIndex(r),f<0||f>11)return null;break;case"M":case"MM":if(f=parseInt(r,10)-1,f<0||f>11)return null;break;case"y":case"yy":if(s=Date._expandYear(y,parseInt(r,10)),s<0||s>9999)return null;break;case"yyyy":if(s=parseInt(r,10),s<0||s>9999)return null;break;case"h":case"hh":if(e=parseInt(r,10),e===12&&(e=0),e<0||e>11)return null;break;case"H":case"HH":if(e=parseInt(r,10),e<0||e>23)return null;break;case"m":case"mm":if(p=parseInt(r,10),p<0||p>59)return null;break;case"s":case"ss":if(w=parseInt(r,10),w<0||w>59)return null;break;case"tt":case"t":if(g=r.toUpperCase(),d=g===y.PMDesignator.toUpperCase(),!d&&g!==y.AMDesignator.toUpperCase())return null;break;case"f":if(o=parseInt(r,10)*100,o<0||o>999)return null;break;case"ff":if(o=parseInt(r,10)*10,o<0||o>999)return null;break;case"fff":if(o=parseInt(r,10),o<0||o>999)return null;break;case"dddd":if(h=i._getDayIndex(r),h<0||h>6)return null;break;case"ddd":if(h=i._getAbbrDayIndex(r),h<0||h>6)return null;break;case"zzz":if((k=r.split(/:/),k.length!==2)||(c=parseInt(k[0],10),c<-12||c>13)||(v=parseInt(k[1],10),v<0||v>59))return null;b=c*60+(r.startsWith("-")?-v:v);break;case"z":case"zz":if(c=parseInt(r,10),c<-12||c>13)return null;b=c*60}return(u=new Date,s===null&&(s=u.getFullYear()),f===null&&(f=u.getMonth()),l===null&&(l=u.getDate()),u.setFullYear(s,f,l),u.getDate()!==l)?null:h!==null&&u.getDay()!==h?null:(d&&e<12&&(e+=12),u.setHours(e,p,w,o),b!==null&&(nt=u.getMinutes()-(b+u.getTimezoneOffset()),u.setHours(u.getHours()+parseInt(nt/60,10),nt%60)),u)};Date.prototype.format=function(n){return this._toFormattedString(n,Sys.CultureInfo.InvariantCulture)};Date.prototype.localeFormat=function(n){return this._toFormattedString(n,Sys.CultureInfo.CurrentCulture)};Date.prototype._toFormattedString=function(n,t){function f(n){return n<10?"0"+n:n.toString()}function o(n){return n<10?"00"+n:n<100?"0"+n:n.toString()}var u,i,r,s,h;if(!n||n.length===0||n==="i")return t&&t.name.length>0?this.toLocaleString():this.toString();for(u=t.dateTimeFormat,n=Date._expandFormat(u,n),i=new Sys.StringBuilder,s=0,h=Date._getTokenRegExp();;){var c=h.lastIndex,e=h.exec(n),l=n.slice(c,e?e.index:n.length);if(s+=Date._appendPreOrPostMatch(l,i),!e)break;if(s%2==1){i.append(e[0]);continue}switch(e[0]){case"dddd":i.append(u.DayNames[this.getDay()]);break;case"ddd":i.append(u.AbbreviatedDayNames[this.getDay()]);break;case"dd":i.append(f(this.getDate()));break;case"d":i.append(this.getDate());break;case"MMMM":i.append(u.MonthNames[this.getMonth()]);break;case"MMM":i.append(u.AbbreviatedMonthNames[this.getMonth()]);break;case"MM":i.append(f(this.getMonth()+1));break;case"M":i.append(this.getMonth()+1);break;case"yyyy":i.append(this.getFullYear());break;case"yy":i.append(f(this.getFullYear()%100));break;case"y":i.append(this.getFullYear()%100);break;case"hh":r=this.getHours()%12;r===0&&(r=12);i.append(f(r));break;case"h":r=this.getHours()%12;r===0&&(r=12);i.append(r);break;case"HH":i.append(f(this.getHours()));break;case"H":i.append(this.getHours());break;case"mm":i.append(f(this.getMinutes()));break;case"m":i.append(this.getMinutes());break;case"ss":i.append(f(this.getSeconds()));break;case"s":i.append(this.getSeconds());break;case"tt":i.append(this.getHours()<12?u.AMDesignator:u.PMDesignator);break;case"t":i.append((this.getHours()<12?u.AMDesignator:u.PMDesignator).charAt(0));break;case"f":i.append(o(this.getMilliseconds()).charAt(0));break;case"ff":i.append(o(this.getMilliseconds()).substr(0,2));break;case"fff":i.append(o(this.getMilliseconds()));break;case"z":r=this.getTimezoneOffset()/60;i.append((r<=0?"+":"-")+Math.floor(Math.abs(r)));break;case"zz":r=this.getTimezoneOffset()/60;i.append((r<=0?"+":"-")+f(Math.floor(Math.abs(r))));break;case"zzz":r=this.getTimezoneOffset()/60;i.append((r<=0?"+":"-")+f(Math.floor(Math.abs(r)))+u.TimeSeparator+f(Math.abs(this.getTimezoneOffset()%60)))}}return i.toString()};Number.__typeName="Number";Number.__class=!0;Number.parseLocale=function(n){return Number._parse(n,Sys.CultureInfo.CurrentCulture)};Number.parseInvariant=function(n){return Number._parse(n,Sys.CultureInfo.InvariantCulture)};Number._parse=function(n,t){var l,u,f,s,a,v,h,c;if(n=n.trim(),n.match(/^[+-]?infinity$/i))return parseFloat(n);if(n.match(/^0x[a-f0-9]+$/i))return parseInt(n);var i=t.numberFormat,e=Number._parseNumberNegativePattern(n,i,i.NumberNegativePattern),o=e[0],r=e[1];return(o===""&&i.NumberNegativePattern!==1&&(e=Number._parseNumberNegativePattern(n,i,1),o=e[0],r=e[1]),o===""&&(o="+"),f=r.indexOf("e"),f<0&&(f=r.indexOf("E")),f<0?(u=r,l=null):(u=r.substr(0,f),l=r.substr(f+1)),v=u.indexOf(i.NumberDecimalSeparator),v<0?(s=u,a=null):(s=u.substr(0,v),a=u.substr(v+i.NumberDecimalSeparator.length)),s=s.split(i.NumberGroupSeparator).join(""),h=o+s,a!==null&&(h+="."+a),l!==null&&(c=Number._parseNumberNegativePattern(l,i,1),c[0]===""&&(c[0]="+"),h+="e"+c[0]+c[1]),h.match(/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/))?parseFloat(h):Number.NaN};Number._parseNumberNegativePattern=function(n,t,i){var r=t.NegativeSign,u=t.PositiveSign;switch(i){case 4:r=" "+r;u=" "+u;case 3:if(n.endsWith(r))return["-",n.substr(0,n.length-r.length)];if(n.endsWith(u))return["+",n.substr(0,n.length-u.length)];break;case 2:r+=" ";u+=" ";case 1:if(n.startsWith(r))return["-",n.substr(r.length)];if(n.startsWith(u))return["+",n.substr(u.length)];break;case 0:if(n.startsWith("(")&&n.endsWith(")"))return["-",n.substr(1,n.length-2)]}return["",n]};Number.prototype.format=function(n){return this._toFormattedString(n,Sys.CultureInfo.InvariantCulture)};Number.prototype.localeFormat=function(n){return this._toFormattedString(n,Sys.CultureInfo.CurrentCulture)};Number.prototype._toFormattedString=function(n,t){function h(n,t,i,r,u){var h=i[0],a=1,o=n.toString(),f="",p="",v=o.split("."),c,l,y,e,s;if(v.length>1&&(o=v[0],f=v[1],c=f.split(/e/i),c.length>1&&(f=c[0],p="e"+c[1])),t>0){if(l=f.length-t,l>0)f=f.slice(0,t);else if(l<0)for(y=0;y<Math.abs(l);y++)f+="0";f=u+f}else f="";for(f+=p,e=o.length-1,s="";e>=0;){if(h===0||h>e)return s.length>0?o.slice(0,e+1)+r+s+f:o.slice(0,e+1)+f;s=s.length>0?o.slice(e-h+1,e+1)+r+s:o.slice(e-h+1,e+1);e-=h;a<i.length&&(h=i[a],a++)}return o.slice(0,e+1)+r+s+f}var i,u,r,f,o,c,l,a,e,v,s;if(!n||n.length===0||n==="i")return t&&t.name.length>0?this.toLocaleString():this.toString();i=t.numberFormat;u=Math.abs(this);n||(n="D");r=-1;n.length>1&&(r=parseInt(n.slice(1),10));switch(n.charAt(0)){case"d":case"D":if(f="n",r!==-1){if(o=""+u,c=r-o.length,c>0)for(l=0;l<c;l++)o="0"+o;u=o}this<0&&(u=-u);break;case"c":case"C":f=this<0?["($n)","-$n","$-n","$n-","(n$)","-n$","n-$","n$-","-n $","-$ n","n $-","$ n-","$ -n","n- $","($ n)","(n $)"][i.CurrencyNegativePattern]:["$n","n$","$ n","n $"][i.CurrencyPositivePattern];r===-1&&(r=i.CurrencyDecimalDigits);u=h(Math.abs(this),r,i.CurrencyGroupSizes,i.CurrencyGroupSeparator,i.CurrencyDecimalSeparator);break;case"n":case"N":f=this<0?["(n)","-n","- n","n-","n -"][i.NumberNegativePattern]:"n";r===-1&&(r=i.NumberDecimalDigits);u=h(Math.abs(this),r,i.NumberGroupSizes,i.NumberGroupSeparator,i.NumberDecimalSeparator);break;case"p":case"P":f=this<0?["-n %","-n%","-%n"][i.PercentNegativePattern]:["n %","n%","%n"][i.PercentPositivePattern];r===-1&&(r=i.PercentDecimalDigits);u=h(Math.abs(this),r,i.PercentGroupSizes,i.PercentGroupSeparator,i.PercentDecimalSeparator);break;default:throw Error.format(Sys.Res.formatBadFormatSpecifier);}for(a=/n|\$|-|%/g,e="";;){if(v=a.lastIndex,s=a.exec(f),e+=f.slice(v,s?s.index:f.length),!s)break;switch(s[0]){case"n":e+=u;break;case"$":e+=i.CurrencySymbol;break;case"-":e+=i.NegativeSign;break;case"%":e+=i.PercentSymbol}}return e};RegExp.__typeName="RegExp";RegExp.__class=!0;Array.__typeName="Array";Array.__class=!0;Array.add=Array.enqueue=function(n,t){n[n.length]=t};Array.addRange=function(n,t){n.push.apply(n,t)};Array.clear=function(n){n.length=0};Array.clone=function(n){return n.length===1?[n[0]]:Array.apply(null,n)};Array.contains=function(n,t){return Array.indexOf(n,t)>=0};Array.dequeue=function(n){return n.shift()};Array.forEach=function(n,t,i){for(var u,r=0,f=n.length;r<f;r++)u=n[r],typeof u!="undefined"&&t.call(i,u,r,n)};Array.indexOf=function(n,t,i){var u,r;if(typeof t=="undefined")return-1;if(u=n.length,u!==0)for(i=+i,isNaN(i)?i=0:(isFinite(i)&&(i=i-i%1),i<0&&(i=Math.max(0,u+i))),r=i;r<u;r++)if(typeof n[r]!="undefined"&&n[r]===t)return r;return-1};Array.insert=function(n,t,i){n.splice(t,0,i)};Array.parse=function(n){return n?eval(n):[]};Array.remove=function(n,t){var i=Array.indexOf(n,t);return i>=0&&n.splice(i,1),i>=0};Array.removeAt=function(n,t){n.splice(t,1)};window||(this.window=this);window.Type=Function;Type.prototype.callBaseMethod=function(n,t,i){var r=this.getBaseMethod(n,t);return i?r.apply(n,i):r.apply(n)};Type.prototype.getBaseMethod=function(n,t){var r=this.getBaseType(),i;return r?(i=r.prototype[t],i instanceof Function?i:null):null};Type.prototype.getBaseType=function(){return typeof this.__baseType=="undefined"?null:this.__baseType};Type.prototype.getInterfaces=function(){for(var n=[],t=this,i,r,f,u;t;){if(i=t.__interfaces,i)for(r=0,f=i.length;r<f;r++)u=i[r],Array.contains(n,u)||(n[n.length]=u);t=t.__baseType}return n};Type.prototype.getName=function(){return typeof this.__typeName=="undefined"?"":this.__typeName};Type.prototype.implementsInterface=function(n){var r,t,u,i,f;if(this.resolveInheritance(),r=n.getName(),t=this.__interfaceCache,t){if(u=t[r],typeof u!="undefined")return u}else t=this.__interfaceCache={};for(i=this;i;){if(f=i.__interfaces,f&&Array.indexOf(f,n)!==-1)return t[r]=!0;i=i.__baseType}return t[r]=!1};Type.prototype.inheritsFrom=function(n){this.resolveInheritance();for(var t=this.__baseType;t;){if(t===n)return!0;t=t.__baseType}return!1};Type.prototype.initializeBase=function(n,t){return this.resolveInheritance(),this.__baseType&&(t?this.__baseType.apply(n,t):this.__baseType.apply(n)),n};Type.prototype.isImplementedBy=function(n){if(typeof n=="undefined"||n===null)return!1;var t=Object.getType(n);return!!(t.implementsInterface&&t.implementsInterface(this))};Type.prototype.isInstanceOfType=function(n){if(typeof n=="undefined"||n===null)return!1;if(n instanceof this)return!0;var t=Object.getType(n);return!!(t===this)||t.inheritsFrom&&t.inheritsFrom(this)||t.implementsInterface&&t.implementsInterface(this)};Type.prototype.registerClass=function(n,t,i){var r,u,f;if(this.prototype.constructor=this,this.__typeName=n,this.__class=!0,t&&(this.__baseType=t,this.__basePrototypePending=!0),Sys.__upperCaseTypes[n.toUpperCase()]=this,i)for(this.__interfaces=[],r=2,u=arguments.length;r<u;r++)f=arguments[r],this.__interfaces.push(f);return this};Type.prototype.registerInterface=function(n){return Sys.__upperCaseTypes[n.toUpperCase()]=this,this.prototype.constructor=this,this.__typeName=n,this.__interface=!0,this};Type.prototype.resolveInheritance=function(){var n,t,i;if(this.__basePrototypePending){n=this.__baseType;n.resolveInheritance();for(t in n.prototype)i=n.prototype[t],this.prototype[t]||(this.prototype[t]=i);delete this.__basePrototypePending}};Type.getRootNamespaces=function(){return Array.clone(Sys.__rootNamespaces)};Type.isClass=function(n){return typeof n=="undefined"||n===null?!1:!!n.__class};Type.isInterface=function(n){return typeof n=="undefined"||n===null?!1:!!n.__interface};Type.isNamespace=function(n){return typeof n=="undefined"||n===null?!1:!!n.__namespace};Type.parse=function(n,t){var i;return t?(i=Sys.__upperCaseTypes[t.getName().toUpperCase()+"."+n.toUpperCase()],i||null):n?(Type.__htClasses||(Type.__htClasses={}),i=Type.__htClasses[n],i||(i=eval(n),Type.__htClasses[n]=i),i):null};Type.registerNamespace=function(n){for(var f,t,r=window,u=n.split("."),i=0;i<u.length;i++)f=u[i],t=r[f],t||(t=r[f]={__namespace:!0,__typeName:u.slice(0,i+1).join(".")},i===0&&(Sys.__rootNamespaces[Sys.__rootNamespaces.length]=t),t.getName=function(){return this.__typeName}),r=t};window.Sys={__namespace:!0,__typeName:"Sys",getName:function(){return"Sys"},__upperCaseTypes:{}};Sys.__rootNamespaces=[Sys];Sys.IDisposable=function(){};Sys.IDisposable.prototype={};Sys.IDisposable.registerInterface("Sys.IDisposable");Sys.StringBuilder=function(n){this._parts=typeof n!="undefined"&&n!==null&&n!==""?[n.toString()]:[];this._value={};this._len=0};Sys.StringBuilder.prototype={append:function(n){this._parts[this._parts.length]=n},appendLine:function(n){this._parts[this._parts.length]=typeof n=="undefined"||n===null||n===""?"\r\n":n+"\r\n"},clear:function(){this._parts=[];this._value={};this._len=0},isEmpty:function(){return this._parts.length===0?!0:this.toString()===""},toString:function(n){var t,r,i;if(n=n||"",t=this._parts,this._len!==t.length&&(this._value={},this._len=t.length),r=this._value,typeof r[n]=="undefined"){if(n!=="")for(i=0;i<t.length;)typeof t[i]=="undefined"||t[i]===""||t[i]===null?t.splice(i,1):i++;r[n]=this._parts.join(n)}return r[n]}};Sys.StringBuilder.registerClass("Sys.StringBuilder");window.XMLHttpRequest||(window.XMLHttpRequest=function(){for(var t=["Mxsml2.XMLHTTP.3.0","Msxml2.XMLHTTP"],n=0,i=t.length;n<i;n++)try{return new ActiveXObject(t[n])}catch(r){}return null});Sys.Browser={};Sys.Browser.InternetExplorer={};Sys.Browser.Firefox={};Sys.Browser.Safari={};Sys.Browser.Opera={};Sys.Browser.agent=null;Sys.Browser.hasDebuggerStatement=!1;Sys.Browser.name=navigator.appName;Sys.Browser.version=parseFloat(navigator.appVersion);navigator.userAgent.indexOf(" MSIE ")>-1?(Sys.Browser.agent=Sys.Browser.InternetExplorer,Sys.Browser.version=parseFloat(navigator.userAgent.match(/MSIE (\d+\.\d+)/)[1]),Sys.Browser.hasDebuggerStatement=!0):navigator.userAgent.indexOf(" Firefox/")>-1?(Sys.Browser.agent=Sys.Browser.Firefox,Sys.Browser.version=parseFloat(navigator.userAgent.match(/Firefox\/(\d+\.\d+)/)[1]),Sys.Browser.name="Firefox",Sys.Browser.hasDebuggerStatement=!0):navigator.userAgent.indexOf(" Safari/")>-1?(Sys.Browser.agent=Sys.Browser.Safari,Sys.Browser.version=parseFloat(navigator.userAgent.match(/Safari\/(\d+(\.\d+)?)/)[1]),Sys.Browser.name="Safari"):navigator.userAgent.indexOf("Opera/")>-1&&(Sys.Browser.agent=Sys.Browser.Opera);Type.registerNamespace("Sys.UI");Sys._Debug=function(){};Sys._Debug.prototype={_appendConsole:function(n){typeof Debug!="undefined"&&Debug.writeln&&Debug.writeln(n);window.console&&window.console.log&&window.console.log(n);window.opera&&window.opera.postError(n);window.debugService&&window.debugService.trace(n)},_appendTrace:function(n){var t=document.getElementById("TraceConsole");t&&t.tagName.toUpperCase()==="TEXTAREA"&&(t.value+=n+"\n")},assert:function(n,t,i){n||(t=i&&this.assert.caller?String.format(Sys.Res.assertFailedCaller,t,this.assert.caller):String.format(Sys.Res.assertFailed,t),confirm(String.format(Sys.Res.breakIntoDebugger,t))&&this.fail(t))},clearTrace:function(){var n=document.getElementById("TraceConsole");n&&n.tagName.toUpperCase()==="TEXTAREA"&&(n.value="")},fail:function(n){this._appendConsole(n);Sys.Browser.hasDebuggerStatement&&eval("debugger")},trace:function(n){this._appendConsole(n);this._appendTrace(n)},traceDump:function(n,t){var i=this._traceDump(n,t,!0)},_traceDump:function(n,t,i,r,u){var e,o,f,c,s,h;if(t=t?t:"traceDump",r=r?r:"",n===null){this.trace(r+t+": null");return}switch(typeof n){case"undefined":this.trace(r+t+": Undefined");break;case"number":case"string":case"boolean":this.trace(r+t+": "+n);break;default:if(Date.isInstanceOfType(n)||RegExp.isInstanceOfType(n)){this.trace(r+t+": "+n.toString());break}if(u){if(Array.contains(u,n)){this.trace(r+t+": ...");return}}else u=[];if(Array.add(u,n),n==window||n===document||window.HTMLElement&&n instanceof HTMLElement||typeof n.nodeName=="string")e=n.tagName?n.tagName:"DomElement",n.id&&(e+=" - "+n.id),this.trace(r+t+" {"+e+"}");else if(o=Object.getTypeName(n),this.trace(r+t+(typeof o=="string"?" {"+o+"}":"")),r===""||i)if(r+="    ",Array.isInstanceOfType(n))for(c=n.length,f=0;f<c;f++)this._traceDump(n[f],"["+f+"]",i,r,u);else for(s in n)h=n[s],Function.isInstanceOfType(h)||this._traceDump(h,s,i,r,u);Array.remove(u,n)}}};Sys._Debug.registerClass("Sys._Debug");Sys.Debug=new Sys._Debug;Sys.Debug.isDebug=!1;Type.prototype.registerEnum=function(n,t){Sys.__upperCaseTypes[n.toUpperCase()]=this;for(var i in this.prototype)this[i]=this.prototype[i];this.__typeName=n;this.parse=Sys$Enum$parse;this.__string=this.toString();this.toString=Sys$Enum$toString;this.__flags=t;this.__enum=!0};Type.isEnum=function(n){return typeof n=="undefined"||n===null?!1:!!n.__enum};Type.isFlags=function(n){return typeof n=="undefined"||n===null?!1:!!n.__flags};Sys.EventHandlerList=function(){this._list={}};Sys.EventHandlerList.prototype={addHandler:function(n,t){Array.add(this._getEvent(n,!0),t)},removeHandler:function(n,t){var i=this._getEvent(n);i&&Array.remove(i,t)},getHandler:function(n){var t=this._getEvent(n);return!t||t.length===0?null:(t=Array.clone(t),function(n,i){for(var r=0,u=t.length;r<u;r++)t[r](n,i)})},_getEvent:function(n,t){if(!this._list[n]){if(!t)return null;this._list[n]=[]}return this._list[n]}};Sys.EventHandlerList.registerClass("Sys.EventHandlerList");Sys.EventArgs=function(){};Sys.EventArgs.registerClass("Sys.EventArgs");Sys.EventArgs.Empty=new Sys.EventArgs;Sys.CancelEventArgs=function(){Sys.CancelEventArgs.initializeBase(this);this._cancel=!1};Sys.CancelEventArgs.prototype={get_cancel:function(){return this._cancel},set_cancel:function(n){this._cancel=n}};Sys.CancelEventArgs.registerClass("Sys.CancelEventArgs",Sys.EventArgs);Sys.INotifyPropertyChange=function(){};Sys.INotifyPropertyChange.prototype={};Sys.INotifyPropertyChange.registerInterface("Sys.INotifyPropertyChange");Sys.PropertyChangedEventArgs=function(n){Sys.PropertyChangedEventArgs.initializeBase(this);this._propertyName=n};Sys.PropertyChangedEventArgs.prototype={get_propertyName:function(){return this._propertyName}};Sys.PropertyChangedEventArgs.registerClass("Sys.PropertyChangedEventArgs",Sys.EventArgs);Sys.INotifyDisposing=function(){};Sys.INotifyDisposing.prototype={};Sys.INotifyDisposing.registerInterface("Sys.INotifyDisposing");Sys.Component=function(){Sys.Application&&Sys.Application.registerDisposableObject(this)};Sys.Component.prototype={_id:null,_initialized:!1,_updating:!1,get_events:function(){return this._events||(this._events=new Sys.EventHandlerList),this._events},get_id:function(){return this._id},set_id:function(n){this._id=n},get_isInitialized:function(){return this._initialized},get_isUpdating:function(){return this._updating},add_disposing:function(n){this.get_events().addHandler("disposing",n)},remove_disposing:function(n){this.get_events().removeHandler("disposing",n)},add_propertyChanged:function(n){this.get_events().addHandler("propertyChanged",n)},remove_propertyChanged:function(n){this.get_events().removeHandler("propertyChanged",n)},beginUpdate:function(){this._updating=!0},dispose:function(){if(this._events){var n=this._events.getHandler("disposing");n&&n(this,Sys.EventArgs.Empty)}delete this._events;Sys.Application.unregisterDisposableObject(this);Sys.Application.removeComponent(this)},endUpdate:function(){this._updating=!1;this._initialized||this.initialize();this.updated()},initialize:function(){this._initialized=!0},raisePropertyChanged:function(n){if(this._events){var t=this._events.getHandler("propertyChanged");t&&t(this,new Sys.PropertyChangedEventArgs(n))}},updated:function(){}};Sys.Component.registerClass("Sys.Component",null,Sys.IDisposable,Sys.INotifyPropertyChange,Sys.INotifyDisposing);$create=Sys.Component.create=function(n,t,i,r,u){var f=u?new n(u):new n,e=Sys.Application,s=e.get_isCreatingComponents(),o;if(f.beginUpdate(),t&&Sys$Component$_setProperties(f,t),i)for(o in i)f["add_"+o](i[o]);return f.get_id()&&e.addComponent(f),s?(e._createdComponents[e._createdComponents.length]=f,r?e._addComponentToSecondPass(f,r):f.endUpdate()):(r&&Sys$Component$_setReferences(f,r),f.endUpdate()),f};Sys.UI.MouseButton=function(){throw Error.notImplemented();};Sys.UI.MouseButton.prototype={leftButton:0,middleButton:1,rightButton:2};Sys.UI.MouseButton.registerEnum("Sys.UI.MouseButton");Sys.UI.Key=function(){throw Error.notImplemented();};Sys.UI.Key.prototype={backspace:8,tab:9,enter:13,esc:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,del:127};Sys.UI.Key.registerEnum("Sys.UI.Key");Sys.UI.Point=function(n,t){this.x=n;this.y=t};Sys.UI.Point.registerClass("Sys.UI.Point");Sys.UI.Bounds=function(n,t,i,r){this.x=n;this.y=t;this.height=r;this.width=i};Sys.UI.Bounds.registerClass("Sys.UI.Bounds");Sys.UI.DomEvent=function(n){var t=n,i,r;this.rawEvent=t;this.altKey=t.altKey;typeof t.button!="undefined"&&(this.button=typeof t.which!="undefined"?t.button:t.button===4?Sys.UI.MouseButton.middleButton:t.button===2?Sys.UI.MouseButton.rightButton:Sys.UI.MouseButton.leftButton);t.type==="keypress"?this.charCode=t.charCode||t.keyCode:this.keyCode=t.keyCode&&t.keyCode===46?127:t.keyCode;this.clientX=t.clientX;this.clientY=t.clientY;this.ctrlKey=t.ctrlKey;this.target=t.target?t.target:t.srcElement;typeof t.offsetX!="undefined"&&typeof t.offsetY!="undefined"?(this.offsetX=t.offsetX,this.offsetY=t.offsetY):this.target&&this.target.nodeType!==3&&typeof t.clientX=="number"&&(i=Sys.UI.DomElement.getLocation(this.target),r=Sys.UI.DomElement._getWindow(this.target),this.offsetX=(r.pageXOffset||0)+t.clientX-i.x,this.offsetY=(r.pageYOffset||0)+t.clientY-i.y);this.screenX=t.screenX;this.screenY=t.screenY;this.shiftKey=t.shiftKey;this.type=t.type};Sys.UI.DomEvent.prototype={preventDefault:function(){this.rawEvent.preventDefault?this.rawEvent.preventDefault():window.event&&(this.rawEvent.returnValue=!1)},stopPropagation:function(){this.rawEvent.stopPropagation?this.rawEvent.stopPropagation():window.event&&(this.rawEvent.cancelBubble=!0)}};Sys.UI.DomEvent.registerClass("Sys.UI.DomEvent");var $addHandler=Sys.UI.DomEvent.addHandler=function(n,t,i){var r,u;n._events||(n._events={});r=n._events[t];r||(n._events[t]=r=[]);n.addEventListener?(u=function(t){return i.call(n,new Sys.UI.DomEvent(t))},n.addEventListener(t,u,!1)):n.attachEvent&&(u=function(){var t={};try{t=Sys.UI.DomElement._getWindow(n).event}catch(r){}return i.call(n,new Sys.UI.DomEvent(t))},n.attachEvent("on"+t,u));r[r.length]={handler:i,browserHandler:u}},$addHandlers=Sys.UI.DomEvent.addHandlers=function(n,t,i){var u,r;for(u in t)r=t[u],i&&(r=Function.createDelegate(i,r)),$addHandler(n,u,r)},$clearHandlers=Sys.UI.DomEvent.clearHandlers=function(n){var i,r,u,t;if(n._events){i=n._events;for(r in i)for(u=i[r],t=u.length-1;t>=0;t--)$removeHandler(n,r,u[t].handler);n._events=null}},$removeHandler=Sys.UI.DomEvent.removeHandler=function(n,t,i){for(var f=null,u=n._events[t],r=0,e=u.length;r<e;r++)if(u[r].handler===i){f=u[r].browserHandler;break}n.removeEventListener?n.removeEventListener(t,f,!1):n.detachEvent&&n.detachEvent("on"+t,f);u.splice(r,1)};Sys.UI.DomElement=function(){};Sys.UI.DomElement.registerClass("Sys.UI.DomElement");Sys.UI.DomElement.addCssClass=function(n,t){Sys.UI.DomElement.containsCssClass(n,t)||(n.className===""?n.className=t:n.className+=" "+t)};Sys.UI.DomElement.containsCssClass=function(n,t){return Array.contains(n.className.split(" "),t)};Sys.UI.DomElement.getBounds=function(n){var t=Sys.UI.DomElement.getLocation(n);return new Sys.UI.Bounds(t.x,t.y,n.offsetWidth||0,n.offsetHeight||0)};$get=Sys.UI.DomElement.getElementById=function(n,t){var u,f,r,i;if(!t)return document.getElementById(n);if(t.getElementById)return t.getElementById(n);for(u=[],f=t.childNodes,r=0;r<f.length;r++)i=f[r],i.nodeType==1&&(u[u.length]=i);while(u.length){if(i=u.shift(),i.id==n)return i;for(f=i.childNodes,r=0;r<f.length;r++)i=f[r],i.nodeType==1&&(u[u.length]=i)}return null};switch(Sys.Browser.agent){case Sys.Browser.InternetExplorer:Sys.UI.DomElement.getLocation=function(n){var t,i,r;if(n.self||n.nodeType===9||(t=n.getBoundingClientRect(),!t))return new Sys.UI.Point(0,0);var u=n.ownerDocument.documentElement,f=t.left-2+u.scrollLeft,e=t.top-2+u.scrollTop;try{i=n.ownerDocument.parentWindow.frameElement||null;i&&(r=i.frameBorder==="0"||i.frameBorder==="no"?2:0,f+=r,e+=r)}catch(o){}return new Sys.UI.Point(f,e)};break;case Sys.Browser.Safari:Sys.UI.DomElement.getLocation=function(n){var r,o,t,s;if(n.window&&n.window===n||n.nodeType===9)return new Sys.UI.Point(0,0);var u=0,f=0,h=null,e=null,i;for(t=n;t;h=t,e=i,t=t.offsetParent)i=Sys.UI.DomElement._getCurrentStyle(t),r=t.tagName,(t.offsetLeft||t.offsetTop)&&(r!=="BODY"||!e||e.position!=="absolute")&&(u+=t.offsetLeft,f+=t.offsetTop);if(i=Sys.UI.DomElement._getCurrentStyle(n),o=i?i.position:null,!o||o!=="absolute")for(t=n.parentNode;t;t=t.parentNode)if(r=t.tagName,r!=="BODY"&&r!=="HTML"&&(t.scrollLeft||t.scrollTop)&&(u-=t.scrollLeft||0,f-=t.scrollTop||0),i=Sys.UI.DomElement._getCurrentStyle(t),s=i?i.position:null,s&&s==="absolute")break;return new Sys.UI.Point(u,f)};break;case Sys.Browser.Opera:Sys.UI.DomElement.getLocation=function(n){var i,e,r,t,o;if(n.window&&n.window===n||n.nodeType===9)return new Sys.UI.Point(0,0);var u=0,f=0,s=null;for(t=n;t;s=t,t=t.offsetParent)i=t.tagName,u+=t.offsetLeft||0,f+=t.offsetTop||0;for(e=n.style.position,r=e&&e!=="static",t=n.parentNode;t;t=t.parentNode)i=t.tagName,i!=="BODY"&&i!=="HTML"&&(t.scrollLeft||t.scrollTop)&&r&&(t.style.overflow==="scroll"||t.style.overflow==="auto")&&(u-=t.scrollLeft||0,f-=t.scrollTop||0),o=t&&t.style?t.style.position:null,r=r||o&&o!=="static";return new Sys.UI.Point(u,f)};break;default:Sys.UI.DomElement.getLocation=function(n){var r,o,t;if(n.window&&n.window===n||n.nodeType===9)return new Sys.UI.Point(0,0);var u=0,f=0,s=null,e=null,i=null;for(t=n;t;s=t,e=i,t=t.offsetParent)r=t.tagName,i=Sys.UI.DomElement._getCurrentStyle(t),!(t.offsetLeft||t.offsetTop)||r==="BODY"&&(!e||e.position!=="absolute")||(u+=t.offsetLeft,f+=t.offsetTop),s!==null&&i&&(r!=="TABLE"&&r!=="TD"&&r!=="HTML"&&(u+=parseInt(i.borderLeftWidth)||0,f+=parseInt(i.borderTopWidth)||0),r==="TABLE"&&(i.position==="relative"||i.position==="absolute")&&(u+=parseInt(i.marginLeft)||0,f+=parseInt(i.marginTop)||0));if(i=Sys.UI.DomElement._getCurrentStyle(n),o=i?i.position:null,!o||o!=="absolute")for(t=n.parentNode;t;t=t.parentNode)r=t.tagName,r!=="BODY"&&r!=="HTML"&&(t.scrollLeft||t.scrollTop)&&(u-=t.scrollLeft||0,f-=t.scrollTop||0,i=Sys.UI.DomElement._getCurrentStyle(t),i&&(u+=parseInt(i.borderLeftWidth)||0,f+=parseInt(i.borderTopWidth)||0));return new Sys.UI.Point(u,f)}}Sys.UI.DomElement.removeCssClass=function(n,t){var i=" "+n.className+" ",r=i.indexOf(" "+t+" ");r>=0&&(n.className=(i.substr(0,r)+" "+i.substring(r+t.length+1,i.length)).trim())};Sys.UI.DomElement.setLocation=function(n,t,i){var r=n.style;r.position="absolute";r.left=t+"px";r.top=i+"px"};Sys.UI.DomElement.toggleCssClass=function(n,t){Sys.UI.DomElement.containsCssClass(n,t)?Sys.UI.DomElement.removeCssClass(n,t):Sys.UI.DomElement.addCssClass(n,t)};Sys.UI.DomElement.getVisibilityMode=function(n){return n._visibilityMode===Sys.UI.VisibilityMode.hide?Sys.UI.VisibilityMode.hide:Sys.UI.VisibilityMode.collapse};Sys.UI.DomElement.setVisibilityMode=function(n,t){Sys.UI.DomElement._ensureOldDisplayMode(n);n._visibilityMode!==t&&(n._visibilityMode=t,Sys.UI.DomElement.getVisible(n)===!1&&(n.style.display=n._visibilityMode===Sys.UI.VisibilityMode.hide?n._oldDisplayMode:"none"),n._visibilityMode=t)};Sys.UI.DomElement.getVisible=function(n){var t=n.currentStyle||Sys.UI.DomElement._getCurrentStyle(n);return t?t.visibility!=="hidden"&&t.display!=="none":!0};Sys.UI.DomElement.setVisible=function(n,t){t!==Sys.UI.DomElement.getVisible(n)&&(Sys.UI.DomElement._ensureOldDisplayMode(n),n.style.visibility=t?"visible":"hidden",n.style.display=t||n._visibilityMode===Sys.UI.VisibilityMode.hide?n._oldDisplayMode:"none")};Sys.UI.DomElement._ensureOldDisplayMode=function(n){if(!n._oldDisplayMode){var t=n.currentStyle||Sys.UI.DomElement._getCurrentStyle(n);if(n._oldDisplayMode=t?t.display:null,!n._oldDisplayMode||n._oldDisplayMode==="none")switch(n.tagName.toUpperCase()){case"DIV":case"P":case"ADDRESS":case"BLOCKQUOTE":case"BODY":case"COL":case"COLGROUP":case"DD":case"DL":case"DT":case"FIELDSET":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HR":case"IFRAME":case"LEGEND":case"OL":case"PRE":case"TABLE":case"TD":case"TH":case"TR":case"UL":n._oldDisplayMode="block";break;case"LI":n._oldDisplayMode="list-item";break;default:n._oldDisplayMode="inline"}}};Sys.UI.DomElement._getWindow=function(n){var t=n.ownerDocument||n.document||n;return t.defaultView||t.parentWindow};Sys.UI.DomElement._getCurrentStyle=function(n){var t,i,f,e,r,u;if(n.nodeType===3)return null;if(t=Sys.UI.DomElement._getWindow(n),n.documentElement&&(n=n.documentElement),i=t&&n!==t&&t.getComputedStyle?t.getComputedStyle(n,null):n.currentStyle||n.style,!i&&Sys.Browser.agent===Sys.Browser.Safari&&n.style){f=n.style.display;e=n.style.position;n.style.position="absolute";n.style.display="block";r=t.getComputedStyle(n,null);n.style.display=f;n.style.position=e;i={};for(u in r)i[u]=r[u];i.display="none"}return i};Sys.IContainer=function(){};Sys.IContainer.prototype={};Sys.IContainer.registerInterface("Sys.IContainer");Sys._ScriptLoader=function(){this._scriptsToLoad=null;this._scriptLoadedDelegate=Function.createDelegate(this,this._scriptLoadedHandler)};Sys._ScriptLoader.prototype={dispose:function(){this._stopLoading();this._events&&delete this._events;this._scriptLoadedDelegate=null},loadScripts:function(n,t,i,r){this._loading=!0;this._allScriptsLoadedCallback=t;this._scriptLoadFailedCallback=i;this._scriptLoadTimeoutCallback=r;n>0&&(this._timeoutCookie=window.setTimeout(Function.createDelegate(this,this._scriptLoadTimeoutHandler),n*1e3));this._loadScriptsInternal()},notifyScriptLoaded:function(){this._loading&&(this._currentTask._notified++,Sys.Browser.agent===Sys.Browser.Safari&&this._currentTask._notified===1&&window.setTimeout(Function.createDelegate(this,function(){this._scriptLoadedHandler(this._currentTask.get_scriptElement(),!0)}),0))},queueCustomScriptTag:function(n){this._scriptsToLoad||(this._scriptsToLoad=[]);Array.add(this._scriptsToLoad,n)},queueScriptBlock:function(n){this._scriptsToLoad||(this._scriptsToLoad=[]);Array.add(this._scriptsToLoad,{text:n})},queueScriptReference:function(n){this._scriptsToLoad||(this._scriptsToLoad=[]);Array.add(this._scriptsToLoad,{src:n})},_createScriptElement:function(n){var t=document.createElement("SCRIPT"),i;t.type="text/javascript";for(i in n)t[i]=n[i];return t},_loadScriptsInternal:function(){var t,n,r,i;this._scriptsToLoad&&this._scriptsToLoad.length>0?(t=Array.dequeue(this._scriptsToLoad),n=this._createScriptElement(t),n.text&&Sys.Browser.agent===Sys.Browser.Safari&&(n.innerHTML=n.text,delete n.text),typeof t.src=="string"?(this._currentTask=new Sys._ScriptLoaderTask(n,this._scriptLoadedDelegate),this._currentTask.execute()):(document.getElementsByTagName("HEAD")[0].appendChild(n),r=this,window.setTimeout(function(){Sys._ScriptLoader._clearScript(n);r._loadScriptsInternal()},0))):(i=this._allScriptsLoadedCallback,this._stopLoading(),i&&i(this))},_raiseError:function(n){var t=this._scriptLoadFailedCallback,i=this._currentTask.get_scriptElement();if(this._stopLoading(),t)t(this,i,n);else throw Sys._ScriptLoader._errorScriptLoadFailed(i.src,n);},_scriptLoadedHandler:function(n,t){t&&this._currentTask._notified?this._currentTask._notified>1?this._raiseError(!0):(Array.add(Sys._ScriptLoader._getLoadedScripts(),n.src),this._currentTask.dispose(),this._currentTask=null,this._loadScriptsInternal()):this._raiseError(!1)},_scriptLoadTimeoutHandler:function(){var n=this._scriptLoadTimeoutCallback;this._stopLoading();n&&n(this)},_stopLoading:function(){this._timeoutCookie&&(window.clearTimeout(this._timeoutCookie),this._timeoutCookie=null);this._currentTask&&(this._currentTask.dispose(),this._currentTask=null);this._scriptsToLoad=null;this._loading=null;this._allScriptsLoadedCallback=null;this._scriptLoadFailedCallback=null;this._scriptLoadTimeoutCallback=null}};Sys._ScriptLoader.registerClass("Sys._ScriptLoader",null,Sys.IDisposable);Sys._ScriptLoader.getInstance=function(){var n=Sys._ScriptLoader._activeInstance;return n||(n=Sys._ScriptLoader._activeInstance=new Sys._ScriptLoader),n};Sys._ScriptLoader.isScriptLoaded=function(n){var t=document.createElement("script");return t.src=n,Array.contains(Sys._ScriptLoader._getLoadedScripts(),t.src)};Sys._ScriptLoader.readLoadedScripts=function(){var t,r,u,n;if(!Sys._ScriptLoader._referencedScripts)for(t=Sys._ScriptLoader._referencedScripts=[],r=document.getElementsByTagName("SCRIPT"),i=r.length-1;i>=0;i--)u=r[i],n=u.src,n.length&&(Array.contains(t,n)||Array.add(t,n))};Sys._ScriptLoader._clearScript=function(n){Sys.Debug.isDebug||n.parentNode.removeChild(n)};Sys._ScriptLoader._errorScriptLoadFailed=function(n,t){var r,u,i;return r=t?Sys.Res.scriptLoadMultipleCallbacks:Sys.Res.scriptLoadFailed,u="Sys.ScriptLoadFailedException: "+String.format(r,n),i=Error.create(u,{name:"Sys.ScriptLoadFailedException",scriptUrl:n}),i.popStackFrame(),i};Sys._ScriptLoader._getLoadedScripts=function(){return Sys._ScriptLoader._referencedScripts||(Sys._ScriptLoader._referencedScripts=[],Sys._ScriptLoader.readLoadedScripts()),Sys._ScriptLoader._referencedScripts};Sys._ScriptLoaderTask=function(n,t){this._scriptElement=n;this._completedCallback=t;this._notified=0};Sys._ScriptLoaderTask.prototype={get_scriptElement:function(){return this._scriptElement},dispose:function(){this._disposed||(this._disposed=!0,this._removeScriptElementHandlers(),Sys._ScriptLoader._clearScript(this._scriptElement),this._scriptElement=null)},execute:function(){this._addScriptElementHandlers();document.getElementsByTagName("HEAD")[0].appendChild(this._scriptElement)},_addScriptElementHandlers:function(){this._scriptLoadDelegate=Function.createDelegate(this,this._scriptLoadHandler);Sys.Browser.agent!==Sys.Browser.InternetExplorer?(this._scriptElement.readyState="loaded",$addHandler(this._scriptElement,"load",this._scriptLoadDelegate)):$addHandler(this._scriptElement,"readystatechange",this._scriptLoadDelegate);this._scriptElement.addEventListener&&(this._scriptErrorDelegate=Function.createDelegate(this,this._scriptErrorHandler),this._scriptElement.addEventListener("error",this._scriptErrorDelegate,!1))},_removeScriptElementHandlers:function(){if(this._scriptLoadDelegate){var n=this.get_scriptElement();Sys.Browser.agent!==Sys.Browser.InternetExplorer?$removeHandler(n,"load",this._scriptLoadDelegate):$removeHandler(n,"readystatechange",this._scriptLoadDelegate);this._scriptErrorDelegate&&(this._scriptElement.removeEventListener("error",this._scriptErrorDelegate,!1),this._scriptErrorDelegate=null);this._scriptLoadDelegate=null}},_scriptErrorHandler:function(){this._disposed||this._completedCallback(this.get_scriptElement(),!1)},_scriptLoadHandler:function(){var n,t;this._disposed||(n=this.get_scriptElement(),n.readyState==="loaded"||n.readyState==="complete")&&(t=this,window.setTimeout(function(){t._completedCallback(n,!0)},0))}};Sys._ScriptLoaderTask.registerClass("Sys._ScriptLoaderTask",null,Sys.IDisposable);Sys.ApplicationLoadEventArgs=function(n,t){Sys.ApplicationLoadEventArgs.initializeBase(this);this._components=n;this._isPartialLoad=t};Sys.ApplicationLoadEventArgs.prototype={get_components:function(){return this._components},get_isPartialLoad:function(){return this._isPartialLoad}};Sys.ApplicationLoadEventArgs.registerClass("Sys.ApplicationLoadEventArgs",Sys.EventArgs);Sys._Application=function(){Sys._Application.initializeBase(this);this._disposableObjects=[];this._components={};this._createdComponents=[];this._secondPassComponents=[];this._unloadHandlerDelegate=Function.createDelegate(this,this._unloadHandler);this._loadHandlerDelegate=Function.createDelegate(this,this._loadHandler);Sys.UI.DomEvent.addHandler(window,"unload",this._unloadHandlerDelegate);Sys.UI.DomEvent.addHandler(window,"load",this._loadHandlerDelegate)};Sys._Application.prototype={_creatingComponents:!1,_disposing:!1,get_isCreatingComponents:function(){return this._creatingComponents},add_load:function(n){this.get_events().addHandler("load",n)},remove_load:function(n){this.get_events().removeHandler("load",n)},add_init:function(n){this._initialized?n(this,Sys.EventArgs.Empty):this.get_events().addHandler("init",n)},remove_init:function(n){this.get_events().removeHandler("init",n)},add_unload:function(n){this.get_events().addHandler("unload",n)},remove_unload:function(n){this.get_events().removeHandler("unload",n)},addComponent:function(n){this._components[n.get_id()]=n},beginCreateComponents:function(){this._creatingComponents=!0},dispose:function(){var t,i,n,u,r;if(!this._disposing){for(this._disposing=!0,window.pageUnload&&window.pageUnload(this,Sys.EventArgs.Empty),t=this.get_events().getHandler("unload"),t&&t(this,Sys.EventArgs.Empty),i=Array.clone(this._disposableObjects),n=0,u=i.length;n<u;n++)i[n].dispose();Array.clear(this._disposableObjects);Sys.UI.DomEvent.removeHandler(window,"unload",this._unloadHandlerDelegate);this._loadHandlerDelegate&&(Sys.UI.DomEvent.removeHandler(window,"load",this._loadHandlerDelegate),this._loadHandlerDelegate=null);r=Sys._ScriptLoader.getInstance();r&&r.dispose();Sys._Application.callBaseMethod(this,"dispose")}},endCreateComponents:function(){for(var i,t=this._secondPassComponents,n=0,r=t.length;n<r;n++)i=t[n].component,Sys$Component$_setReferences(i,t[n].references),i.endUpdate();this._secondPassComponents=[];this._creatingComponents=!1},findComponent:function(n,t){return t?Sys.IContainer.isInstanceOfType(t)?t.findComponent(n):t[n]||null:Sys.Application._components[n]||null},getComponents:function(){var n=[],t=this._components;for(var i in t)n[n.length]=t[i];return n},initialize:function(){this._initialized||this._initializing||(this._initializing=!0,window.setTimeout(Function.createDelegate(this,this._doInitialize),0))},notifyScriptLoaded:function(){var n=Sys._ScriptLoader.getInstance();n&&n.notifyScriptLoaded()},registerDisposableObject:function(n){this._disposing||(this._disposableObjects[this._disposableObjects.length]=n)},raiseLoad:function(){var n=this.get_events().getHandler("load"),t=new Sys.ApplicationLoadEventArgs(Array.clone(this._createdComponents),!this._initializing);n&&n(this,t);window.pageLoad&&window.pageLoad(this,t);this._createdComponents=[]},removeComponent:function(n){var t=n.get_id();t&&delete this._components[t]},unregisterDisposableObject:function(n){this._disposing||Array.remove(this._disposableObjects,n)},_addComponentToSecondPass:function(n,t){this._secondPassComponents[this._secondPassComponents.length]={component:n,references:t}},_doInitialize:function(){Sys._Application.callBaseMethod(this,"initialize");var n=this.get_events().getHandler("init");n&&(this.beginCreateComponents(),n(this,Sys.EventArgs.Empty),this.endCreateComponents());this.raiseLoad();this._initializing=!1},_loadHandler:function(){this._loadHandlerDelegate&&(Sys.UI.DomEvent.removeHandler(window,"load",this._loadHandlerDelegate),this._loadHandlerDelegate=null);this.initialize()},_unloadHandler:function(){this.dispose()}};Sys._Application.registerClass("Sys._Application",Sys.Component,Sys.IContainer);Sys.Application=new Sys._Application;$find=Sys.Application.findComponent;Type.registerNamespace("Sys.Net");Sys.Net.WebRequestExecutor=function(){this._webRequest=null;this._resultObject=null};Sys.Net.WebRequestExecutor.prototype={get_webRequest:function(){return this._webRequest},_set_webRequest:function(n){this._webRequest=n},get_started:function(){throw Error.notImplemented();},get_responseAvailable:function(){throw Error.notImplemented();},get_timedOut:function(){throw Error.notImplemented();},get_aborted:function(){throw Error.notImplemented();},get_responseData:function(){throw Error.notImplemented();},get_statusCode:function(){throw Error.notImplemented();},get_statusText:function(){throw Error.notImplemented();},get_xml:function(){throw Error.notImplemented();},get_object:function(){return this._resultObject||(this._resultObject=Sys.Serialization.JavaScriptSerializer.deserialize(this.get_responseData())),this._resultObject},executeRequest:function(){throw Error.notImplemented();},abort:function(){throw Error.notImplemented();},getResponseHeader:function(){throw Error.notImplemented();},getAllResponseHeaders:function(){throw Error.notImplemented();}};Sys.Net.WebRequestExecutor.registerClass("Sys.Net.WebRequestExecutor");Sys.Net.XMLDOM=function(n){var r,i,u,t,f;if(window.DOMParser)try{return f=new window.DOMParser,f.parseFromString(n,"text/xml")}catch(e){}else for(r=["Msxml2.DOMDocument.3.0","Msxml2.DOMDocument"],i=0,u=r.length;i<u;i++)try{return t=new ActiveXObject(r[i]),t.async=!1,t.loadXML(n),t.setProperty("SelectionLanguage","XPath"),t}catch(e){}return null};Sys.Net.XMLHttpExecutor=function(){Sys.Net.XMLHttpExecutor.initializeBase(this);var n=this;this._xmlHttpRequest=null;this._webRequest=null;this._responseAvailable=!1;this._timedOut=!1;this._timer=null;this._aborted=!1;this._started=!1;this._onReadyStateChange=function(){if(n._xmlHttpRequest.readyState===4){try{if(typeof n._xmlHttpRequest.status=="undefined")return}catch(t){return}n._clearTimer();n._responseAvailable=!0;n._webRequest.completed(Sys.EventArgs.Empty);n._xmlHttpRequest!=null&&(n._xmlHttpRequest.onreadystatechange=Function.emptyMethod,n._xmlHttpRequest=null)}};this._clearTimer=function(){n._timer!=null&&(window.clearTimeout(n._timer),n._timer=null)};this._onTimeout=function(){n._responseAvailable||(n._clearTimer(),n._timedOut=!0,n._xmlHttpRequest.onreadystatechange=Function.emptyMethod,n._xmlHttpRequest.abort(),n._webRequest.completed(Sys.EventArgs.Empty),n._xmlHttpRequest=null)}};Sys.Net.XMLHttpExecutor.prototype={get_timedOut:function(){return this._timedOut},get_started:function(){return this._started},get_responseAvailable:function(){return this._responseAvailable},get_aborted:function(){return this._aborted},executeRequest:function(){var t,n,i,r,u,f;if(this._webRequest=this.get_webRequest(),t=this._webRequest.get_body(),n=this._webRequest.get_headers(),this._xmlHttpRequest=new XMLHttpRequest,this._xmlHttpRequest.onreadystatechange=this._onReadyStateChange,i=this._webRequest.get_httpVerb(),this._xmlHttpRequest.open(i,this._webRequest.getResolvedUrl(),!0),n)for(r in n)u=n[r],typeof u!="function"&&this._xmlHttpRequest.setRequestHeader(r,u);i.toLowerCase()==="post"&&(n!==null&&n["Content-Type"]||this._xmlHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),t||(t=""));f=this._webRequest.get_timeout();f>0&&(this._timer=window.setTimeout(Function.createDelegate(this,this._onTimeout),f));this._xmlHttpRequest.send(t);this._started=!0},getResponseHeader:function(n){var t;try{t=this._xmlHttpRequest.getResponseHeader(n)}catch(i){}return t||(t=""),t},getAllResponseHeaders:function(){return this._xmlHttpRequest.getAllResponseHeaders()},get_responseData:function(){return this._xmlHttpRequest.responseText},get_statusCode:function(){var n=0;try{n=this._xmlHttpRequest.status}catch(t){}return n},get_statusText:function(){return this._xmlHttpRequest.statusText},get_xml:function(){var n=this._xmlHttpRequest.responseXML;if(n&&n.documentElement)navigator.userAgent.indexOf("MSIE")!==-1&&n.setProperty("SelectionLanguage","XPath");else if(n=Sys.Net.XMLDOM(this._xmlHttpRequest.responseText),!n||!n.documentElement)return null;return n.documentElement.namespaceURI==="http://www.mozilla.org/newlayout/xml/parsererror.xml"&&n.documentElement.tagName==="parsererror"?null:n.documentElement.firstChild&&n.documentElement.firstChild.tagName==="parsererror"?null:n},abort:function(){this._aborted||this._responseAvailable||this._timedOut||(this._aborted=!0,this._clearTimer(),this._xmlHttpRequest&&!this._responseAvailable&&(this._xmlHttpRequest.onreadystatechange=Function.emptyMethod,this._xmlHttpRequest.abort(),this._xmlHttpRequest=null,this._webRequest.completed(Sys.EventArgs.Empty)))}};Sys.Net.XMLHttpExecutor.registerClass("Sys.Net.XMLHttpExecutor",Sys.Net.WebRequestExecutor);Sys.Net._WebRequestManager=function(){this._this=this;this._defaultTimeout=0;this._defaultExecutorType="Sys.Net.XMLHttpExecutor"};Sys.Net._WebRequestManager.prototype={add_invokingRequest:function(n){this._get_eventHandlerList().addHandler("invokingRequest",n)},remove_invokingRequest:function(n){this._get_eventHandlerList().removeHandler("invokingRequest",n)},add_completedRequest:function(n){this._get_eventHandlerList().addHandler("completedRequest",n)},remove_completedRequest:function(n){this._get_eventHandlerList().removeHandler("completedRequest",n)},_get_eventHandlerList:function(){return this._events||(this._events=new Sys.EventHandlerList),this._events},get_defaultTimeout:function(){return this._defaultTimeout},set_defaultTimeout:function(n){this._defaultTimeout=n},get_defaultExecutorType:function(){return this._defaultExecutorType},set_defaultExecutorType:function(n){this._defaultExecutorType=n},executeRequest:function(n){var t=n.get_executor(),u,f,i,r;if(!t){u=!1;try{f=eval(this._defaultExecutorType);t=new f}catch(e){u=!0}n.set_executor(t)}t.get_aborted()||(i=new Sys.Net.NetworkRequestEventArgs(n),r=this._get_eventHandlerList().getHandler("invokingRequest"),r&&r(this,i),i.get_cancel()||t.executeRequest())}};Sys.Net._WebRequestManager.registerClass("Sys.Net._WebRequestManager");Sys.Net.WebRequestManager=new Sys.Net._WebRequestManager;Sys.Net.NetworkRequestEventArgs=function(n){Sys.Net.NetworkRequestEventArgs.initializeBase(this);this._webRequest=n};Sys.Net.NetworkRequestEventArgs.prototype={get_webRequest:function(){return this._webRequest}};Sys.Net.NetworkRequestEventArgs.registerClass("Sys.Net.NetworkRequestEventArgs",Sys.CancelEventArgs);Sys.Net.WebRequest=function(){this._url="";this._headers={};this._body=null;this._userContext=null;this._httpVerb=null;this._executor=null;this._invokeCalled=!1;this._timeout=0};Sys.Net.WebRequest.prototype={add_completed:function(n){this._get_eventHandlerList().addHandler("completed",n)},remove_completed:function(n){this._get_eventHandlerList().removeHandler("completed",n)},completed:function(n){var t=Sys.Net.WebRequestManager._get_eventHandlerList().getHandler("completedRequest");t&&t(this._executor,n);t=this._get_eventHandlerList().getHandler("completed");t&&t(this._executor,n)},_get_eventHandlerList:function(){return this._events||(this._events=new Sys.EventHandlerList),this._events},get_url:function(){return this._url},set_url:function(n){this._url=n},get_headers:function(){return this._headers},get_httpVerb:function(){return this._httpVerb===null?this._body===null?"GET":"POST":this._httpVerb},set_httpVerb:function(n){this._httpVerb=n},get_body:function(){return this._body},set_body:function(n){this._body=n},get_userContext:function(){return this._userContext},set_userContext:function(n){this._userContext=n},get_executor:function(){return this._executor},set_executor:function(n){this._executor=n;this._executor._set_webRequest(this)},get_timeout:function(){return this._timeout===0?Sys.Net.WebRequestManager.get_defaultTimeout():this._timeout},set_timeout:function(n){this._timeout=n},getResolvedUrl:function(){return Sys.Net.WebRequest._resolveUrl(this._url)},invoke:function(){Sys.Net.WebRequestManager.executeRequest(this);this._invokeCalled=!0}};Sys.Net.WebRequest._resolveUrl=function(n,t){var i,r,u,f,e;return n&&n.indexOf("://")!==-1?n:(t&&t.length!==0||(i=document.getElementsByTagName("base")[0],t=i&&i.href&&i.href.length>0?i.href:document.URL),r=t.indexOf("?"),r!==-1&&(t=t.substr(0,r)),t=t.substr(0,t.lastIndexOf("/")+1),!n||n.length===0)?t:n.charAt(0)==="/"?(u=t.indexOf("://"),f=t.indexOf("/",u+3),t.substr(0,f)+n):(e=t.lastIndexOf("/"),t.substr(0,e+1)+n)};Sys.Net.WebRequest._createQueryString=function(n,t){var i,r,u,f,e;t||(t=encodeURIComponent);i=new Sys.StringBuilder;r=0;for(u in n)(f=n[u],typeof f!="function")&&(e=Sys.Serialization.JavaScriptSerializer.serialize(f),r!==0&&i.append("&"),i.append(u),i.append("="),i.append(t(e)),r++);return i.toString()};Sys.Net.WebRequest._createUrl=function(n,t){var i,r;return t?(i=Sys.Net.WebRequest._createQueryString(t),i.length>0?(r="?",n&&n.indexOf("?")!==-1&&(r="&"),n+r+i):n):n};Sys.Net.WebRequest.registerClass("Sys.Net.WebRequest");Sys.Net.WebServiceProxy=function(){};Sys.Net.WebServiceProxy.prototype={get_timeout:function(){return this._timeout},set_timeout:function(n){if(n<0)throw Error.argumentOutOfRange("value",n,Sys.Res.invalidTimeout);this._timeout=n},get_defaultUserContext:function(){return this._userContext},set_defaultUserContext:function(n){this._userContext=n},get_defaultSucceededCallback:function(){return this._succeeded},set_defaultSucceededCallback:function(n){this._succeeded=n},get_defaultFailedCallback:function(){return this._failed},set_defaultFailedCallback:function(n){this._failed=n},get_path:function(){return this._path},set_path:function(n){this._path=n},_invoke:function(n,t,i,r,u,f,e){return(u===null||typeof u=="undefined")&&(u=this.get_defaultSucceededCallback()),(f===null||typeof f=="undefined")&&(f=this.get_defaultFailedCallback()),(e===null||typeof e=="undefined")&&(e=this.get_defaultUserContext()),Sys.Net.WebServiceProxy.invoke(n,t,i,r,u,f,e,this.get_timeout())}};Sys.Net.WebServiceProxy.registerClass("Sys.Net.WebServiceProxy");Sys.Net.WebServiceProxy.invoke=function(n,t,i,r,u,f,e,o){function l(n){var r,i,o,h,s,c;if(n.get_responseAvailable()){r=n.get_statusCode();i=null;try{o=n.getResponseHeader("Content-Type");i=o.startsWith("application/json")?n.get_object():o.startsWith("text/xml")?n.get_xml():n.get_responseData()}catch(l){}h=n.getResponseHeader("jsonerror");s=h==="true";s?i&&(i=new Sys.Net.WebServiceError(!1,i.Message,i.StackTrace,i.ExceptionType)):o.startsWith("application/json")&&(i=i.d);r<200||r>=300||s?f&&(i&&s||(i=new Sys.Net.WebServiceError(!1,String.format(Sys.Res.webServiceFailedNoMsg,t),"","")),i._statusCode=r,f(i,e,t)):u&&u(i,e,t)}else c=n.get_timedOut()?String.format(Sys.Res.webServiceTimedOut,t):String.format(Sys.Res.webServiceFailedNoMsg,t),f&&f(new Sys.Net.WebServiceError(n.get_timedOut(),c,"",""),e,t)}var s=new Sys.Net.WebRequest,c,h;return s.get_headers()["Content-Type"]="application/json; charset=utf-8",r||(r={}),c=r,i&&c||(c={}),s.set_url(Sys.Net.WebRequest._createUrl(n+"/"+encodeURIComponent(t),c)),h=null,i||(h=Sys.Serialization.JavaScriptSerializer.serialize(r),h==="{}"&&(h="")),s.set_body(h),s.add_completed(l),o&&o>0&&s.set_timeout(o),s.invoke(),s};Sys.Net.WebServiceProxy._generateTypedConstructor=function(n){return function(t){if(t)for(var i in t)this[i]=t[i];this.__type=n}};Sys.Net.WebServiceError=function(n,t,i,r){this._timedOut=n;this._message=t;this._stackTrace=i;this._exceptionType=r;this._statusCode=-1};Sys.Net.WebServiceError.prototype={get_timedOut:function(){return this._timedOut},get_statusCode:function(){return this._statusCode},get_message:function(){return this._message},get_stackTrace:function(){return this._stackTrace},get_exceptionType:function(){return this._exceptionType}};Sys.Net.WebServiceError.registerClass("Sys.Net.WebServiceError");Type.registerNamespace("Sys.Services");Sys.Services._ProfileService=function(){Sys.Services._ProfileService.initializeBase(this);this.properties={}};Sys.Services._ProfileService.DefaultWebServicePath="";Sys.Services._ProfileService.prototype={_defaultLoadCompletedCallback:null,_defaultSaveCompletedCallback:null,_path:"",_timeout:0,get_defaultLoadCompletedCallback:function(){return this._defaultLoadCompletedCallback},set_defaultLoadCompletedCallback:function(n){this._defaultLoadCompletedCallback=n},get_defaultSaveCompletedCallback:function(){return this._defaultSaveCompletedCallback},set_defaultSaveCompletedCallback:function(n){this._defaultSaveCompletedCallback=n},get_path:function(){return this._path||""},load:function(n,t,i,r){var u,f;n?(f="GetPropertiesForCurrentUser",u={properties:this._clonePropertyNames(n),authenticatedUserOnly:!1}):(f="GetAllPropertiesForCurrentUser",u={authenticatedUserOnly:!1});this._invoke(this._get_path(),f,!1,u,Function.createDelegate(this,this._onLoadComplete),Function.createDelegate(this,this._onLoadFailed),[t,i,r])},save:function(n,t,i,r){var u=this._flattenProperties(n,this.properties);this._invoke(this._get_path(),"SetPropertiesForCurrentUser",!1,{values:u.value,authenticatedUserOnly:!1},Function.createDelegate(this,this._onSaveComplete),Function.createDelegate(this,this._onSaveFailed),[t,i,r,u.count])},_clonePropertyNames:function(n){for(var t,r=[],u={},i=0;i<n.length;i++)t=n[i],u[t]||(Array.add(r,t),u[t]=!0);return r},_flattenProperties:function(n,t,i){var r={},u,f,o=0,e,s,h,c,l;if(n&&n.length===0)return{value:r,count:0};for(e in t)if(u=t[e],f=i?i+"."+e:e,Sys.Services.ProfileGroup.isInstanceOfType(u)){s=this._flattenProperties(n,u,f);h=s.value;o+=s.count;for(c in h)l=h[c],r[c]=l}else n&&Array.indexOf(n,f)===-1||(r[f]=u,o++);return{value:r,count:o}},_get_path:function(){var n=this.get_path();if(n.length||(n=Sys.Services._ProfileService.DefaultWebServicePath),!n||!n.length)throw Error.invalidOperation(Sys.Res.servicePathNotSet);return n},_onLoadComplete:function(n,t,i){var r,u,f,e;if(typeof n!="object")throw Error.invalidOperation(String.format(Sys.Res.webServiceInvalidReturnType,i,"Object"));r=this._unflattenProperties(n);for(u in r)this.properties[u]=r[u];f=t[0]||this.get_defaultLoadCompletedCallback()||this.get_defaultSucceededCallback();f&&(e=t[2]||this.get_defaultUserContext(),f(n.length,e,"Sys.Services.ProfileService.load"))},_onLoadFailed:function(n,t){var i=t[1]||this.get_defaultFailedCallback(),r;i&&(r=t[2]||this.get_defaultUserContext(),i(n,r,"Sys.Services.ProfileService.load"))},_onSaveComplete:function(n,t,i){var r=t[3],u,f;if(n!==null)if(n instanceof Array)r-=n.length;else if(typeof n=="number")r=n;else throw Error.invalidOperation(String.format(Sys.Res.webServiceInvalidReturnType,i,"Array"));u=t[0]||this.get_defaultSaveCompletedCallback()||this.get_defaultSucceededCallback();u&&(f=t[2]||this.get_defaultUserContext(),u(r,f,"Sys.Services.ProfileService.save"))},_onSaveFailed:function(n,t){var i=t[1]||this.get_defaultFailedCallback(),r;i&&(r=t[2]||this.get_defaultUserContext(),i(n,r,"Sys.Services.ProfileService.save"))},_unflattenProperties:function(n){var r={},u,f,o=0,t,e,i;for(t in n)o++,f=n[t],u=t.indexOf("."),u!==-1?(e=t.substr(0,u),t=t.substr(u+1),i=r[e],i&&Sys.Services.ProfileGroup.isInstanceOfType(i)||(i=new Sys.Services.ProfileGroup,r[e]=i),i[t]=f):r[t]=f;return n.length=o,r}};Sys.Services._ProfileService.registerClass("Sys.Services._ProfileService",Sys.Net.WebServiceProxy);Sys.Services.ProfileService=new Sys.Services._ProfileService;Sys.Services.ProfileGroup=function(n){if(n)for(var t in n)this[t]=n[t]};Sys.Services.ProfileGroup.registerClass("Sys.Services.ProfileGroup");Sys.Services._AuthenticationService=function(){Sys.Services._AuthenticationService.initializeBase(this)};Sys.Services._AuthenticationService.DefaultWebServicePath="";Sys.Services._AuthenticationService.prototype={_defaultLoginCompletedCallback:null,_defaultLogoutCompletedCallback:null,_path:"",_timeout:0,_authenticated:!1,get_defaultLoginCompletedCallback:function(){return this._defaultLoginCompletedCallback},set_defaultLoginCompletedCallback:function(n){this._defaultLoginCompletedCallback=n},get_defaultLogoutCompletedCallback:function(){return this._defaultLogoutCompletedCallback},set_defaultLogoutCompletedCallback:function(n){this._defaultLogoutCompletedCallback=n},get_isLoggedIn:function(){return this._authenticated},get_path:function(){return this._path||""},login:function(n,t,i,r,u,f,e,o){this._invoke(this._get_path(),"Login",!1,{userName:n,password:t,createPersistentCookie:i},Function.createDelegate(this,this._onLoginComplete),Function.createDelegate(this,this._onLoginFailed),[n,t,i,r,u,f,e,o])},logout:function(n,t,i,r){this._invoke(this._get_path(),"Logout",!1,{},Function.createDelegate(this,this._onLogoutComplete),Function.createDelegate(this,this._onLogoutFailed),[n,t,i,r])},_get_path:function(){var n=this.get_path();if(n.length||(n=Sys.Services._AuthenticationService.DefaultWebServicePath),!n||!n.length)throw Error.invalidOperation(Sys.Res.servicePathNotSet);return n},_onLoginComplete:function(n,t,i){if(typeof n!="boolean")throw Error.invalidOperation(String.format(Sys.Res.webServiceInvalidReturnType,i,"Boolean"));var u=t[4],f=t[7]||this.get_defaultUserContext(),r=t[5]||this.get_defaultLoginCompletedCallback()||this.get_defaultSucceededCallback();n?(this._authenticated=!0,r&&r(!0,f,"Sys.Services.AuthenticationService.login"),typeof u!="undefined"&&u!==null&&(window.location.href=u)):r&&r(!1,f,"Sys.Services.AuthenticationService.login")},_onLoginFailed:function(n,t){var i=t[6]||this.get_defaultFailedCallback(),r;i&&(r=t[7]||this.get_defaultUserContext(),i(n,r,"Sys.Services.AuthenticationService.login"))},_onLogoutComplete:function(n,t,i){if(n!==null)throw Error.invalidOperation(String.format(Sys.Res.webServiceInvalidReturnType,i,"null"));var r=t[0],f=t[3]||this.get_defaultUserContext(),u=t[1]||this.get_defaultLogoutCompletedCallback()||this.get_defaultSucceededCallback();this._authenticated=!1;u&&u(null,f,"Sys.Services.AuthenticationService.logout");r?window.location.href=r:window.location.reload()},_onLogoutFailed:function(n,t){var i=t[2]||this.get_defaultFailedCallback();i&&i(n,t[3],"Sys.Services.AuthenticationService.logout")},_setAuthenticated:function(n){this._authenticated=n}};Sys.Services._AuthenticationService.registerClass("Sys.Services._AuthenticationService",Sys.Net.WebServiceProxy);Sys.Services.AuthenticationService=new Sys.Services._AuthenticationService;Sys.Services._RoleService=function(){Sys.Services._RoleService.initializeBase(this);this._roles=[]};Sys.Services._RoleService.DefaultWebServicePath="";Sys.Services._RoleService.prototype={_defaultLoadCompletedCallback:null,_rolesIndex:null,_timeout:0,_path:"",get_defaultLoadCompletedCallback:function(){return this._defaultLoadCompletedCallback},set_defaultLoadCompletedCallback:function(n){this._defaultLoadCompletedCallback=n},get_path:function(){return this._path||""},get_roles:function(){return Array.clone(this._roles)},isUserInRole:function(n){var t=this._get_rolesIndex()[n.trim().toLowerCase()];return!!t},load:function(n,t,i){Sys.Net.WebServiceProxy.invoke(this._get_path(),"GetRolesForCurrentUser",!1,{},Function.createDelegate(this,this._onLoadComplete),Function.createDelegate(this,this._onLoadFailed),[n,t,i],this.get_timeout())},_get_path:function(){var n=this.get_path();if(n&&n.length||(n=Sys.Services._RoleService.DefaultWebServicePath),!n||!n.length)throw Error.invalidOperation(Sys.Res.servicePathNotSet);return n},_get_rolesIndex:function(){var t,n;if(!this._rolesIndex){for(t={},n=0;n<this._roles.length;n++)t[this._roles[n].toLowerCase()]=!0;this._rolesIndex=t}return this._rolesIndex},_onLoadComplete:function(n,t,i){var r,u,f;if(n&&!(n instanceof Array))throw Error.invalidOperation(String.format(Sys.Res.webServiceInvalidReturnType,i,"Array"));this._roles=n;this._rolesIndex=null;r=t[0]||this.get_defaultLoadCompletedCallback()||this.get_defaultSucceededCallback();r&&(u=t[2]||this.get_defaultUserContext(),f=Array.clone(n),r(f,u,"Sys.Services.RoleService.load"))},_onLoadFailed:function(n,t){var i=t[1]||this.get_defaultFailedCallback(),r;i&&(r=t[2]||this.get_defaultUserContext(),i(n,r,"Sys.Services.RoleService.load"))}};Sys.Services._RoleService.registerClass("Sys.Services._RoleService",Sys.Net.WebServiceProxy);Sys.Services.RoleService=new Sys.Services._RoleService;Type.registerNamespace("Sys.Serialization");Sys.Serialization.JavaScriptSerializer=function(){};Sys.Serialization.JavaScriptSerializer.registerClass("Sys.Serialization.JavaScriptSerializer");Sys.Serialization.JavaScriptSerializer._serverTypeFieldName="__type";Sys.Serialization.JavaScriptSerializer._stringRegEx=new RegExp('["\\b\\f\\n\\r\\t\\\\\\x00-\\x1F]',"i");Sys.Serialization.JavaScriptSerializer._dateRegEx=new RegExp('(^|[^\\\\])\\"\\\\/Date\\((-?[0-9]+)(?:[a-zA-Z]|(?:\\+|-)[0-9]{4})?\\)\\\\/\\"',"g");Sys.Serialization.JavaScriptSerializer._jsonRegEx=new RegExp("[^,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t]","g");Sys.Serialization.JavaScriptSerializer._jsonStringRegEx=new RegExp('"(\\\\.|[^"\\\\])*"',"g");Sys.Serialization.JavaScriptSerializer._serializeBooleanWithBuilder=function(n,t){t.append(n.toString())};Sys.Serialization.JavaScriptSerializer._serializeNumberWithBuilder=function(n,t){if(isFinite(n))t.append(String(n));else throw Error.invalidOperation(Sys.Res.cannotSerializeNonFiniteNumbers);};Sys.Serialization.JavaScriptSerializer._serializeStringWithBuilder=function(n,t){var u,r;if(t.append('"'),Sys.Serialization.JavaScriptSerializer._stringRegEx.test(n))for(u=n.length,i=0;i<u;++i)if(r=n.charAt(i),r>=" ")(r==="\\"||r==='"')&&t.append("\\"),t.append(r);else switch(r){case"\b":t.append("\\b");break;case"\f":t.append("\\f");break;case"\n":t.append("\\n");break;case"\r":t.append("\\r");break;case"\t":t.append("\\t");break;default:t.append("\\u00");r.charCodeAt()<16&&t.append("0");t.append(r.charCodeAt().toString(16))}else t.append(n);t.append('"')};Sys.Serialization.JavaScriptSerializer._serializeWithBuilder=function(n,t,i,r){var u,f,e,o,h,s;switch(typeof n){case"object":if(n)if(Number.isInstanceOfType(n))Sys.Serialization.JavaScriptSerializer._serializeNumberWithBuilder(n,t);else if(Boolean.isInstanceOfType(n))Sys.Serialization.JavaScriptSerializer._serializeBooleanWithBuilder(n,t);else if(String.isInstanceOfType(n))Sys.Serialization.JavaScriptSerializer._serializeStringWithBuilder(n,t);else if(Array.isInstanceOfType(n)){for(t.append("["),u=0;u<n.length;++u)u>0&&t.append(","),Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(n[u],t,!1,r);t.append("]")}else{if(Date.isInstanceOfType(n)){t.append('"\\/Date(');t.append(n.getTime());t.append(')\\/"');break}f=[];e=0;for(o in n)o.startsWith("$")||(o===Sys.Serialization.JavaScriptSerializer._serverTypeFieldName&&e!==0?(f[e++]=f[0],f[0]=o):f[e++]=o);for(i&&f.sort(),t.append("{"),h=!1,u=0;u<e;u++)s=n[f[u]],typeof s!="undefined"&&typeof s!="function"&&(h?t.append(","):h=!0,Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(f[u],t,i,r),t.append(":"),Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(s,t,i,r));t.append("}")}else t.append("null");break;case"number":Sys.Serialization.JavaScriptSerializer._serializeNumberWithBuilder(n,t);break;case"string":Sys.Serialization.JavaScriptSerializer._serializeStringWithBuilder(n,t);break;case"boolean":Sys.Serialization.JavaScriptSerializer._serializeBooleanWithBuilder(n,t);break;default:t.append("null")}};Sys.Serialization.JavaScriptSerializer.serialize=function(n){var t=new Sys.StringBuilder;return Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(n,t,!1),t.toString()};Sys.Serialization.JavaScriptSerializer.deserialize=function(n,t){if(n.length===0)throw Error.argument("data",Sys.Res.cannotDeserializeEmptyString);try{var i=n.replace(Sys.Serialization.JavaScriptSerializer._dateRegEx,"$1new Date($2)");if(t&&Sys.Serialization.JavaScriptSerializer._jsonRegEx.test(i.replace(Sys.Serialization.JavaScriptSerializer._jsonStringRegEx,"")))throw null;return eval("("+i+")")}catch(r){throw Error.argument("data",Sys.Res.cannotDeserializeInvalidJson);}};Sys.CultureInfo=function(n,t,i){this.name=n;this.numberFormat=t;this.dateTimeFormat=i};Sys.CultureInfo.prototype={_getDateTimeFormats:function(){if(!this._dateTimeFormats){var n=this.dateTimeFormat;this._dateTimeFormats=[n.MonthDayPattern,n.YearMonthPattern,n.ShortDatePattern,n.ShortTimePattern,n.LongDatePattern,n.LongTimePattern,n.FullDateTimePattern,n.RFC1123Pattern,n.SortableDateTimePattern,n.UniversalSortableDateTimePattern]}return this._dateTimeFormats},_getMonthIndex:function(n){return this._upperMonths||(this._upperMonths=this._toUpperArray(this.dateTimeFormat.MonthNames)),Array.indexOf(this._upperMonths,this._toUpper(n))},_getAbbrMonthIndex:function(n){return this._upperAbbrMonths||(this._upperAbbrMonths=this._toUpperArray(this.dateTimeFormat.AbbreviatedMonthNames)),Array.indexOf(this._upperAbbrMonths,this._toUpper(n))},_getDayIndex:function(n){return this._upperDays||(this._upperDays=this._toUpperArray(this.dateTimeFormat.DayNames)),Array.indexOf(this._upperDays,this._toUpper(n))},_getAbbrDayIndex:function(n){return this._upperAbbrDays||(this._upperAbbrDays=this._toUpperArray(this.dateTimeFormat.AbbreviatedDayNames)),Array.indexOf(this._upperAbbrDays,this._toUpper(n))},_toUpperArray:function(n){for(var i=[],t=0,r=n.length;t<r;t++)i[t]=this._toUpper(n[t]);return i},_toUpper:function(n){return n.split("").join(" ").toUpperCase()}};Sys.CultureInfo._parse=function(n){var t=Sys.Serialization.JavaScriptSerializer.deserialize(n);return new Sys.CultureInfo(t.name,t.numberFormat,t.dateTimeFormat)};Sys.CultureInfo.registerClass("Sys.CultureInfo");Sys.CultureInfo.InvariantCulture=Sys.CultureInfo._parse('{"name":"","numberFormat":{"CurrencyDecimalDigits":2,"CurrencyDecimalSeparator":".","IsReadOnly":true,"CurrencyGroupSizes":[3],"NumberGroupSizes":[3],"PercentGroupSizes":[3],"CurrencyGroupSeparator":",","CurrencySymbol":"","NaNSymbol":"NaN","CurrencyNegativePattern":0,"NumberNegativePattern":1,"PercentPositivePattern":0,"PercentNegativePattern":0,"NegativeInfinitySymbol":"-Infinity","NegativeSign":"-","NumberDecimalDigits":2,"NumberDecimalSeparator":".","NumberGroupSeparator":",","CurrencyPositivePattern":0,"PositiveInfinitySymbol":"Infinity","PositiveSign":"+","PercentDecimalDigits":2,"PercentDecimalSeparator":".","PercentGroupSeparator":",","PercentSymbol":"%","PerMilleSymbol":"","NativeDigits":["0","1","2","3","4","5","6","7","8","9"],"DigitSubstitution":1},"dateTimeFormat":{"AMDesignator":"AM","Calendar":{"MinSupportedDateTime":"@-62135568000000@","MaxSupportedDateTime":"@253402300799999@","AlgorithmType":1,"CalendarType":1,"Eras":[1],"TwoDigitYearMax":2029,"IsReadOnly":true},"DateSeparator":"/","FirstDayOfWeek":0,"CalendarWeekRule":0,"FullDateTimePattern":"dddd, dd MMMM yyyy HH:mm:ss","LongDatePattern":"dddd, dd MMMM yyyy","LongTimePattern":"HH:mm:ss","MonthDayPattern":"MMMM dd","PMDesignator":"PM","RFC1123Pattern":"ddd, dd MMM yyyy HH\':\'mm\':\'ss \'GMT\'","ShortDatePattern":"MM/dd/yyyy","ShortTimePattern":"HH:mm","SortableDateTimePattern":"yyyy\'-\'MM\'-\'dd\'T\'HH\':\'mm\':\'ss","TimeSeparator":":","UniversalSortableDateTimePattern":"yyyy\'-\'MM\'-\'dd HH\':\'mm\':\'ss\'Z\'","YearMonthPattern":"yyyy MMMM","AbbreviatedDayNames":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"ShortestDayNames":["Su","Mo","Tu","We","Th","Fr","Sa"],"DayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"AbbreviatedMonthNames":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"MonthNames":["January","February","March","April","May","June","July","August","September","October","November","December",""],"IsReadOnly":true,"NativeCalendarName":"Gregorian Calendar","AbbreviatedMonthGenitiveNames":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"MonthGenitiveNames":["January","February","March","April","May","June","July","August","September","October","November","December",""]}}');typeof __cultureInfo=="undefined"&&(__cultureInfo='{"name":"en-US","numberFormat":{"CurrencyDecimalDigits":2,"CurrencyDecimalSeparator":".","IsReadOnly":false,"CurrencyGroupSizes":[3],"NumberGroupSizes":[3],"PercentGroupSizes":[3],"CurrencyGroupSeparator":",","CurrencySymbol":"$","NaNSymbol":"NaN","CurrencyNegativePattern":0,"NumberNegativePattern":1,"PercentPositivePattern":0,"PercentNegativePattern":0,"NegativeInfinitySymbol":"-Infinity","NegativeSign":"-","NumberDecimalDigits":2,"NumberDecimalSeparator":".","NumberGroupSeparator":",","CurrencyPositivePattern":0,"PositiveInfinitySymbol":"Infinity","PositiveSign":"+","PercentDecimalDigits":2,"PercentDecimalSeparator":".","PercentGroupSeparator":",","PercentSymbol":"%","PerMilleSymbol":"","NativeDigits":["0","1","2","3","4","5","6","7","8","9"],"DigitSubstitution":1},"dateTimeFormat":{"AMDesignator":"AM","Calendar":{"MinSupportedDateTime":"@-62135568000000@","MaxSupportedDateTime":"@253402300799999@","AlgorithmType":1,"CalendarType":1,"Eras":[1],"TwoDigitYearMax":2029,"IsReadOnly":false},"DateSeparator":"/","FirstDayOfWeek":0,"CalendarWeekRule":0,"FullDateTimePattern":"dddd, MMMM dd, yyyy h:mm:ss tt","LongDatePattern":"dddd, MMMM dd, yyyy","LongTimePattern":"h:mm:ss tt","MonthDayPattern":"MMMM dd","PMDesignator":"PM","RFC1123Pattern":"ddd, dd MMM yyyy HH\':\'mm\':\'ss \'GMT\'","ShortDatePattern":"M/d/yyyy","ShortTimePattern":"h:mm tt","SortableDateTimePattern":"yyyy\'-\'MM\'-\'dd\'T\'HH\':\'mm\':\'ss","TimeSeparator":":","UniversalSortableDateTimePattern":"yyyy\'-\'MM\'-\'dd HH\':\'mm\':\'ss\'Z\'","YearMonthPattern":"MMMM, yyyy","AbbreviatedDayNames":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"ShortestDayNames":["Su","Mo","Tu","We","Th","Fr","Sa"],"DayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"AbbreviatedMonthNames":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"MonthNames":["January","February","March","April","May","June","July","August","September","October","November","December",""],"IsReadOnly":false,"NativeCalendarName":"Gregorian Calendar","AbbreviatedMonthGenitiveNames":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"MonthGenitiveNames":["January","February","March","April","May","June","July","August","September","October","November","December",""]}}');Sys.CultureInfo.CurrentCulture=Sys.CultureInfo._parse(__cultureInfo);delete __cultureInfo;Sys.UI.Behavior=function(n){Sys.UI.Behavior.initializeBase(this);this._element=n;var t=n._behaviors;t?t[t.length]=this:n._behaviors=[this]};Sys.UI.Behavior.prototype={_name:null,get_element:function(){return this._element},get_id:function(){var n=Sys.UI.Behavior.callBaseMethod(this,"get_id");return n?n:!this._element||!this._element.id?"":this._element.id+"$"+this.get_name()},get_name:function(){if(this._name)return this._name;var n=Object.getTypeName(this),t=n.lastIndexOf(".");return t!=-1&&(n=n.substr(t+1)),this.get_isInitialized()||(this._name=n),n},set_name:function(n){this._name=n},initialize:function(){Sys.UI.Behavior.callBaseMethod(this,"initialize");var n=this.get_name();n&&(this._element[n]=this)},dispose:function(){if(Sys.UI.Behavior.callBaseMethod(this,"dispose"),this._element){var n=this.get_name();n&&(this._element[n]=null);Array.remove(this._element._behaviors,this);delete this._element}}};Sys.UI.Behavior.registerClass("Sys.UI.Behavior",Sys.Component);Sys.UI.Behavior.getBehaviorByName=function(n,t){var i=n[t];return i&&Sys.UI.Behavior.isInstanceOfType(i)?i:null};Sys.UI.Behavior.getBehaviors=function(n){return n._behaviors?Array.clone(n._behaviors):[]};Sys.UI.Behavior.getBehaviorsByType=function(n,t){var r=n._behaviors,u=[],i,f;if(r)for(i=0,f=r.length;i<f;i++)t.isInstanceOfType(r[i])&&(u[u.length]=r[i]);return u};Sys.UI.VisibilityMode=function(){throw Error.notImplemented();};Sys.UI.VisibilityMode.prototype={hide:0,collapse:1};Sys.UI.VisibilityMode.registerEnum("Sys.UI.VisibilityMode");Sys.UI.Control=function(n){Sys.UI.Control.initializeBase(this);this._element=n;n.control=this};Sys.UI.Control.prototype={_parent:null,_visibilityMode:Sys.UI.VisibilityMode.hide,get_element:function(){return this._element},get_id:function(){return this._element?this._element.id:""},set_id:function(){throw Error.invalidOperation(Sys.Res.cantSetId);},get_parent:function(){if(this._parent)return this._parent;if(!this._element)return null;for(var n=this._element.parentNode;n;){if(n.control)return n.control;n=n.parentNode}return null},set_parent:function(n){this._parent=n},get_visibilityMode:function(){return Sys.UI.DomElement.getVisibilityMode(this._element)},set_visibilityMode:function(n){Sys.UI.DomElement.setVisibilityMode(this._element,n)},get_visible:function(){return Sys.UI.DomElement.getVisible(this._element)},set_visible:function(n){Sys.UI.DomElement.setVisible(this._element,n)},addCssClass:function(n){Sys.UI.DomElement.addCssClass(this._element,n)},dispose:function(){Sys.UI.Control.callBaseMethod(this,"dispose");this._element&&(this._element.control=undefined,delete this._element);this._parent&&delete this._parent},onBubbleEvent:function(){return!1},raiseBubbleEvent:function(n,t){for(var i=this.get_parent();i;){if(i.onBubbleEvent(n,t))return;i=i.get_parent()}},removeCssClass:function(n){Sys.UI.DomElement.removeCssClass(this._element,n)},toggleCssClass:function(n){Sys.UI.DomElement.toggleCssClass(this._element,n)}};Sys.UI.Control.registerClass("Sys.UI.Control",Sys.Component);Type.registerNamespace("Sys");Sys.Res={argumentInteger:"Value must be an integer.",scriptLoadMultipleCallbacks:"The script '{0}' contains multiple calls to Sys.Application.notifyScriptLoaded(). Only one is allowed.",invokeCalledTwice:"Cannot call invoke more than once.",webServiceFailed:"The server method '{0}' failed with the following error: {1}",webServiceInvalidJsonWrapper:"The server method '{0}' returned invalid data. The 'd' property is missing from the JSON wrapper.",argumentType:"Object cannot be converted to the required type.",argumentNull:"Value cannot be null.",controlCantSetId:"The id property can't be set on a control.",formatBadFormatSpecifier:"Format specifier was invalid.",webServiceFailedNoMsg:"The server method '{0}' failed.",argumentDomElement:"Value must be a DOM element.",invalidExecutorType:"Could not create a valid Sys.Net.WebRequestExecutor from: {0}.",cannotCallBeforeResponse:"Cannot call {0} when responseAvailable is false.",actualValue:"Actual value was {0}.",enumInvalidValue:"'{0}' is not a valid value for enum {1}.",scriptLoadFailed:"The script '{0}' could not be loaded.",parameterCount:"Parameter count mismatch.",cannotDeserializeEmptyString:"Cannot deserialize empty string.",formatInvalidString:"Input string was not in a correct format.",invalidTimeout:"Value must be greater than or equal to zero.",cannotAbortBeforeStart:"Cannot abort when executor has not started.",argument:"Value does not fall within the expected range.",cannotDeserializeInvalidJson:"Cannot deserialize. The data does not correspond to valid JSON.",invalidHttpVerb:"httpVerb cannot be set to an empty or null string.",nullWebRequest:"Cannot call executeRequest with a null webRequest.",eventHandlerInvalid:"Handler was not added through the Sys.UI.DomEvent.addHandler method.",cannotSerializeNonFiniteNumbers:"Cannot serialize non finite numbers.",argumentUndefined:"Value cannot be undefined.",webServiceInvalidReturnType:"The server method '{0}' returned an invalid type. Expected type: {1}",servicePathNotSet:"The path to the web service has not been set.",argumentTypeWithTypes:"Object of type '{0}' cannot be converted to type '{1}'.",cannotCallOnceStarted:"Cannot call {0} once started.",badBaseUrl1:"Base URL does not contain ://.",badBaseUrl2:"Base URL does not contain another /.",badBaseUrl3:"Cannot find last / in base URL.",setExecutorAfterActive:"Cannot set executor after it has become active.",paramName:"Parameter name: {0}",cannotCallOutsideHandler:"Cannot call {0} outside of a completed event handler.",cannotSerializeObjectWithCycle:"Cannot serialize object with cyclic reference within child properties.",format:"One of the identified items was in an invalid format.",assertFailedCaller:"Assertion Failed: {0}\r\nat {1}",argumentOutOfRange:"Specified argument was out of the range of valid values.",webServiceTimedOut:"The server method '{0}' timed out.",notImplemented:"The method or operation is not implemented.",assertFailed:"Assertion Failed: {0}",invalidOperation:"Operation is not valid due to the current state of the object.",breakIntoDebugger:"{0}\r\n\r\nBreak into debugger?"};typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded();getComputedStyle=window.getComputedStyle?window.getComputedStyle:function(n){return n.currentStyle};var __BROWSER_IS_TOUCH_ENABLED="ontouchstart"in window,__BROWSER_EVENT_MOUSEDOWN=__BROWSER_IS_TOUCH_ENABLED?"touchstart":"mousedown",__BROWSER_EVENT_ONCLICK=__BROWSER_IS_TOUCH_ENABLED?"ontouchstart":"onclick",__BROWSER_EVENT_MOUSEMOVE=__BROWSER_IS_TOUCH_ENABLED?"touchmove":"mousemove",__BROWSER_EVENT_MOUSEUP=__BROWSER_IS_TOUCH_ENABLED?"touchend":"mouseup",__BROWSER_EVENT_DOUBLECLICK="dblclick",__BROWSER_EVENT_SELECTSTART="selectstart",__BROWSER_EVENT_DRAGSTART="dragstart",__DOUBLETAP_DURATION=400,SCORM12_ErrorCode={NoError:"0",GeneralException:"101",ArgumentError:"201",ElementCannotHaveChildren:"202",ElementNotAnArray:"203",NotInitialized:"301",NotImplementedError:"401",InvalidSetValue:"402",ElementIsReadOnly:"403",ReadOnlyDataModelElement:"404",IncorrectDataType:"405"};var API=new Scorm12API,_Debug=!1,_NoError=0,_NotInitialized=122,apiHandle=null;MAX_PARENTS_TO_SEARCH=500;var ConditionRuleType={Pre:0,Post:1,Exit:2},ConditionCombination={All:0,Any:1},Condition={Satisfied:0,ObjectiveStatusKnown:1,ObjectiveMeasureKnown:2,ObjectiveMeasureGreaterThan:3,ObjectiveMeasureLessThan:4,Completed:5,ActivityProgressKnown:6,Attempted:7,AttemptLimitExceeded:8,TimeLimitExceeded:9,OutsideAvailableTimeRange:10,Always:11,Never:12},Operator={Not:0,NoOp:1},RuleAction={Undefined:0,Skip:1,Disabled:2,HiddenFromChoice:3,StopForwardTraversal:4,ExitParent:5,ExitAll:6,Retry:7,RetryAll:8,Continue:9,Previous:10,Exit:11};var HideLmsUi={Previous:0,Continue:1,Exit:2,ExitAll:3,Abandon:4,AbandonAll:5,SuspendAll:6},RollupAction={Satisfied:0,NotSatisfied:1,Completed:2,Incomplete:3},RollupRuleToken={All:0,Any:1,None:2,AtLeastCount:3,AtLeastPercent:4},Timing={Never:0,Once:1,OnEachNewAttempt:2},RollupConsiderationsToken={Always:0,IfAttempted:1,IfNotSkipped:2,IfNotSuspended:3};NavRequest={None:0,Start:1,ResumeAll:2,Continue:3,Previous:4,Forward:5,Backward:6,Choice:7,Jump:8,Exit:9,ExitAll:10,SuspendAll:11,Abandon:12,AbandonAll:13,ExitParent:14,Retry:15};TraversalDirection={None:0,Backward:1,Forward:2};Result={Unknown:-1,False:0,True:1};Exception={None:"None",NB_2_1_1:"Current Activity is already defined / Sequencing session has already begun",NB_2_1_2:"Current Activity is not defined / Sequencing session has not begun",NB_2_1_3:"Suspended Activity is not defined",NB_2_1_4:"Flow Sequencing Control Mode violation",NB_2_1_5:"Flow or Forward Only Sequencing Control Mode violation",NB_2_1_6:"No activity is previous to the root",NB_2_1_7:"Unsupported navigation request",NB_2_1_8:"Choice Exit Sequencing Control Mode violation",NB_2_1_9:"No activities to consider",NB_2_1_10:"Choice Sequencing Control Mode violation",NB_2_1_11:"Target activity does not exist",NB_2_1_12:"Current Activity already terminated",NB_2_1_13:"Undefined navigation request",TB_2_3_1:"Current Activity is not defined / Sequencing session has not begun",TB_2_3_2:"Current Activity already terminated",TB_2_3_3:"Cannot suspend an inactive root",TB_2_3_4:"Activity tree root has no parent",TB_2_3_5:"Nothing to suspend; No active activities",TB_2_3_6:"Nothing to abandon; No active activities",TB_2_3_7:"Undefined termination request",SB_2_1_1:"Last activity in the tree",SB_2_1_2:"Cluster has no available children",SB_2_1_3:"No activity is previous to the root",SB_2_1_4:"Forward Only Sequencing Control Mode violation",SB_2_2_1:"Flow Sequencing Control Mode violation",SB_2_2_2:"Activity unavailable",SB_2_4_1:"Forward Traversal Blocked",SB_2_4_2:"Forward Only Sequencing Control Mode violation",SB_2_4_3:"No activity is previous to the root",SB_2_5_1:"Current Activity is defined / Sequencing session already begun",SB_2_6_1:"Current Activity is defined / Sequencing session already begun",SB_2_6_2:"No Suspended Activity defined",SB_2_7_1:"Current Activity is not defined / Sequencing session has not begun",SB_2_7_2:"Flow Sequencing Control Mode violation",SB_2_8_1:"Current Activity is not defined / Sequencing session has not begun",SB_2_8_2:"Flow Sequencing Control Mode violation",SB_2_9_1:"No target for Choice",SB_2_9_2:"Target activity does not exist or is unavailable",SB_2_9_3:"Target activity hidden from choice",SB_2_9_4:"Choice Sequencing Control Mode violation",SB_2_9_5:"No activities to consider",SB_2_9_6:"Unable to activate target; target is not a child of the Current Activity",SB_2_9_7:"Choice Exit Sequencing Control Mode violation",SB_2_9_8:"Unable to choose target activity  constrained choice",SB_2_9_9:"Choice request prevented by Flow_only activity",SB_2_10_1:"Current Activity is not defined / Sequencing session has not begun",SB_2_10_2:"Current Activity is active or suspended",SB_2_10_3:"Flow Sequencing Control Mode violation",SB_2_11_1:"Current Activity is not defined / Sequencing session has not begun",SB_2_11_2:"Current Activity has not been terminated",SB_2_12_1:"Undefined sequencing request",SB_2_13_1:"Current Activity is not defined / Sequencing session has not begun",DB_1_1_1:"Cannot deliver a non-leaf activity",DB_1_1_2:"Nothing to deliver",DB_1_1_3:"Activity unavailable",DB_2_1:"Identified activity is already active"};Type.registerNamespace("Assima.Controls");Assima$Controls$Splitter.prototype.add_startMoving=function(n){this.get_events().addHandler("startMoving",n)};Assima$Controls$Splitter.prototype.remove_startMoving=function(n){this.get_events().removeHandler("startMoving",n)};Assima$Controls$Splitter.prototype.raiseStartMoving=function(){var n=this.get_events().getHandler("startMoving");n&&n(this,Sys.EventArgs.Empty)};Assima$Controls$Splitter.prototype.add_splitterMoved=function(n){this.get_events().addHandler("splitterMoved",n)};Assima$Controls$Splitter.prototype.remove_splitterMoved=function(n){this.get_events().removeHandler("splitterMoved",n)};Assima$Controls$Splitter.prototype.raiseSplitterMoved=function(n,t){var i=this.get_events().getHandler("splitterMoved");i&&i(this,new Assima$Controls$SplitterEventArgs(n,t))};Assima$Controls$Splitter.prototype.add_endMoving=function(n){this.get_events().addHandler("endMoving",n)};Assima$Controls$Splitter.prototype.remove_endMoving=function(n){this.get_events().removeHandler("endMoving",n)};Assima$Controls$Splitter.prototype.raiseEndMoving=function(){var n=this.get_events().getHandler("endMoving");n&&n(this,Sys.EventArgs.Empty)};Assima$Controls$Splitter.prototype.initialize=function(){Assima$Controls$Splitter.callBaseMethod(this,"initialize");$addHandler(this._element,__BROWSER_EVENT_MOUSEDOWN,this._touchStartHandler)};Assima$Controls$Splitter.prototype.dispose=function(){this._element&&$removeHandler(this._element,__BROWSER_EVENT_MOUSEDOWN,this._touchStartHandler);delete this._initialPaneSize;delete this._touchStartHandler;delete this._touchMoveHandler;delete this._touchEndHandler;delete this._dragStartHandler;delete this._selectStartHandler;Assima$Controls$Splitter.callBaseMethod(this,"dispose")};Assima$Controls$Splitter.prototype._onTouchStart=function(n){n.preventDefault();this.raiseStartMoving();$addHandler(document,__BROWSER_EVENT_MOUSEMOVE,this._touchMoveHandler);$addHandler(document,__BROWSER_EVENT_MOUSEUP,this._touchEndHandler);$addHandler(document,__BROWSER_EVENT_SELECTSTART,this._selectStartHandler);$addHandler(document,__BROWSER_EVENT_DRAGSTART,this._dragStartHandler)};Assima$Controls$Splitter.prototype._onTouchMove=function(n){if(__BROWSER_IS_TOUCH_ENABLED){var t=n.rawEvent;this.raiseSplitterMoved(t.touches[0].pageX,t.touches[0].pageY)}else this.raiseSplitterMoved(n.clientX,n.clientY)};Assima$Controls$Splitter.prototype._onTouchEnd=function(){this.raiseEndMoving();$removeHandler(document,__BROWSER_EVENT_MOUSEMOVE,this._touchMoveHandler);$removeHandler(document,__BROWSER_EVENT_MOUSEUP,this._touchEndHandler);$removeHandler(document,__BROWSER_EVENT_SELECTSTART,this._selectStartHandler);$removeHandler(document,__BROWSER_EVENT_DRAGSTART,this._dragStartHandler)};Assima$Controls$Splitter.prototype._onDragStart=function(n){n.stopPropagation();n.preventDefault()};Assima$Controls$Splitter.prototype._onSelectStart=function(n){n.stopPropagation();n.preventDefault()};Assima.Controls.Splitter=Assima$Controls$Splitter;Assima$Controls$Splitter.registerClass("Assima.Controls.Splitter",Sys.UI.Control);Assima$Controls$SplitterEventArgs=function(n,t){Assima$Controls$SplitterEventArgs.initializeBase(this);this.posX=n;this.posY=t};Assima.Controls.SplitterEventArgs=Assima$Controls$SplitterEventArgs;Assima$Controls$SplitterEventArgs.registerClass("Assima.Controls.SplitterEventArgs",Sys.EventArgs);typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded();Course||(Course={});Sys.Application.add_init(function(){var n="",t="";switch(Sys.Browser.agent){case Sys.Browser.InternetExplorer:n="ie";break;case Sys.Browser.Firefox:n="firefox";break;case Sys.Browser.Safari:n="safari";break;case Sys.Browser.Opera:n="opera"}t=n+Sys.Browser.version;document.documentElement.className+=" "+n+" "+t});Sys.Application.add_load(function(){document.body.className+=__BROWSER_IS_TOUCH_ENABLED?" touch":" notouch";Course._startDate=new Date;Course.initialize()});Course.Views={NotStarted:1,Suspended:2,Started:3,Saving:4,Loading:5,Running:6,Finished:7};Course.ItemType={Folder:0,CourseItem:1};ScormVariable={Entry:"cmi.entry",Exit:"cmi.exit",CompletionStatus:"cmi.completion_status",Duration:"cmi.session_time",LearnerFirstname:"cmi.learner_firstname",LearnerId:"cmi.learner_id",LessonLocation:"cmi.lesson_location",LeanerName:"cmi.learner_name",LearnerSurname:"cmi.learner_surname",SuspendData:"cmi.suspend_data",Interactions:{Count:"cmi.interactions._count",N:{Id:"cmi.interactions.{0}.id",Type:"cmi.interactions.{0}.type",Timestamp:"cmi.interactions.{0}.timestamp",CorrectResponses:{Count:"cmi.interactions.{0}.correct_responses._count",N:{Pattern:"cmi.interactions.{0}.correct_responses.{1}.pattern"}},LearnerResponse:"cmi.interactions.{0}.learner_response",Result:"cmi.interactions.{0}.result",Latency:"cmi.interactions.{0}.latency",Description:"cmi.interactions.{0}.description",Objectives:{M:{Id:"cmi.interactions.{0}.objectives.{1}.id"}}}}};Course.PREFIX_ACTIVITY_ID="__activity_";Course.ANIMATION_PERCENTAGE_SPEED=10;Course.initialize=function(){this._initializeDomElements();this._suggestStartOrResumeCourse()};Course._suggestStartOrResumeCourse=function(){var t=getAPI(),n;t!=null?(LMSIsInitialized()||doLMSInitialize(""),n=doLMSGetValue(ScormVariable.Entry),n!="ab-initio"?this._setView(Course.Views.Suspended):this._setView(Course.Views.NotStarted)):this._setView(Course.Views.NotStarted)};Course.start=function(){this._launchCourse(!1)};Course.resume=function(){this._launchCourse(!0)};Course._launchCourse=function(n){this._isResume=n;this._initializeControls();this._initializeState();this._initializeCourse()};Course._initializeDomElements=function(){this._attemptLimitInfo=$get("attemptLimitInfo");this._breadcrumb=$get("breadcrumb");this._courseMainContent=$get("mainContent");this._courseEndProgressScreen=$get("courseEndProgressScreen");this._courseEndScoreScreen=$get("courseEndScoreScreen");this._courseTree=$get("courseTree");this._courseItemDescription=$get("courseItemDescription");this._courseItemDescriptionText=$get("courseItemDescriptionText");this._courseItemDescriptionStatus=$get("courseItemDescriptionStatus");this._courseItemFrame=$get("courseItemFrame");this._courseItemWindow=$get("courseItemWindow");this._courseProgressEndText=$get("courseProgressEndText");this._courseProgressIntro=$get("courseProgressIntro");this._courseProgressLevel=$get("courseProgressLevel");this._courseProgressPercentage=$get("courseProgressPercentage");this._courseProgressText=$get("courseProgressText");this._courseProgressTitle=$get("courseProgressTitle");this._courseScoreEndText=$get("courseScoreEndText");this._courseScoreIntroText=$get("courseScoreIntroText");this._courseScoreTitle=$get("courseScoreTitle");this._courseTitle=$get("courseTitle");this._descriptionCloser=$get("descriptionCloser");this._glassPane=$get("glassPane");this._messageUser=$get("messageUser");this._messageUserTitle=$get("messageUserTitle");this._messageUserText=$get("messageUserText");this._nextButton=$get("nextButton");this._openCourseItemButton=$get("openCourseItemButton");this._popupBackground=$get("popupBackground");this._previousButton=$get("previousButton");this._progressLevel=$get("progressLevel");this._progressNumber=$get("progressNumber");this._requiredScoreBar=$get("requiredScoreBar");this._requiredScorePercentage=$get("requiredScorePercentage");this._requiredScoreText=$get("requiredScoreText");this._scoreBars=$get("scoreBars");this._separatorScoreBar=$get("separatorScoreBar");this._tableOfContentsTree=$get("tableOfContentsTree");this._titleItem=$get("titleItem");this._TOCButton=$get("tableOfContentsButton");this._TOCPane=$get("tableOfContents");this._TOCSplitter=$get("tableOfContentsSplitter");this._userScoreBar=$get("userScoreBar");this._userScorePercentage=$get("userScorePercentage");this._userScoreText=$get("userScoreText");this._views={};this._views[Course.Views.NotStarted]=$get("notStarted");this._views[Course.Views.Suspended]=$get("suspended");this._views[Course.Views.Started]=$get("started");this._views[Course.Views.Saving]=$get("saving");this._views[Course.Views.Loading]=$get("loading");this._views[Course.Views.Running]=$get("running");this._views[Course.Views.Finished]=$get("finished");$addHandler(document.body,"click",Function.createDelegate(this,this._onClick));var n=Function.createDelegate(this,this._onUnload);$addHandler(window,"beforeunload",n);$addHandler(window,"unload",n);$addHandler(window,"resize",Function.createDelegate(this,this._onResize));!0&&Sys.UI.DomElement.removeCssClass(this._views[Course.Views.Running],"has-toc")};Course._initializeControls=function(){this._TOCPaneOffsetDelta=null;this._splitterControl=this._createSplitterControl();this._animationDescriptionTimeout=null;this._animationPercentageHandler=Function.createDelegate(this,this._animatePercentage);this._animationPercentageInterval=null;this._percentageValue=0;this._countDownPercentage=0};Course._initializeState=function(){this._activities={};this._folderCollapsedState={};this._currentActivityId="";this._activityPlayingRequest=null;this._endSession=!1;this._sendScoresToLms=!0;this._courseInProgress=!0;this._passingScore=""};Course.terminate=function(){this._view==Course.Views.Running&&(this._endSession?SendScoresToLms():(this._endSession=!0,Course.UnloadContent(),this._issueSuspendAllRequest(),SendScoresToLms()))};Course._setView=function(n){var t=this._views;for(var i in t)t[i].style.display=i==n?"":"none";this._view=n;n==Course.Views.Running&&this._resizePanes()};Course._getElementByClassName=function(n,t){for(var i=Sys.UI.DomElement;n.parentNode;n=n.parentNode)if(i.containsCssClass(n,t))return n;return null};Course._isElementDisabled=function(n){for(var t=Sys.UI.DomElement;n.parentNode;n=n.parentNode)if(t.containsCssClass(n,"disabled"))return!0;return!1};Course._getButton=function(n){return this._getElementByClassName(n,"button")};Course._getTocItem=function(n){return this._getElementByClassName(n,"tocitem")};Course._getFolder=function(n){return this._getElementByClassName(n,"coursefolder")};Course._isCourseItemOpenerButton=function(n){return n==this._openCourseItemButton};Course._isCourseItemDescriptionCloserButton=function(n){return n==this._descriptionCloser};Course._isExitCourseEndScreen=function(n){return this._getElementByClassName(n,"exit")};Course._onUnload=function(){this.terminate()};Course._onClick=function(n){var i=n.target,t;if(this._isElementDisabled(i,"disabled")){this._stopDomEvent(n);return}if(t=this._getButton(i),t){this._stopDomEvent(n);this._processButtonClick(t);return}if(t=this._getFolder(i),t!=null){this._stopDomEvent(n);this._manageFolderCollapsing(t);return}if(t=this._getTocItem(i),t){this._stopDomEvent(n);this._selectTocItem(t);return}if(this._isCourseItemOpenerButton(i)){this._stopDomEvent(n);this._playCurrentActivity();return}if(this._isCourseItemDescriptionCloserButton(i)){this._stopDomEvent(n);this._closeItemDescription();Sys.UI.DomElement.removeCssClass(this._views[Course.Views.Running],"focus-on-content");return}if(this._isExitCourseEndScreen(i)){this._stopDomEvent(n);this._sessionFinishedExitCourse();return}};Course._onResize=function(){Course._resizePanes()};Course._stopDomEvent=function(n){n.stopPropagation();n.preventDefault()};Course._selectTocItem=function(n){this._processActivityClick(this._getActivityIdFromCourseItemId(n.id))};Course._processButtonClick=function(n){if(n==this._TOCButton){this._manageTOCButtonAndPaneDisplay(this._TOCButton);return}if(n==this._previousButton){this._issuePreviousRequest();return}if(n==this._nextButton){this._issueContinueRequest();return}};Course._sessionFinishedExitCourse=function(){this._endSession=!0;this.terminate();window==window.top&&setTimeout("window.close()",0)};Course._processActivityClick=function(n){var t=this._activities[n],r,i;typeof t!="undefined"&&this._canChoose(n)&&(this._courseEndProgressScreen.style.display==""&&(this._clearProgressScreen(),this._endSession=!1),this._animationDescriptionTimeout!=null&&(clearTimeout(this._animationDescriptionTimeout),this._animationDescriptionTimeout=null),this._setLayerVisibility(this._messageUser,!1),this._updateActivitySelection(t),this._setLayerVisibility(this._courseItemFrame,!1),this._setButtonDisabled(this._previousButton,!0),this._setButtonDisabled(this._nextButton,!0),this._titleItem.innerText=t.Title,this._courseItemDescriptionStatus.className="nostatus",t.Sequencing.PrimaryObjective.Progress.ObjectiveProgressStatus&&t.Sequencing.PrimaryObjective.Progress.CompletionStatus=="completed"&&(this._courseItemDescriptionStatus.innerText="You have completed this item",this._courseItemDescriptionStatus.className="completed"),this._courseItemDescriptionText.innerHTML=t.Description.trim()!=""?t.Description:"This item has no description",this._attemptLimitInfo.innerHTML="",t.Sequencing.LimitConditions.AttemptLimit>0&&(r=t==this._sequencingRuntime.CurrentActivity?t.Progress.ActivityAttemptCount-1:t.Progress.ActivityAttemptCount,i=t.Sequencing.LimitConditions.AttemptLimit-r,this._attemptLimitInfo.innerText=i<=1?" (1 attempt left)":" ("+String.format("{0} attempts left",i)+")"),this._setLayerVisibility(this._courseItemDescription,!0),this._courseItemDescription.style.display="",Sys.UI.DomElement.addCssClass(this._views[Course.Views.Running],"has-description"),Sys.UI.DomElement.addCssClass(this._views[Course.Views.Running],"focus-on-content"))};Course._updateActivitySelection=function(n){var i,t;if(n==null||n==root){this._unselectCurrentActivity(!0);this._breadcrumb.innerHTML="";return}while(n&&!n.IsVisible)n=n.Parent;if(!n||typeof this._activities[n.Identifier]=="undefined"){this._unselectCurrentActivity(!0);this._breadcrumb.innerHTML="";return}(i=n.Identifier,this._currentActivityId!=i)&&(this._unselectCurrentActivity(),t=$get(this._getCourseItemIdFromActivityId(i)),t&&(Sys.UI.DomElement.addCssClass(t,"selected"),this._tableOfContentsTree.scrollHeight>this._tableOfContentsTree.clientHeight&&(t.offsetTop<this._tableOfContentsTree.scrollTop?this._tableOfContentsTree.scrollTop=t.offsetTop:t.offsetTop+t.offsetHeight>this._tableOfContentsTree.scrollTop+this._tableOfContentsTree.clientHeight&&(this._tableOfContentsTree.scrollTop=t.offsetTop+t.offsetHeight-this._tableOfContentsTree.clientHeight))),this._updateBreadcrumb(n),this._currentActivityId=i)};Course._unselectCurrentActivity=function(n){var t,i;this._currentActivityId!=""&&(t=$get(this._getCourseItemIdFromActivityId(this._currentActivityId)),t&&(Sys.UI.DomElement.removeCssClass(t,"selected"),n&&(Sys.UI.DomElement.removeCssClass(t,"running"),i=$get("running_ico"),i&&i.parentNode.removeChild(i))),this._currentActivityId="")};Course._updateBreadcrumb=function(n){this._breadcrumb.innerHTML="";for(var t=n,i=null;t&&t!=root;)t.IsVisible&&(i=document.createElement("li"),i.className="item",i.innerText=t.Title,this._breadcrumb.firstChild?this._breadcrumb.insertBefore(i,this._breadcrumb.firstChild):this._breadcrumb.appendChild(i)),t=t.Parent;Sys.Browser.agent===Sys.Browser.InternetExplorer&&Sys.Browser.version==7&&(this._breadcrumb.style.display="none",this._breadcrumb.style.display="")};Course._getCourseItemIdFromActivityId=function(n){return Course.PREFIX_ACTIVITY_ID+n};Course._getActivityIdFromCourseItemId=function(n){return n.replace(Course.PREFIX_ACTIVITY_ID,"")};Course._closeItemDescription=function(){var n,t;if(this._courseItemDescription.style.left="",this._setLayerVisibility(this._courseItemDescription,!1),this._animationDescriptionTimeout=setTimeout(function(){Course._courseItemDescription.style.display="none"},2e3),Sys.UI.DomElement.removeCssClass(this._views[Course.Views.Running],"has-description"),n=this._sequencingRuntime.CurrentActivity,n){if(this._currentActivityId!=n.Identifier){if(t=this._activities[n.Identifier],typeof t=="undefined")return;this._updateActivitySelection(n)}n.IsActive?(this._setLayerVisibility(this._courseItemFrame,!0),this._setButtonDisabled(this._previousButton,!this._canPrevious()),this._setButtonDisabled(this._nextButton,!this._canContinue())):(this._messageUserTitle.innerText="Item not available",this._messageUserText.innerText="The item is no longer available. Please select another item in the table of contents.",this._setLayerVisibility(this._messageUser,!0))}else this._updateActivitySelection(null),this._messageUserTitle.innerText="No item selected",this._messageUserText.innerText="Please select an item in the table of contents.",this._setLayerVisibility(this._messageUser,!0)};Course._playCurrentActivity=function(){var n,t;if(this._currentActivityId!="")if(n=this._sequencingRuntime.CurrentActivity,n&&n.Identifier==this._currentActivityId)this._closeItemDescription(),this._checkSCOTerminated(),t=new DeliveryRequest,t.TargetActivity=n,Course.DeliverContent(t);else{if(n&&n.Sequencing.LimitConditions.AttemptLimit>0&&n.IsActive&&n.Progress.ActivityAttemptCount==n.Sequencing.LimitConditions.AttemptLimit&&!confirm("You have one attempt left on the running item. Are you sure you want to skip it?"))return;this._activityPlayingRequest=typeof this._activities[this._currentActivityId]!="undefined"?this._activities[this._currentActivityId]:null;Course._issueChoiceRequest(this._currentActivityId);setTimeout(function(){Course._closeItemDescription()},0)}};Course._manageTOCButtonAndPaneDisplay=function(){var n=Sys.UI.DomElement,t=this._views[Course.Views.Running];n.toggleCssClass(t,"focus-on-content");n.toggleCssClass(t,"has-toc");this._resizePanes()};Course._setButtonDisabled=function(n,t){t?Sys.UI.DomElement.addCssClass(n,"disabled"):Sys.UI.DomElement.removeCssClass(n,"disabled")};Course._manageFolderCollapsing=function(n){n&&(Sys.UI.DomElement.containsCssClass(n,"collapsed")?(Sys.UI.DomElement.removeCssClass(n,"collapsed"),this._folderCollapsedState[n.id]=!1):(Sys.UI.DomElement.addCssClass(n,"collapsed"),this._folderCollapsedState[n.id]=!0),Sys.Browser.agent===Sys.Browser.InternetExplorer&&Sys.Browser.version<=8&&(n.parentNode.style.display="none",n.parentNode.style.display=""))};Course._setLayerVisibility=function(n,t){t?(Sys.UI.DomElement.removeCssClass(n,"hidden"),Sys.UI.DomElement.addCssClass(n,"visible")):(Sys.UI.DomElement.removeCssClass(n,"visible"),Sys.UI.DomElement.addCssClass(n,"hidden"))};Course._createSplitterControl=function(){var n=$create(Assima.Controls.Splitter,{},null,null,this._TOCSplitter);return n.add_startMoving(this._splitterStartMoving),n.add_splitterMoved(this._splitterMoved),n.add_endMoving(this._splitterEndMoving),n};Course._splitterStartMoving=function(){Course._setGlassPaneEnabled(!0)};Course._splitterEndMoving=function(){Course._setGlassPaneEnabled(!1)};Course._setGlassPaneEnabled=function(n){this._glassPane.style.display=n?"":"none"};Course._splitterMoved=function(n,t){Course._resizePanes(t.posX)};Course._resizePanes=function(n){var i=Sys.UI.DomElement.containsCssClass(this._views[Course.Views.Running],"has-toc");if(i){n==null&&(n=parseInt(this._courseMainContent.getAttribute("data-splitter-pos")));var r=document.documentElement.clientWidth||document.body.clientWidth,u=Math.ceil(2*r/3),t=Math.max(256,Math.min(n,u));this._TOCPane.style.width=t+"px";this._courseItemWindow.style.left=t+"px";this._courseMainContent.setAttribute("data-splitter-pos",n)}else this._TOCPane.style.width="",this._courseItemWindow.style.left=0};Course._updateTableOfContents=function(){var t,n,i,r;for(this._courseTree.innerHTML="",this._updateCourseProgress(root),t={Value:root,CanSelect:!0,Disabled:!1,Children:[]},n=0,i=root.AvailableChildren.length;n<i;n++)this._createTOCTree(root.AvailableChildren[n],t);for(this._courseTree.appendChild(this._createTOCHtmlNode(root,!1,!1,!1)),n=0,i=t.Children.length;n<i;n++)this._createHTMLTree(t.Children[n],this._courseTree);this._endSession||(r=this._activityPlayingRequest!=null?this._activityPlayingRequest:this._sequencingRuntime.CurrentActivity,this._updateActivitySelection(r),this._setButtonDisabled(this._previousButton,!this._canPrevious()),this._setButtonDisabled(this._nextButton,!this._canContinue()))};Course._createTOCTree=function(n,t){var i=null,u,r;for(n.IsVisible&&(i={Value:n,CanSelect:!1,Disabled:!1,IsFolder:!1,Children:[]},this._sequencingRuntime.RunSequencingRulesCheckProcess(n,RuleAction.Disabled)!=null?i.Disabled=!0:this._sequencingRuntime.RunSequencingRulesCheckProcess(n,RuleAction.HiddenFromChoice)==null?this._canChoose(n.Identifier)&&(i.CanSelect=!0):i=null,i!=null&&(i.IsFolder=!n.Path)),u=i!=null?i:t,r=0;r<n.AvailableChildren.length;r++)this._createTOCTree(n.AvailableChildren[r],u);i!=null&&(t.Children[t.Children.length]=i,this._activities[n.Identifier]=n)};Course._createHTMLTree=function(n,t){var u=this._createTOCHtmlNode(n.Value,n.CanSelect,n.Disabled,n.IsFolder),r,i;if(n.Children.length>0){for(r=document.createElement("ol"),i=0;i<n.Children.length;i++)this._createHTMLTree(n.Children[i],r);u.appendChild(r)}t.appendChild(u)};Course._createTOCHtmlNode=function(n,t,i,r){var h=document.createElement("li"),e=this._getCourseItemIdFromActivityId(n.Identifier),u="",c=n==this._sequencingRuntime.CurrentActivity&&n!=root,o,f,s;return r?(o="tocitem coursefolder",this._folderCollapsedState[e]&&(o+=" collapsed"),u="<a id='"+e+"' href='#' class='"+o+"'>"+n.Title+"<\/a>"):(f="courseitem",this._currentActivityId==n.Identifier&&(f+=" selected"),(i||n.Sequencing.LimitConditions.AttemptLimit>0&&!t)&&(f+=" disabled"),n==root&&(f+=" root"),c&&(f+=" running"),u=t?"<a id='"+e+"' href='#' class='tocitem "+f+"'>":"<span id='"+e+"' class='tocitem "+f+"'>",s=this._getStatusFromActivity(n),u+="<span class='status "+s.cssClass+"'>"+s.score+"<\/span>",c&&(u+="<span id='running_ico' title='This item is currently running'><\/span>"),u+="<span class='name'>",u+=n.Title.replace(/</g,"&lt;").replace(/>/g,"&gt;"),u+="<\/span>",u+=t?"<\/a>":"<\/span>"),h.innerHTML=u,h};Course._getStatusFromActivity=function(n){var u,f,o,r;if(n!=null){var e=n.Sequencing,i=e.PrimaryObjective,t={cssClass:"",score:""};return i==null?t:(u="unknown",i.Progress.ObjectiveProgressStatus&&(u=i.Progress.CompletionStatus,e.RollupRules.ObjectiveMeasureWeight>0&&(f=i.Progress.SuccessStatus,f!="unknown")))?(o=Math.floor(i.Progress.ObjectiveNormalizedMeasure*100),t.cssClass="satisfaction "+f,t.score=o,t):(u=="completed"?t.cssClass="completion completed":(r=n.Sequencing.PrimaryObjective.Progress.ObjectiveCompletionAmount,r==""||isNaN(r)||(t.cssClass="completion lvl"+Math.floor(r*10)*10)),t)}};Course._updateCourseProgress=function(n){if(n!=null){var t=Math.floor(n.Sequencing.PrimaryObjective.Progress.ObjectiveCompletionAmount*100);this._progressLevel.style.width=t+"%";this._progressNumber.innerText=String.format(" {0}% complete",t)}};Course.UnloadContent=function(){Course._courseItemFrame.src="about:blank";Sys.UI.DomElement.removeCssClass(this._views[Course.Views.Running],"has-content")};Course._addTrackingModelObjectiveToRTE=function(n){var t=new Objective;t.id=n.Identifier;n.Progress.ObjectiveProgressStatus&&(n.Progress.ObjectiveSatisfiedStatus&&(t.success_status=n.Progress.SuccessStatus),n.Progress.ObjectiveCompletionStatus&&(t.success_status=n.Progress.CompletionStatus));n.Progress.ObjectiveMeasureStatus&&(t.score.scaled=n.Progress.ObjectiveNormalizedMeasure,t.score.raw=n.Progress.Raw,t.score.min=n.Progress.Min,t.score.max=n.Progress.Raw);n.Progress.ObjectiveCompletionAmountStatus&&(t.progress_measure=n.Progress.ObjectiveCompletionAmount);window.scorm2004RTE.objectives[window.scorm2004RTE.objectives.length]=t};Course.DeliverContent=function(n){var i=n.TargetActivity,t,r,u,f;if(i!=null){if(t=window.scorm2004RTE=i.Result,t==null)for(window.scorm2004RTE=t=new Scorm2004RTE,t.learner_id=Course._userInformation.Id,t.learner_name=Course._userInformation.Name,t.objectives=[],i.Sequencing.PrimaryObjective!=null&&Course._addTrackingModelObjectiveToRTE(i.Sequencing.PrimaryObjective),r=0;r<i.Sequencing.SecondaryObjectives.length;r++)Course._addTrackingModelObjectiveToRTE(i.Sequencing.SecondaryObjectives[r]);else t.exit=="suspend"&&(t.entry="resume",t.score.scaled=null);Course.LastActivityDeliveryTime=new Date;u="Files/"+i.Path;i.OpenInNewWindow&&(f=Course._getCurrentDirPath(),u=String.format("{0}/newWindow.html?url={1}",f+TEMPLATE_PATH,f+u));this._courseItemFrame.src=u;this._setButtonDisabled(this._previousButton,!this._canPrevious());this._setButtonDisabled(this._nextButton,!this._canContinue());Sys.UI.DomElement.addCssClass(this._views[Course.Views.Running],"has-content")}};Course.LastActivityDeliveryTime=null;Course._sequencingRuntime=null;Course._commitCalled=!1;Course.CommitCalled=function(){Course._sequencingRuntime.CurrentActivity&&(Course._commitCalled||(Course._sequencingRuntime.RunContentDeliveryEnvironmentProcessActivityCount(),Course._commitCalled=!0),Course._sequencingRuntime.CurrentActivity.UpdateProgress(window.scorm2004RTE),Course._sequencingRuntime.RunOverallRollupProcess(Course._sequencingRuntime.CurrentActivity),Course._updateTableOfContents())};Course.EndSession=function(){this._endSession||(this._endSession=!0,this._updateActivitySelection(null),this._sequencingRuntime.CurrentActivity=null,this._setLayerVisibility(this._courseItemFrame,!1),this._setButtonDisabled(this._previousButton,!0),this._setButtonDisabled(this._nextButton,!0),this._displayEndSessionWindow())};Course._displayEndSessionWindow=function(){var n=this._sequencingRuntime.Root.Sequencing.PrimaryObjective.Progress,f=n.CompletionStatus,r=n.SuccessStatus,t,u,i;f=="completed"&&(r=="passed"||r=="failed")?(this._courseInProgress=!1,this._percentageValue=Math.floor(n.ObjectiveNormalizedMeasure*100),this._countDownPercentage=this._percentageValue,getAPI()&&(this._passingScore=doLMSGetValue("cmi.scaled_passing_score"),t=parseFloat(this._passingScore),isNaN(t)&&(this._passingScore=""),isNaN(t)||(u=Math.floor(t*100)+"%",this._requiredScorePercentage.innerText=u,this._requiredScoreBar.style.height=u,this._requiredScoreText.style.display="",this._scoreBars.style.display="")),!n.ObjectiveMeasureStatus||n.SuccessStatus=="passed"&&this._percentageValue==0||(this._userScoreText.style.display=""),r=="passed"?(Sys.UI.DomElement.addCssClass(this._courseEndScoreScreen,"passed"),this._courseScoreTitle.innerText="Congratulations !",this._courseScoreIntroText.innerText="You have passed this course",this._courseScoreEndText.innerText="Your score for this course has been saved. You can now click Exit to close the course."):(Sys.UI.DomElement.addCssClass(this._courseEndScoreScreen,"failed"),this._courseScoreTitle.innerText="Course failed",this._courseScoreIntroText.innerText="You have failed this course",this._courseScoreEndText.innerText="You can now click Exit to close the course."),this._courseEndScoreScreen.style.display="",!n.ObjectiveMeasureStatus||n.SuccessStatus=="passed"&&this._percentageValue==0||(this._animationPercentageInterval=setInterval(this._animationPercentageHandler,Course.ANIMATION_PERCENTAGE_SPEED))):(this._courseProgressTitle.innerText="End of course",this._percentageValue=Math.floor(n.ObjectiveCompletionAmount*100),this._countDownPercentage=this._percentageValue,i=this._percentageValue+"%",this._courseProgressIntro.innerText=this._percentageValue!=100?"You have reached the end of the course but you did not complete all the items.":"You have reached the end of the course.",this._courseProgressPercentage.innerText=i,this._courseProgressPercentage.style.left=i,this._courseProgressText.innerText=String.format("The course is now {0} complete",i),this._courseProgressEndText.innerText=this._percentageValue==100?"You can either replay some course items or click Exit to leave the course.":n.ObjectiveMeasureStatus?"You can either continue to attempt all the items in the course in order to complete it or click Exit to leave the course at this stage and resume it later. The score is calculated only on completion of the course.":"You can either continue to attempt all the items in the course in order to complete it or click Exit to leave the course at this stage and resume it later.",this._courseEndProgressScreen.style.display="",this._animationPercentageInterval=setInterval(this._animationPercentageHandler,Course.ANIMATION_PERCENTAGE_SPEED))};Course._animatePercentage=function(){if(this._animationPercentageInterval)if(this._countDownPercentage<0)clearInterval(this._animationPercentageInterval),this._animationPercentageInterval=null,this._courseInProgress&&Sys.UI.DomElement.addCssClass(this._courseProgressPercentage,"visible");else{var n=this._percentageValue-this._countDownPercentage+"%";this._courseInProgress?this._courseProgressLevel.style.width=n:(this._userScorePercentage.innerText=n,this._passingScore!=""&&(this._userScoreBar.style.height=n));this._countDownPercentage--}};Course._clearProgressScreen=function(){clearInterval(this._animationPercentageInterval);this._animationPercentageInterval=null;Sys.UI.DomElement.removeCssClass(this._courseProgressPercentage,"visible");this._courseEndProgressScreen.style.display="none"};Course._certificateLoaded=function(n){Course._parseCertificate(n.document.body);n.print()};Course.OpenCertificate=function(){var n=Course._getCurrentDirPath(),t=String.format("{0}/print.html?url={1}Files/Certificate/index.html",n+TEMPLATE_PATH,n);window.CertificateLoaded=function(){Course._certificateLoaded.apply(Course,arguments)};window.open(t,"Course_certificate","toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,width=640,height=768")};Course._getCurrentDirPath=function(){return location.href.substring(0,location.href.lastIndexOf("/")+1)};Course._parseCertificate=function(n){var t=n.innerHTML,o,e;this._userInformation!=null&&(this._userInformation.ValidNames?(t=t.replace(/{USER_FIRSTNAME}/g,this._userInformation.Firstname.replace(/</g,"&lt;").replace(/>/g,"&gt;")),t=t.replace(/{USER_SURNAME}/g,this._userInformation.Surname.replace(/</g,"&lt;").replace(/>/g,"&gt;"))):(t=t.replace(/{USER_FIRSTNAME}/g,""),t=t.replace(/{USER_SURNAME}/g,this._userInformation.Name.replace(/</g,"&lt;").replace(/>/g,"&gt;"))));t=t.replace(/{COURSE_NAME}/g,root.Title.replace(/</g,"&lt;").replace(/>/g,"&gt;"));t=t.replace(/{COURSE_DESCRIPTION}/g,root.Description);t=t.replace(/{COURSE_RESULT}/g,this._userScorePercentage.innerHTML);var f=parseInt(SessionTimeHelper.ConvertSessionTimeToSeconds(Course._sequencingRuntime.GetCourseSessionTime())),i=Math.floor(f/3600),r=Math.floor((f-i*3600)/60),u=f-i*3600-r*60;i<10&&(i="0"+i);r<10&&(r="0"+r);u<10&&(u="0"+u);o=i+":"+r+":"+u;t=t.replace(/{COURSE_DURATION}/g,o);e=new Date;t=t.replace(/{DATE}/g,e.toLocaleDateString()+" "+e.toLocaleTimeString());n.innerHTML=t};Course.ScoTerminated=function(){var n,t;Course._sequencingRuntime.SetResult(window.scorm2004RTE);Course._commitCalled=!1;window.scorm2004RTE.nav.request!="_none_"&&(n=(new Request).CreateFromString(window.scorm2004RTE.nav.request),Course._checkRequestValidity(n)&&(Course._sequencingRuntime.RunOverallSequencingProcess(n),n.TargetActivity==null&&(t=Course._currentActivityId,Course._updateActivitySelection(null),Course._sequencingRuntime.CurrentActivity=null,Course._setLayerVisibility(Course._courseItemFrame,!1),Course._processActivityClick(t))))};Course._canContinue=function(){var n=new Request;return n.NavRequest=NavRequest.Continue,this._checkRequestValidity(n)};Course._canPrevious=function(){var n=new Request;return n.NavRequest=NavRequest.Previous,this._checkRequestValidity(n)};Course._canChoose=function(n){var t=(new Request).CreateFromString("{target="+n+"}choice");return this._checkRequestValidity(t)};Course._checkRequestValidity=function(n){var e=[],s,t,i,r,o,f,u,h;for(i in _globalObjectives)e[i]=_globalObjectives[i].Clone(null,!0),e[i].MapInfos=[];for(s=this._sequencingRuntime.Root.Clone(e),t=new SequencingRuntime,t.Init(s),i=0;i<t.Activities.length;i++)t.Activities[i].IsEqualTo(this._sequencingRuntime.CurrentActivity)?t.CurrentActivity=t.Activities[i]:t.Activities[i].IsEqualTo(this._sequencingRuntime.SuspendedActivity)&&(t.SuspendedActivity=t.Activities[i]);if(r=t.RunNavigationRequestProcess(n),r.Exception!=Exception.None)return!1;if(r.TerminationRequest!=NavRequest.None){if(o=new Request,o.NavRequest=r.TerminationRequest,f=t.RunTerminationRequestProcess(o),f.Exception!=Exception.None)return!1;f.SequencingRequest!=NavRequest.None&&(n.NavRequest=f.SequencingRequest)}if(r.SequencingRequest!=NavRequest.None){if(u=t.RunSequencingRequestProcess(n),u.Exception!=Exception.None)return!1;if(u.EndSequencingSession)return!0;if(u.TargetActivity==null||(h=t.RunDeliveryRequestProcess(u),!h.IsValid))return!1}return!0};Course._issueSuspendAllRequest=function(){var n=new Request;n.NavRequest=NavRequest.SuspendAll;this._sequencingRuntime.RunOverallSequencingProcess(n)};Course._issueContinueRequest=function(){var n=new Request;n.NavRequest=NavRequest.Continue;this._processSequencingRequest(n)};Course._issueChoiceRequest=function(n){var t=(new Request).CreateFromString("{target="+n+"}choice");this._processSequencingRequest(t)};Course._issuePreviousRequest=function(){var n=new Request;n.NavRequest=NavRequest.Previous;this._processSequencingRequest(n)};Course._processSequencingRequest=function(n){Course.UnloadContent();this._checkSCOTerminated();var i=this._sequencingRuntime.RunOverallSequencingProcess(n),t=i!="Activity unavailable";this._setLayerVisibility(this._messageUser,!t);this._setLayerVisibility(this._courseItemFrame,t);this._updateTableOfContents();this._activityPlayingRequest=null};Course._checkSCOTerminated=function(){API_1484_11._state==CommunicationState.Running&&(API_1484_11.Commit(""),API_1484_11.Terminate(""))};Course._UserInformation=function(){this.Id=0;this.Name="";this.ValidNames=!1;this.Firstname="";this.Surname=""};Course._userInformation=new Course._UserInformation;Course._initializeCourse=function(){var n,t;if(_trackingManager.CallWebService=!1,API_1484_11.SupportSequencing=!0,API_1484_11.AddListener(API_1484_11.GetTerminateCalledEventName(),Course.ScoTerminated),API_1484_11.AddListener(API_1484_11.GetCommitCalledEventName(),Course.CommitCalled),this._sequencingRuntime=new SequencingRuntime,this._sequencingRuntime.Init(root),n=getAPI(),n!=null){if(LMSIsInitialized()||doLMSInitialize(""),doLMSGetValue("cmi.completion_status")=="completed"){this._sendScoresToLms=!1;alert("The course has been completed, the window will now be closed");this._sessionFinishedExitCourse();return}this._userInformation=new this._UserInformation;this._userInformation.Id=doLMSGetValue(ScormVariable.LearnerId);this._userInformation.Name=doLMSGetValue(ScormVariable.LeanerName);this._userInformation.Firstname=n.GetValue(ScormVariable.LearnerFirstname);this._userInformation.Surname=n.GetValue(ScormVariable.LearnerSurname);t=n.GetLastError().toString();this._userInformation.ValidNames=t==0}this._courseTitle.innerText=root.Title;n!=null&&this._isResume?this._resume():this._start()};Course._start=function(){this._setView(Course.Views.Running);this._sequencingRuntime.SuspendedActivity=null;var n=new Request;n.NavRequest=NavRequest.Start;this._checkRequestValidity(n)&&this._sequencingRuntime.RunOverallSequencingProcess(n);this._openCurrentActivity()};Course._resume=function(){var i=doLMSGetValue(ScormVariable.SuspendData),r,n,t,u;if(i==null||i==""){this._start();return}for(i=Sys.Serialization.JavaScriptSerializer.deserialize(i),Course._sequencingRuntime.RestorePreviousState(!0),r=0;r<i.length;r++)n=i[r],typeof n=="string"?(u=(new Request).CreateFromString(n),Course._sequencingRuntime.RunOverallSequencingProcess(u)):(Course._sequencingRuntime.RunContentDeliveryEnvironmentProcessActivityCount(),t=new Scorm2004RTE,t.learner_id=Course._userInformation.Id,t.learner_name=Course._userInformation.Name,n.com!=null&&(t.comments_from_learner=n.com),t.completion_status=n.cs,t.exit=n.exit,n.int!=null&&(t.interactions=n.int),n.pref!=null&&(t.learner_preference=n.pref),n.loc!=null&&(t.location=n.loc),n.obj!=null&&(t.objectives=n.obj),t.progress_measure=n.pm,n.score!=null&&(t.score=n.score),t.session_time=n.st,t.success_status=n.ss,n.sd!=null&&(t.suspend_data=n.sd),t.total_time=n.tt,Course._sequencingRuntime.CurrentActivity.UpdateProgress(t),Course._sequencingRuntime.RunOverallRollupProcess(Course._sequencingRuntime.CurrentActivity),Course._sequencingRuntime.SetResult(t));i.length>0&&i[i.length-1].NavRequest==null&&i[i.length-1].activityId&&(u=(new Request).CreateFromString("{target="+i[i.length-1].activityId+"}jump"),Course._sequencingRuntime.RunOverallSequencingProcess(u));Course._sequencingRuntime.RestorePreviousState(!1);this._setView(Course.Views.Running);this._openCurrentActivity()};Course._openCurrentActivity=function(){var n=this._sequencingRuntime.CurrentActivity,t;n!=null&&n!=root&&(n.IsActive?(this._setLayerVisibility(this._messageUser,!1),this._setLayerVisibility(this._courseItemFrame,!0),n.Sequencing.LimitConditions.AttemptLimit>0&&(t=n.Sequencing.LimitConditions.AttemptLimit-n.Progress.ActivityAttemptCount+1,t==1?setTimeout(function(){alert("You have one attempt left on this item")},1200):setTimeout(function(){alert(String.format("You have {0} attempts left on this item",t))},1200))):(this._messageUserTitle.innerText="Item not available",this._messageUserText.innerText="The item is no longer available. Please select another item in the table of contents.",this._setLayerVisibility(this._messageUser,!0)));this._updateTableOfContents()};Course._setInteractions=function(){for(var f,e,o,v,n,s,i,y,h,r,u,p,a=Course._sequencingRuntime._suspendData,c=parseInt(doLMSGetValue(ScormVariable.Interactions.Count)),t=function(n,t){if(t){var i=String.format(n,c);doLMSSetValue(i,t)}},l=0,w=a.length;l<w;l++)if(f=a[l],f instanceof Course.ActivitySuspendData&&(e=f.int,e))for(o=0,v=e.length;o<v;o++,c++){if(n=e[o],t(ScormVariable.Interactions.N.Id,n.id),s=f.obj,s)for(i=0,y=s.length;i<y;++i)h=s[i],h&&h.id&&doLMSSetValue(String.format(ScormVariable.Interactions.N.Objectives.M.Id,c,i),h.id);if(t(ScormVariable.Interactions.N.Type,n.type),t(ScormVariable.Interactions.N.Description,n.description),t(ScormVariable.Interactions.N.Timestamp,n.timestamp),t(ScormVariable.Interactions.N.Latency,n.latency),t(ScormVariable.Interactions.N.LearnerResponse,n.learner_response),r=n.correct_responses,r&&r.length)for(u=0,p=r.length;u<p;++u)t(ScormVariable.Interactions.N.CorrectResponses.N.Pattern.replace("{1}",u),r[u].pattern||"")}};Course.ActivitySuspendData=function(){this.acId;this.cs="unknown";this.ss="unknown";this.com;this.int;this.obj;this.pref;this.sd;this.loc;this.exit="";this.pm="";this.score;this.st="0000:00:00.00";this.tt="0000:00:00.00";this.ps=0;this.Init=function(n){this.activityId=n.Identifier;var t=n.Result;t!=null&&(this.com=t.comments_from_learner,this.cs=t.completion_status,this.exit=t.exit,this.int=t.interactions,this.pref=t.learner_preference,this.loc=t.location,this.obj=t.objectives,this.pm=t.progress_measure,this.score=t.score,this.st=t.session_time,this.ss=t.success_status,this.sd=t.suspend_data,this.tt=t.total_time,(this.st==""||this.st==null)&&this.SetSessionTime())};this.SetSessionTime=function(){var n=((new Date).getTime()-Course.LastActivityDeliveryTime.getTime())/1e3;this.st=SessionTimeHelper.ConvertSecondsToSessionTime(n)};this.ComesFromPreviousSession=function(){this.ps=1}};SessionTimeHelper={};SessionTimeHelper.ConvertSessionTimeToSeconds=function(n){var i=parseInt(SessionTimeHelper._extract(n,/[0-9]+H/g)),r=parseInt(SessionTimeHelper._extract(n,/[0-9]+M/g)),u=parseFloat(SessionTimeHelper._extract(n,/[0-9]+(\.[0-9]+)?S/g)),t=0;return isNaN(i)||(t+=3600*i),isNaN(r)||(t+=60*r),isNaN(u)||(t+=u),t};SessionTimeHelper._extract=function(n,t){var i=n.match(t);return i!=null&&(i=i[0].slice(0,i[0].length-1)),i};SessionTimeHelper.ConvertSecondsToSessionTime=function(n){var t=Math.floor(n/3600),r=Math.floor((n-t*3600)/60),u=Math.floor(n%60),i="PT";return t>0&&(i+=t+"H"),r>0&&(i+=r+"M"),i+(u+"S")};SessionTimeHelper.GetTotalTime=function(){return((new Date).getTime()-Course._startDate.getTime())/1e3}